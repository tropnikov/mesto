!function(){"use strict";var e={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},t=document.querySelector(".button_type_edit"),n=document.querySelector(".profile-edit__form"),r=n.querySelector("[name='name']"),o=n.querySelector("[name='bio']"),i=document.querySelector(".button_type_add"),a=document.querySelector(".place-add__form");function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,s(e,t,"get"))}function u(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,s(e,t,"set"),n),n}function s(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var f=new WeakMap,p=new WeakMap,h=new WeakMap,v=new WeakMap,d=new WeakMap,w=new WeakMap,y=new WeakMap,b=new WeakMap,m=new WeakMap,k=new WeakMap,g=new WeakMap,_=new WeakMap,S=new WeakMap,E=new WeakMap,W=new WeakMap,M=function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f.set(this,{writable:!0,value:void 0}),p.set(this,{writable:!0,value:void 0}),h.set(this,{writable:!0,value:void 0}),v.set(this,{writable:!0,value:void 0}),d.set(this,{writable:!0,value:void 0}),w.set(this,{writable:!0,value:void 0}),y.set(this,{writable:!0,value:void 0}),b.set(this,{writable:!0,value:void 0}),m.set(this,{writable:!0,value:void 0}),k.set(this,{writable:!0,value:function(e){e.validity.valid?c(r,_).call(r,e):c(r,g).call(r,e,e.validationMessage)}}),g.set(this,{writable:!0,value:function(e,t){var n=c(r,y).querySelector(".".concat(e.id,"-error"));e.classList.add(c(r,d)),n.textContent=t,n.classList.add(c(r,w))}}),_.set(this,{writable:!0,value:function(e){var t=c(r,y).querySelector(".".concat(e.id,"-error"));e.classList.remove(c(r,d)),t.classList.remove(c(r,w)),t.textContent=""}}),l(this,"hideError",(function(){c(r,b).forEach((function(e){c(r,_).call(r,e),c(r,E).call(r)}))})),S.set(this,{writable:!0,value:function(){c(r,E).call(r),c(r,b).forEach((function(e){e.addEventListener("input",(function(){c(r,k).call(r,e),c(r,E).call(r)}))}))}}),E.set(this,{writable:!0,value:function(){c(r,W).call(r)?(c(r,m).classList.add(c(r,v)),c(r,m).setAttribute("disabled",!0)):(c(r,m).classList.remove(c(r,v)),c(r,m).removeAttribute("disabled"))}}),W.set(this,{writable:!0,value:function(){return c(r,b).some((function(e){return!e.validity.valid}))}}),l(this,"enableValidation",(function(){c(r,y).addEventListener("submit",(function(e){e.preventDefault(),c(r,E).call(r)})),c(r,S).call(r)})),u(this,f,t.formSelector),u(this,p,t.inputSelector),u(this,h,t.submitButtonSelector),u(this,v,t.inactiveButtonClass),u(this,d,t.inputErrorClass),u(this,w,t.errorClass),u(this,y,n),u(this,b,Array.from(c(this,y).querySelectorAll(c(this,p)))),u(this,m,c(this,y).querySelector(c(this,h)))};function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,C(e,t,"get"))}function j(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,C(e,t,"set"),n),n}function C(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var q=new WeakMap,P=new WeakMap,L=new WeakMap,R=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),q.set(this,{writable:!0,value:void 0}),P.set(this,{writable:!0,value:void 0}),L.set(this,{writable:!0,value:void 0}),j(this,P,r),j(this,L,document.querySelector(n))}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){T(t,P).call(t,e)}))}},{key:"addItem",value:function(e){T(this,L).prepend(e)}}])&&O(t.prototype,n),e}();function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function U(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,A(e,t,"get"))}function B(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,A(e,t,"set"),n),n}function A(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var D=new WeakMap,N=new WeakMap,z=new WeakMap,V=new WeakMap,J=new WeakMap,H=new WeakMap,F=new WeakMap,G=new WeakMap,K=new WeakMap,Q=new WeakMap,X=new WeakSet,Y=new WeakSet,Z=new WeakSet,$=new WeakSet,ee=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$.add(this),Z.add(this),Y.add(this),X.add(this),D.set(this,{writable:!0,value:void 0}),N.set(this,{writable:!0,value:void 0}),z.set(this,{writable:!0,value:void 0}),V.set(this,{writable:!0,value:void 0}),J.set(this,{writable:!0,value:void 0}),H.set(this,{writable:!0,value:void 0}),F.set(this,{writable:!0,value:void 0}),G.set(this,{writable:!0,value:void 0}),K.set(this,{writable:!0,value:void 0}),Q.set(this,{writable:!0,value:void 0}),B(this,D,t.name),B(this,N,t.link),B(this,Q,t.owner._id),B(this,K,t.likes.length),B(this,z,n),B(this,G,r)}var t,n;return t=e,(n=[{key:"createCard",value:function(){return B(this,V,I(this,X,te).call(this)),B(this,F,U(this,V).querySelector(".place__photo")),U(this,F).src=U(this,N),U(this,F).alt=U(this,D),U(this,V).querySelector(".place__title").innerText=U(this,D),B(this,J,U(this,V).querySelector(".place__delete")),B(this,H,U(this,V).querySelector(".place__like")),U(this,V).querySelector(".place__likes-count").textContent=U(this,K),console.log(U(this,V)),console.log(U(this,Q)),"610711c83a40cf038cbaafdf"==U(this,Q)&&U(this,J).removeAttribute("hidden"),I(this,Y,ne).call(this),U(this,V)}}])&&x(t.prototype,n),e}();function te(){return document.querySelector(U(this,z)).content.querySelector(".place").cloneNode(!0)}function ne(){var e=this;U(this,J).addEventListener("click",(function(){I(e,Z,re).call(e)})),U(this,H).addEventListener("click",(function(){I(e,$,oe).call(e)})),U(this,F).addEventListener("click",(function(){U(e,G).call(e,U(e,D),U(e,N))}))}function re(){U(this,V).remove()}function oe(){U(this,H).classList.toggle("place__like_active")}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,le(e,t,"get"))}function le(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ce=new WeakMap,ue=new WeakMap,se=function(){function e(t){var n,r,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ce.set(this,{writable:!0,value:void 0}),ue.set(this,{writable:!0,value:function(e){"Escape"===e.key&&i.close()}}),n=this,r=ce,o=document.querySelector(t),function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(n,le(n,r,"set"),o)}var t,n;return t=e,(n=[{key:"open",value:function(){ae(this,ce).classList.add("popup_opened"),document.addEventListener("keydown",ae(this,ue))}},{key:"close",value:function(){ae(this,ce).classList.remove("popup_opened"),document.removeEventListener("keydown",ae(this,ue))}},{key:"setEventListeners",value:function(){var e=this;ae(this,ce).querySelector(".popup__close").addEventListener("click",(function(){e.close()})),ae(this,ce).addEventListener("click",(function(t){t.target===t.currentTarget&&e.close()}))}}])&&ie(t.prototype,n),e}();function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t,n){return(he="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ye(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?we(e):t}function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ke(e,t,"get"))}function me(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ke(e,t,"set"),n),n}function ke(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ge=new WeakMap,_e=new WeakMap,Se=new WeakMap,Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ye(r);if(o){var n=ye(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return de(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),ge.set(we(t),{writable:!0,value:void 0}),_e.set(we(t),{writable:!0,value:void 0}),Se.set(we(t),{writable:!0,value:void 0}),me(we(t),ge,document.querySelector(e)),me(we(t),_e,be(we(t),ge).querySelector(".place-full-photo__image")),me(we(t),Se,be(we(t),ge).querySelector(".place-full-photo__caption")),t}return t=a,(n=[{key:"open",value:function(e,t){be(this,_e).src=t,be(this,_e).alt=e,be(this,Se).textContent=e,he(ye(a.prototype),"open",this).call(this)}}])&&pe(t.prototype,n),a}(se);function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oe(e,t,n){return(Oe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e,t){return!t||"object"!==We(t)&&"function"!=typeof t?Ce(e):t}function Ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Re(e,t,"get"))}function Le(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Re(e,t,"set"),n),n}function Re(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var xe=new WeakMap,Ie=new WeakMap,Ue=new WeakMap,Be=new WeakMap,Ae=new WeakMap,De=new WeakSet,Ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=qe(r);if(o){var n=qe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return je(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=i.call(this,e),De.add(Ce(n)),xe.set(Ce(n),{writable:!0,value:void 0}),Ie.set(Ce(n),{writable:!0,value:void 0}),Ue.set(Ce(n),{writable:!0,value:void 0}),Be.set(Ce(n),{writable:!0,value:void 0}),Ae.set(Ce(n),{writable:!0,value:void 0}),Le(Ce(n),Be,document.querySelector(e)),Le(Ce(n),xe,t),Le(Ce(n),Ae,Pe(Ce(n),Be).querySelector(".form")),Le(Ce(n),Ue,Pe(Ce(n),Be).querySelectorAll(".form__input")),n}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;Pe(this,Ae).addEventListener("submit",(function(t){t.preventDefault(),Pe(e,xe).call(e,function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(e,De,ze).call(e))})),Oe(qe(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){Oe(qe(a.prototype),"close",this).call(this),Pe(this,Ae).reset()}}])&&Me(t.prototype,n),a}(se);function ze(){var e=this;return Le(this,Ie,{}),Pe(this,Ue).forEach((function(t){Pe(e,Ie)[t.name]=t.value})),Pe(this,Ie)}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Fe(e,t,"get"))}function He(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Fe(e,t,"set"),n),n}function Fe(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Ge=new WeakMap,Ke=new WeakMap,Qe=new WeakMap,Xe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ge.set(this,{writable:!0,value:void 0}),Ke.set(this,{writable:!0,value:void 0}),Qe.set(this,{writable:!0,value:void 0}),He(this,Ge,document.querySelector(t.profileNameSelector)),He(this,Ke,document.querySelector(t.profileBioSelector)),He(this,Qe,document.querySelector(t.profileAvatarSelector))}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:Je(this,Ge).textContent,bio:Je(this,Ke).textContent}}},{key:"setUserInfo",value:function(e){Je(this,Ge).textContent=e.name,Je(this,Ke).textContent=e.bio}}])&&Ve(t.prototype,n),e}();function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ze(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,et(e,t,"get"))}function $e(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,et(e,t,"set"),n),n}function et(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var tt=new WeakMap,nt=new WeakMap,rt=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),tt.set(this,{writable:!0,value:void 0}),nt.set(this,{writable:!0,value:void 0}),$e(this,tt,t.baseUrl),$e(this,nt,t.headers)}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return fetch(Ze(this,tt)+"/cards",{headers:Ze(this,nt)}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"getUserData",value:function(){return fetch(Ze(this,tt)+"/users/me",{headers:Ze(this,nt)}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"saveUserData",value:function(e){fetch(Ze(this,tt)+"/users/me",{method:"PATCH",headers:{authorization:"3936a02f-bc3d-48a7-bceb-bcb201e7df53","Content-Type":"application/json"},body:JSON.stringify({name:e.name,about:e.bio})}).then((function(e){if(!e.ok)return Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"addNewCard",value:function(e){fetch(Ze(this,tt)+"/cards",{method:"POST",headers:{authorization:"3936a02f-bc3d-48a7-bceb-bcb201e7df53","Content-Type":"application/json"},body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){if(!e.ok)return Promise.reject("Ошибка: ".concat(e.status));console.log(e)}))}}])&&Ye(t.prototype,n),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-26",headers:{authorization:"3936a02f-bc3d-48a7-bceb-bcb201e7df53","Content-Type":"application/json"}}),ot=new Xe({profileNameSelector:".profile__name",profileBioSelector:".profile__bio",profileAvatarSelector:".profile__avatar"});rt.getUserData().then((function(e){var t={};t.name=e.name,t.bio=e.about,t.src=e.avatar,ot.setUserInfo(t)})).catch((function(e){console.log(e)}));var it=rt.getInitialCards(),at=new R({renderer:function(e){at.addItem(ut(e))}},".places");it.then((function(e){console.log(e),at.renderItems(e)})).catch((function(e){console.log(e)}));var lt=new Ee(".place-full-photo");lt.setEventListeners();var ct=new Ne(".profile-edit",(function(e){ot.setUserInfo(e),rt.saveUserData(e),ct.close()}));function ut(e){return new ee(e,".card-template",(function(e,t){lt.open(e,t)})).createCard()}ct.setEventListeners(),t.addEventListener("click",(function(){ct.open();var e=ot.getUserInfo();r.value=e.name,o.value=e.bio,ft.hideError()}));var st=new Ne(".place-add",(function(e){e.likes=[],e.owner._id="",at.addItem(ut(e)),rt.addNewCard(e),st.close()}));st.setEventListeners(),i.addEventListener("click",(function(){st.open(),a.reset(),pt.hideError()}));var ft=new M(e,n);ft.enableValidation();var pt=new M(e,a);pt.enableValidation()}();