!function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};e.d({},{Y:function(){return St}});var t={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},n=document.querySelector(".button_type_edit"),r=document.querySelector(".profile-edit__form"),o=r.querySelector("[name='name']"),i=r.querySelector("[name='bio']"),a=document.querySelector(".button_type_add"),l=document.querySelector(".place-add__form");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,f(e,t,"get"))}function s(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,f(e,t,"set"),n),n}function f(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}document.querySelector(".button_type_delete");var p=new WeakMap,h=new WeakMap,v=new WeakMap,d=new WeakMap,y=new WeakMap,w=new WeakMap,b=new WeakMap,m=new WeakMap,k=new WeakMap,g=new WeakMap,_=new WeakMap,E=new WeakMap,S=new WeakMap,O=new WeakMap,W=new WeakMap,M=function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p.set(this,{writable:!0,value:void 0}),h.set(this,{writable:!0,value:void 0}),v.set(this,{writable:!0,value:void 0}),d.set(this,{writable:!0,value:void 0}),y.set(this,{writable:!0,value:void 0}),w.set(this,{writable:!0,value:void 0}),b.set(this,{writable:!0,value:void 0}),m.set(this,{writable:!0,value:void 0}),k.set(this,{writable:!0,value:void 0}),g.set(this,{writable:!0,value:function(e){e.validity.valid?c(r,E).call(r,e):c(r,_).call(r,e,e.validationMessage)}}),_.set(this,{writable:!0,value:function(e,t){var n=c(r,b).querySelector(".".concat(e.id,"-error"));e.classList.add(c(r,y)),n.textContent=t,n.classList.add(c(r,w))}}),E.set(this,{writable:!0,value:function(e){var t=c(r,b).querySelector(".".concat(e.id,"-error"));e.classList.remove(c(r,y)),t.classList.remove(c(r,w)),t.textContent=""}}),u(this,"hideError",(function(){c(r,m).forEach((function(e){c(r,E).call(r,e),c(r,O).call(r)}))})),S.set(this,{writable:!0,value:function(){c(r,O).call(r),c(r,m).forEach((function(e){e.addEventListener("input",(function(){c(r,g).call(r,e),c(r,O).call(r)}))}))}}),O.set(this,{writable:!0,value:function(){c(r,W).call(r)?(c(r,k).classList.add(c(r,d)),c(r,k).setAttribute("disabled",!0)):(c(r,k).classList.remove(c(r,d)),c(r,k).removeAttribute("disabled"))}}),W.set(this,{writable:!0,value:function(){return c(r,m).some((function(e){return!e.validity.valid}))}}),u(this,"enableValidation",(function(){c(r,b).addEventListener("submit",(function(e){e.preventDefault(),c(r,O).call(r)})),c(r,S).call(r)})),s(this,p,t.formSelector),s(this,h,t.inputSelector),s(this,v,t.submitButtonSelector),s(this,d,t.inactiveButtonClass),s(this,y,t.inputErrorClass),s(this,w,t.errorClass),s(this,b,n),s(this,m,Array.from(c(this,b).querySelectorAll(c(this,h)))),s(this,k,c(this,b).querySelector(c(this,v)))};function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,P(e,t,"get"))}function j(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,P(e,t,"set"),n),n}function P(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var L=new WeakMap,q=new WeakMap,R=new WeakMap,x=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),L.set(this,{writable:!0,value:void 0}),q.set(this,{writable:!0,value:void 0}),R.set(this,{writable:!0,value:void 0}),j(this,q,r),j(this,R,document.querySelector(n))}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){T(t,q).call(t,e)}))}},{key:"addItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t?T(this,R).append(e):T(this,R).prepend(e)}}])&&C(t.prototype,n),e}();function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function B(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,A(e,t,"get"))}function U(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,A(e,t,"set"),n),n}function A(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var N=new WeakMap,H=new WeakMap,V=new WeakMap,F=new WeakMap,J=new WeakMap,z=new WeakMap,Y=new WeakMap,G=new WeakMap,K=new WeakMap,Q=new WeakMap,X=new WeakMap,Z=new WeakMap,$=new WeakSet,ee=new WeakSet,te=new WeakSet,ne=function(){function e(t){var n=t.data,r=t.templateSelector,o=t.handleCardClick,i=t.handleCardDelete;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),te.add(this),ee.add(this),$.add(this),N.set(this,{writable:!0,value:void 0}),H.set(this,{writable:!0,value:void 0}),V.set(this,{writable:!0,value:void 0}),F.set(this,{writable:!0,value:void 0}),J.set(this,{writable:!0,value:void 0}),z.set(this,{writable:!0,value:void 0}),Y.set(this,{writable:!0,value:void 0}),G.set(this,{writable:!0,value:void 0}),K.set(this,{writable:!0,value:void 0}),Q.set(this,{writable:!0,value:void 0}),X.set(this,{writable:!0,value:void 0}),Z.set(this,{writable:!0,value:void 0}),U(this,N,n.name),U(this,H,n.link),U(this,Q,n.owner._id),U(this,Z,n._id),n.likes.length?U(this,K,n.likes.length):U(this,K,0),U(this,V,r),U(this,G,o),U(this,X,i)}var t,n;return t=e,(n=[{key:"getCardId",value:function(){return B(this,Z)}},{key:"createCard",value:function(){return U(this,F,I(this,$,re).call(this)),U(this,Y,B(this,F).querySelector(".place__photo")),B(this,Y).src=B(this,H),B(this,Y).alt=B(this,N),B(this,F).querySelector(".place__title").innerText=B(this,N),U(this,J,B(this,F).querySelector(".place__delete")),U(this,z,B(this,F).querySelector(".place__like")),B(this,F).querySelector(".place__likes-count").textContent=B(this,K),B(this,Q)===St&&B(this,J).classList.remove("place__delete_active"),I(this,ee,oe).call(this),B(this,F)}},{key:"deleteCard",value:function(){B(this,F).remove()}}])&&D(t.prototype,n),e}();function re(){return document.querySelector(B(this,V)).content.querySelector(".place").cloneNode(!0)}function oe(){var e=this;B(this,J).addEventListener("click",(function(){B(e,X).call(e,e)})),B(this,z).addEventListener("click",(function(){I(e,te,ie).call(e)})),B(this,Y).addEventListener("click",(function(){B(e,G).call(e,B(e,N),B(e,H))}))}function ie(){B(this,z).classList.toggle("place__like_active")}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ue(e,t,"get"))}function ue(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ce=new WeakMap,se=new WeakMap,fe=function(){function e(t){var n,r,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ce.set(this,{writable:!0,value:void 0}),se.set(this,{writable:!0,value:function(e){"Escape"===e.key&&i.close()}}),n=this,r=ce,o=document.querySelector(t),function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(n,ue(n,r,"set"),o)}var t,n;return t=e,(n=[{key:"open",value:function(){le(this,ce).classList.add("popup_opened"),document.addEventListener("keydown",le(this,se))}},{key:"close",value:function(){le(this,ce).classList.remove("popup_opened"),document.removeEventListener("keydown",le(this,se))}},{key:"setEventListeners",value:function(){var e=this;le(this,ce).querySelector(".popup__close").addEventListener("click",(function(){e.close()})),le(this,ce).addEventListener("click",(function(t){t.target===t.currentTarget&&e.close()}))}}])&&ae(t.prototype,n),e}();function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t,n){return(ve="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=be(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ye(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?we(e):t}function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ge(e,t,"get"))}function ke(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ge(e,t,"set"),n),n}function ge(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var _e=new WeakMap,Ee=new WeakMap,Se=new WeakMap,Oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=be(r);if(o){var n=be(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ye(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),_e.set(we(t),{writable:!0,value:void 0}),Ee.set(we(t),{writable:!0,value:void 0}),Se.set(we(t),{writable:!0,value:void 0}),ke(we(t),_e,document.querySelector(e)),ke(we(t),Ee,me(we(t),_e).querySelector(".place-full-photo__image")),ke(we(t),Se,me(we(t),_e).querySelector(".place-full-photo__caption")),t}return t=a,(n=[{key:"open",value:function(e,t){me(this,Ee).src=t,me(this,Ee).alt=e,me(this,Se).textContent=e,ve(be(a.prototype),"open",this).call(this)}}])&&he(t.prototype,n),a}(fe);function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e,t,n){return(Ce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Le(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e,t){return!t||"object"!==We(t)&&"function"!=typeof t?Pe(e):t}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,xe(e,t,"get"))}function Re(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,xe(e,t,"set"),n),n}function xe(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var De=new WeakMap,Ie=new WeakMap,Be=new WeakMap,Ue=new WeakMap,Ae=new WeakMap,Ne=new WeakSet,He=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Le(r);if(o){var n=Le(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return je(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=i.call(this,e),Ne.add(Pe(n)),De.set(Pe(n),{writable:!0,value:void 0}),Ie.set(Pe(n),{writable:!0,value:void 0}),Be.set(Pe(n),{writable:!0,value:void 0}),Ue.set(Pe(n),{writable:!0,value:void 0}),Ae.set(Pe(n),{writable:!0,value:void 0}),Re(Pe(n),Ue,document.querySelector(e)),Re(Pe(n),De,t),Re(Pe(n),Ae,qe(Pe(n),Ue).querySelector(".form")),Re(Pe(n),Be,qe(Pe(n),Ue).querySelectorAll(".form__input")),n}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;qe(this,Ae).addEventListener("submit",(function(t){t.preventDefault(),qe(e,De).call(e,function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(e,Ne,Ve).call(e))})),Ce(Le(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){Ce(Le(a.prototype),"close",this).call(this),qe(this,Ae).reset()}}])&&Me(t.prototype,n),a}(fe);function Ve(){var e=this;return Re(this,Ie,{}),qe(this,Be).forEach((function(t){qe(e,Ie)[t.name]=t.value})),qe(this,Ie)}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ye(e,t,"get"))}function ze(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ye(e,t,"set"),n),n}function Ye(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Ge=new WeakMap,Ke=new WeakMap,Qe=new WeakMap,Xe=new WeakMap,Ze=new WeakMap,$e=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ge.set(this,{writable:!0,value:void 0}),Ke.set(this,{writable:!0,value:void 0}),Qe.set(this,{writable:!0,value:void 0}),Xe.set(this,{writable:!0,value:void 0}),Ze.set(this,{writable:!0,value:void 0}),ze(this,Ge,document.querySelector(t.profileNameSelector)),ze(this,Ke,document.querySelector(t.profileBioSelector)),ze(this,Qe,document.querySelector(t.profileAvatarSelector))}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:Je(this,Ge).textContent,bio:Je(this,Ke).textContent,avatar:Je(this,Xe),id:Je(this,Ze)}}},{key:"setUserInfo",value:function(e){Je(this,Ge).textContent=e.name,Je(this,Ke).textContent=e.bio}}])&&Fe(t.prototype,n),e}();function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,rt(e,t,"get"))}function nt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,rt(e,t,"set"),n),n}function rt(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ot=new WeakMap,it=new WeakMap,at=new WeakMap,lt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ot.set(this,{writable:!0,value:void 0}),it.set(this,{writable:!0,value:void 0}),at.set(this,{writable:!0,value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}}),nt(this,ot,t.baseUrl),nt(this,it,t.headers)}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return fetch(tt(this,ot)+"/cards",{headers:tt(this,it)}).then(tt(this,at))}},{key:"getUserData",value:function(){return fetch(tt(this,ot)+"/users/me",{headers:tt(this,it)}).then(tt(this,at))}},{key:"saveUserData",value:function(e){return fetch(tt(this,ot)+"/users/me",{method:"PATCH",headers:tt(this,it),body:JSON.stringify({name:e.name,about:e.bio})}).then(tt(this,at))}},{key:"addNewCard",value:function(e){return fetch(tt(this,ot)+"/cards",{method:"POST",headers:tt(this,it),body:JSON.stringify({name:e.name,link:e.link})}).then(tt(this,at))}},{key:"deleteCard",value:function(e){return fetch(tt(this,ot)+"/cards/".concat(e),{method:"DELETE",headers:tt(this,it)}).then(tt(this,at))}},{key:"likeCard",value:function(e){return fetch(tt(this,ot)+"/cards/likes/".concat(e),{method:"PUT",headers:tt(this,it)}).then(tt(this,at))}},{key:"dislikeCard",value:function(e){return fetch(tt(this,ot)+"/cards/likes/".concat(e),{method:"DELETE",headers:tt(this,it)}).then(tt(this,at))}}])&&et(t.prototype,n),e}();function ut(e){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function st(e,t,n){return(st="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pt(e,t){return!t||"object"!==ut(t)&&"function"!=typeof t?ht(e):t}function ht(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,wt(e,t,"get"))}function yt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,wt(e,t,"set"),n),n}function wt(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var bt=new WeakMap,mt=new WeakMap,kt=new WeakMap,gt=new WeakMap,_t=new WeakMap,Et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=vt(r);if(o){var n=vt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return pt(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),bt.set(ht(t),{writable:!0,value:void 0}),mt.set(ht(t),{writable:!0,value:void 0}),kt.set(ht(t),{writable:!0,value:void 0}),gt.set(ht(t),{writable:!0,value:void 0}),_t.set(ht(t),{writable:!0,value:void 0}),yt(ht(t),gt,document.querySelector(e)),yt(ht(t),_t,dt(ht(t),gt).querySelector(".form")),t}return t=a,(n=[{key:"setFormHandler",value:function(e){yt(this,bt,e)}},{key:"setEventListeners",value:function(){var e=this;dt(this,_t).addEventListener("submit",(function(t){t.preventDefault(),dt(e,bt).call(e)})),st(vt(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){st(vt(a.prototype),"close",this).call(this)}}])&&ct(t.prototype,n),a}(fe),St=null,Ot=new lt({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-27",headers:{authorization:"37580e29-ca43-4e60-bfc4-9731d6167691","Content-Type":"application/json"}});function Wt(e){return new ne({data:e,templateSelector:".card-template",handleCardClick:function(e,t){jt.open(e,t)},handleCardDelete:function(e){var t;t=e,qt.open(),qt.setFormHandler((function(){Ot.deleteCard(t.getCardId()).then((function(){t.deleteCard(),qt.close()}))}))}}).createCard()}var Mt=new $e({profileNameSelector:".profile__name",profileBioSelector:".profile__bio",profileAvatarSelector:".profile__avatar"});Ot.getUserData().then((function(e){St=e._id,Mt.setUserInfo({name:e.name,bio:e.about,avatar:e.avatar,id:e._id})})).catch((function(e){console.log(e)}));var Ct=Ot.getInitialCards(),Tt=new x({renderer:function(e){Tt.addItem(Wt(e))}},".places");Ct.then((function(e){Tt.renderItems(e)})).catch((function(e){console.log(e)}));var jt=new Oe(".place-full-photo");jt.setEventListeners();var Pt=new He(".profile-edit",(function(e){Mt.setUserInfo(e),Ot.saveUserData(e),Pt.close()}));Pt.setEventListeners(),n.addEventListener("click",(function(){Pt.open();var e=Mt.getUserInfo();o.value=e.name,i.value=e.bio,Rt.hideError()}));var Lt=new He(".place-add",(function(e){e.likes=[],e.owner={_id:St},Ot.addNewCard(e).then((function(t){e._id=t._id,Tt.addItem(Wt(e),!1)})).catch((function(e){console.log(e)})),Lt.close()}));Lt.setEventListeners(),a.addEventListener("click",(function(){Lt.open(),l.reset(),xt.hideError()}));var qt=new Et(".card-delete-confirmation");qt.setEventListeners();var Rt=new M(t,r);Rt.enableValidation();var xt=new M(t,l);xt.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFxQmhCLElBQU1iLEdBQWlCLElBQUl2QyxHVjdEVyxxQlU4RHRDdUMsR0FBZXFCLG9CQUVmLElBQU1DLEdBQWdCLElBQUk1RCxHVmxFVyxpQlVrRTBCLFNBQUN5QixHQUM5RHFCLEdBQVNHLFlBQVl4QixHQUNyQlUsR0FBSTBCLGFBQWFwQyxHQUNqQm1DLEdBQWNqRSxXQUdoQmlFLEdBQWNELG9CQUNkOUgsRUFBZXVCLGlCQUFpQixTQUFTLFdBQ3ZDd0csR0FBY3JCLE9BQ2QsSUFBTXVCLEVBQWNoQixHQUFTaUIsY0FDN0I5SCxFQUFVbUUsTUFBUTBELEVBQVlsRixLQUM5QjFDLEVBQVNrRSxNQUFRMEQsRUFBWXBELElBQzdCc0QsR0FBc0JDLGVBR3hCLElBQU1DLEdBQWdCLElBQUlsRSxHVmxGVyxjVWtGMEIsU0FBQ3lCLEdBQzlEQSxFQUFVekMsTUFBUSxHQUNsQnlDLEVBQVUzQyxNQUFRLENBQUVDLElBQUtNLElBQ3pCOEMsR0FDR2dDLFdBQVcxQyxHQUNYRCxNQUFLLFNBQUN3QixHQUNMdkIsRUFBVTFDLElBQU1pRSxFQUFPakUsSUFDdkJ5RSxHQUFVQyxRQUFRcEIsR0FBV1osSUFBWSxNQUUxQ3lCLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsTUFFaEJlLEdBQWN2RSxXQUdoQnVFLEdBQWNQLG9CQUNkeEgsRUFBZWlCLGlCQUFpQixTQUFTLFdBQ3ZDOEcsR0FBYzNCLE9BQ2RuRyxFQUFvQjhELFFBQ3BCa0UsR0FBc0JILGVBR3hCLElBQU12QixHQUFtQixJQUFJVCxHVnRHZSw2QlUwRzVDUyxHQUFpQmlCLG9CQUVqQixJQUFNSyxHQUF3QixJQUFJM0gsRUFDaENmLEVBQ0FVLEdBRUZnSSxHQUFzQkssbUJBRXRCLElBQU1ELEdBQXdCLElBQUkvSCxFQUNoQ2YsRUFDQWMsR0FFRmdJLEdBQXNCQyxtQiIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL21lc3RvL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9tZXN0by93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIGRlZmluaXRpb24pIHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiAn0JDRgNGF0YvQtycsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9hcmtoeXouanBnJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQp9C10LvRj9Cx0LjQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGcnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ9CY0LLQsNC90L7QstC+JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2l2YW5vdm8uanBnJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQmtCw0LzRh9Cw0YLQutCwJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2thbWNoYXRrYS5qcGcnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ9Cl0L7Qu9C80L7Qs9C+0YDRgdC60LjQuSDRgNCw0LnQvtC9JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGcnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ9CR0LDQudC60LDQuycsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9iYWlrYWwuanBnJyxcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6ICcuZm9ybScsXG4gIGlucHV0U2VsZWN0b3I6ICcuZm9ybV9faW5wdXQnLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5mb3JtX19zdWJtaXQnLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAnYnV0dG9uX2Rpc2FibGVkJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAnZm9ybV9faW5wdXRfdHlwZV9lcnJvcicsXG4gIGVycm9yQ2xhc3M6ICdmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmUnLFxufTtcblxuZXhwb3J0IGNvbnN0IGVkaXRJbmZvQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbl90eXBlX2VkaXQnKTtcbmV4cG9ydCBjb25zdCBlZGl0SW5mb0Zvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgJy5wcm9maWxlLWVkaXRfX2Zvcm0nXG4pO1xuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGVkaXRJbmZvRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIltuYW1lPSduYW1lJ11cIik7XG5leHBvcnQgY29uc3QgYmlvSW5wdXQgPSBlZGl0SW5mb0Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0nYmlvJ11cIik7XG5leHBvcnQgY29uc3QgYWRkUGxhY2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX3R5cGVfYWRkJyk7XG5leHBvcnQgY29uc3QgYWRkUGxhY2VGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZS1hZGRfX2Zvcm0nKTtcbmV4cG9ydCBjb25zdCBhZGRQbGFjZVBvcHVwU2VsZWN0b3IgPSAnLnBsYWNlLWFkZCc7XG5leHBvcnQgY29uc3QgZWRpdEluZm9Qb3B1cFNlbGVjdG9yID0gJy5wcm9maWxlLWVkaXQnO1xuZXhwb3J0IGNvbnN0IGNvbmZpcm1EZWxldGlvblBvcHVwU2VsZWN0b3IgPSAnLmNhcmQtZGVsZXRlLWNvbmZpcm1hdGlvbic7XG5leHBvcnQgY29uc3QgcG9wdXBGdWxsUGhvdG9TZWxlY3RvciA9ICcucGxhY2UtZnVsbC1waG90byc7XG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlU2VsZWN0b3IgPSAnLmNhcmQtdGVtcGxhdGUnO1xuZXhwb3J0IGNvbnN0IGNhcmRzQ29udGFpbmVyU2VsZWN0b3IgPSAnLnBsYWNlcyc7XG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWVTZWxlY3RvciA9ICcucHJvZmlsZV9fbmFtZSc7XG5leHBvcnQgY29uc3QgcHJvZmlsZUJpb1NlbGVjdG9yID0gJy5wcm9maWxlX19iaW8nO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXJTZWxlY3RvciA9ICcucHJvZmlsZV9fYXZhdGFyJztcbmV4cG9ydCBjb25zdCB1c2VyRGF0YVNlbGVjdG9ycyA9IHtcbiAgcHJvZmlsZU5hbWVTZWxlY3RvcixcbiAgcHJvZmlsZUJpb1NlbGVjdG9yLFxuICBwcm9maWxlQXZhdGFyU2VsZWN0b3IsXG59O1xuZXhwb3J0IGNvbnN0IGRlbGV0ZVBsYWNlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbl90eXBlX2RlbGV0ZScpO1xuZXhwb3J0IGNvbnN0IGRlbGV0ZVBsYWNlUG9wdXBTZWxlY3RvciA9ICcucGxhY2VfX2RlbGV0ZSc7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgI2Zvcm1TZWxlY3RvcjtcbiAgI2lucHV0U2VsZWN0b3I7XG4gICNzdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgI2luYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICNpbnB1dEVycm9yQ2xhc3M7XG4gICNlcnJvckNsYXNzO1xuICAjZm9ybUVsZW1lbnQ7XG4gICNpbnB1dExpc3Q7XG4gICNidXR0b247XG5cbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuI2Zvcm1TZWxlY3RvciA9IGNvbmZpZy5mb3JtU2VsZWN0b3I7XG4gICAgdGhpcy4jaW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuI3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuI2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLiNpbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuI2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcbiAgICB0aGlzLiNmb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuI2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLiNmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuI2lucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLiNidXR0b24gPSB0aGlzLiNmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuI3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gICNjaGVja0lucHV0VmFsaWRpdHkgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuI3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4jaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH07XG5cbiAgI3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSA9PiB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy4jZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy4jaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy4jZXJyb3JDbGFzcyk7XG4gIH07XG5cbiAgI2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuI2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuI2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy4jZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gIH07XG5cbiAgaGlkZUVycm9yID0gKCkgPT4ge1xuICAgIHRoaXMuI2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuI2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgICB0aGlzLiN0b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIH0pO1xuICB9O1xuXG4gICNzZXRGb3JtRXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgdGhpcy4jdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLiNpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuI2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLiN0b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgI3RvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLiNoYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy4jYnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy4jaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLiNidXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiNidXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLiNpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuI2J1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgfVxuICB9O1xuXG4gICNoYXNJbnZhbGlkSW5wdXQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuI2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9O1xuXG4gIGVuYWJsZVZhbGlkYXRpb24gPSAoKSA9PiB7XG4gICAgdGhpcy4jZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLiN0b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuI3NldEZvcm1FdmVudExpc3RlbmVycygpO1xuICB9O1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gICNyZW5kZXJlZEl0ZW1zO1xuICAjcmVuZGVyZXI7XG4gICNjb250YWluZXI7XG5cbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuI3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy4jY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcyhyZW5kZXJlZEl0ZW1zKSB7XG4gICAgcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLiNyZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCwgb3JkZXIgPSB0cnVlKSB7XG4gICAgaWYgKG9yZGVyKSB7XG4gICAgICB0aGlzLiNjb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiNjb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IG15VXNlcklkIH0gZnJvbSAnLi4vcGFnZXMvaW5kZXguanMnO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gICNuYW1lO1xuICAjbGluaztcbiAgI3RlbXBsYXRlU2VsZWN0b3I7XG4gICNjYXJkO1xuICAjZGVsZXRlQnV0dG9uO1xuICAjbGlrZUJ1dHRvbjtcbiAgI3BsYWNlUGhvdG87XG4gICNoYW5kbGVDYXJkQ2xpY2s7XG4gICNsaWtlc0NvdW50O1xuICAjb3duZXI7XG4gICNoYW5kbGVDYXJkRGVsZXRlO1xuICAjY2FyZElkO1xuXG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgdGVtcGxhdGVTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVDYXJkRGVsZXRlIH0pIHtcbiAgICB0aGlzLiNuYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuI2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy4jb3duZXIgPSBkYXRhLm93bmVyLl9pZDtcbiAgICB0aGlzLiNjYXJkSWQgPSBkYXRhLl9pZDtcbiAgICBpZiAoZGF0YS5saWtlcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuI2xpa2VzQ291bnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4jbGlrZXNDb3VudCA9IDA7XG4gICAgfVxuICAgIHRoaXMuI3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xuICAgIHRoaXMuI2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLiNoYW5kbGVDYXJkRGVsZXRlID0gaGFuZGxlQ2FyZERlbGV0ZTtcbiAgfVxuXG4gIGdldENhcmRJZCgpIHtcbiAgICByZXR1cm4gdGhpcy4jY2FyZElkO1xuICB9XG5cbiAgI2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuI3RlbXBsYXRlU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKCcucGxhY2UnKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBjcmVhdGVDYXJkKCkge1xuICAgIHRoaXMuI2NhcmQgPSB0aGlzLiNnZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuI3BsYWNlUGhvdG8gPSB0aGlzLiNjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZV9fcGhvdG8nKTtcbiAgICB0aGlzLiNwbGFjZVBob3RvLnNyYyA9IHRoaXMuI2xpbms7XG4gICAgdGhpcy4jcGxhY2VQaG90by5hbHQgPSB0aGlzLiNuYW1lO1xuICAgIHRoaXMuI2NhcmQucXVlcnlTZWxlY3RvcignLnBsYWNlX190aXRsZScpLmlubmVyVGV4dCA9IHRoaXMuI25hbWU7XG4gICAgdGhpcy4jZGVsZXRlQnV0dG9uID0gdGhpcy4jY2FyZC5xdWVyeVNlbGVjdG9yKCcucGxhY2VfX2RlbGV0ZScpO1xuICAgIHRoaXMuI2xpa2VCdXR0b24gPSB0aGlzLiNjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZV9fbGlrZScpO1xuICAgIHRoaXMuI2NhcmQucXVlcnlTZWxlY3RvcignLnBsYWNlX19saWtlcy1jb3VudCcpLnRleHRDb250ZW50ID1cbiAgICAgIHRoaXMuI2xpa2VzQ291bnQ7XG4gICAgaWYgKHRoaXMuI293bmVyID09PSBteVVzZXJJZCkge1xuICAgICAgdGhpcy4jZGVsZXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3BsYWNlX19kZWxldGVfYWN0aXZlJyk7XG4gICAgfVxuICAgIHRoaXMuI3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuI2NhcmQ7XG4gIH1cblxuICAjc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy4jZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy4jaGFuZGxlQ2FyZERlbGV0ZSh0aGlzKTtcbiAgICB9KTtcbiAgICB0aGlzLiNsaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy4jbGlrZUNhcmQoKTtcbiAgICB9KTtcbiAgICB0aGlzLiNwbGFjZVBob3RvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy4jaGFuZGxlQ2FyZENsaWNrKHRoaXMuI25hbWUsIHRoaXMuI2xpbmspO1xuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLiNjYXJkLnJlbW92ZSgpO1xuICB9XG5cbiAgI2xpa2VDYXJkKCkge1xuICAgIHRoaXMuI2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgncGxhY2VfX2xpa2VfYWN0aXZlJyk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgI3BvcHVwO1xuXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLiNwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuI3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLiNoYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLiNwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy4jaGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgI2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLiNwb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLiNwb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICAjcG9wdXA7XG4gICNmdWxsUGhvdG9JbWFnZTtcbiAgI2Z1bGxQaG90b0NhcHRpb247XG5cbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuI3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLiNmdWxsUGhvdG9JbWFnZSA9IHRoaXMuI3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAnLnBsYWNlLWZ1bGwtcGhvdG9fX2ltYWdlJ1xuICAgICk7XG4gICAgdGhpcy4jZnVsbFBob3RvQ2FwdGlvbiA9IHRoaXMuI3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAnLnBsYWNlLWZ1bGwtcGhvdG9fX2NhcHRpb24nXG4gICAgKTtcbiAgfVxuXG4gIG9wZW4obmFtZSwgbGluaykge1xuICAgIHRoaXMuI2Z1bGxQaG90b0ltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy4jZnVsbFBob3RvSW1hZ2UuYWx0ID0gbmFtZTtcbiAgICB0aGlzLiNmdWxsUGhvdG9DYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICAjaGFuZGxlRm9ybVN1Ym1pdDtcbiAgI2Zvcm1WYWx1ZXM7XG4gICNpbnB1dExpc3Q7XG4gICNwb3B1cDtcbiAgI2Zvcm07XG5cbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuI3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLiNoYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLiNmb3JtID0gdGhpcy4jcG9wdXAucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xuICAgIHRoaXMuI2lucHV0TGlzdCA9IHRoaXMuI3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIik7XG4gIH1cblxuICAjZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy4jZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuI2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy4jZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLiNmb3JtVmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy4jZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy4jaGFuZGxlRm9ybVN1Ym1pdCh0aGlzLiNnZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLiNmb3JtLnJlc2V0KCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgI3Byb2ZpbGVOYW1lO1xuICAjcHJvZmlsZUJpbztcbiAgI3Byb2ZpbGVBdmF0YXI7XG4gICNhdmF0YXI7XG4gICNpZDtcblxuICBjb25zdHJ1Y3Rvcih1c2VyRGF0YVNlbGVjdG9ycykge1xuICAgIHRoaXMuI3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHVzZXJEYXRhU2VsZWN0b3JzLnByb2ZpbGVOYW1lU2VsZWN0b3JcbiAgICApO1xuICAgIHRoaXMuI3Byb2ZpbGVCaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdXNlckRhdGFTZWxlY3RvcnMucHJvZmlsZUJpb1NlbGVjdG9yXG4gICAgKTtcbiAgICB0aGlzLiNwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHVzZXJEYXRhU2VsZWN0b3JzLnByb2ZpbGVBdmF0YXJTZWxlY3RvclxuICAgICk7XG4gICAgLy8gdGhpcy4jYXZhdGFyID1cbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLiNwcm9maWxlTmFtZS50ZXh0Q29udGVudCxcbiAgICAgIGJpbzogdGhpcy4jcHJvZmlsZUJpby50ZXh0Q29udGVudCxcbiAgICAgIGF2YXRhcjogdGhpcy4jYXZhdGFyLFxuICAgICAgaWQ6IHRoaXMuI2lkLFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyhuZXdVc2VyRGF0YSkge1xuICAgIHRoaXMuI3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmV3VXNlckRhdGEubmFtZTtcbiAgICB0aGlzLiNwcm9maWxlQmlvLnRleHRDb250ZW50ID0gbmV3VXNlckRhdGEuYmlvO1xuICAgIC8vIHRoaXMuI3Byb2ZpbGVBdmF0YXIuc3JjID0gbmV3VXNlckRhdGEuYXZhdGFyO1xuICAgIC8vIHRoaXMuI2lkID0gbmV3VXNlckRhdGEuaWQ7XG4gICAgLy8gY29uc29sZS5sb2cobmV3VXNlckRhdGEuaWQpO1xuICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuI2lkKTtcbiAgfVxufVxuIiwiLy8gaW1wb3J0IHsgbmFtZUlucHV0LCBiaW9JbnB1dCB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gICNiYXNlVXJsO1xuICAjaGVhZGVycztcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy4jYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcbiAgICB0aGlzLiNoZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuICB9XG5cbiAgI2hhbmRsZVJlc3BvbnNlID0gKHJlc3BvbnNlKSA9PiB7XG4gICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgfVxuICB9O1xuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy4jYmFzZVVybCArICcvY2FyZHMnLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLiNoZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy4jaGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgZ2V0VXNlckRhdGEoKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuI2Jhc2VVcmwgKyAnL3VzZXJzL21lJywge1xuICAgICAgaGVhZGVyczogdGhpcy4jaGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuI2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIHNhdmVVc2VyRGF0YShpbnB1dERhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy4jYmFzZVVybCArICcvdXNlcnMvbWUnLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLiNoZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBpbnB1dERhdGEubmFtZSxcbiAgICAgICAgYWJvdXQ6IGlucHV0RGF0YS5iaW8sXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuI2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIGFkZE5ld0NhcmQoY2FyZERhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy4jYmFzZVVybCArICcvY2FyZHMnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuI2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGNhcmREYXRhLm5hbWUsXG4gICAgICAgIGxpbms6IGNhcmREYXRhLmxpbmssXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuI2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuI2Jhc2VVcmwgKyBgL2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLiNoZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy4jaGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgbGlrZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuI2Jhc2VVcmwgKyBgL2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLiNoZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy4jaGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgZGlzbGlrZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuI2Jhc2VVcmwgKyBgL2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLiNoZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy4jaGFuZGxlUmVzcG9uc2UpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcbiAgI2hhbmRsZUZvcm1TdWJtaXQ7XG4gICNmb3JtVmFsdWVzO1xuICAjaW5wdXRMaXN0O1xuICAjcG9wdXA7XG4gICNmb3JtO1xuXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLiNwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy4jZm9ybSA9IHRoaXMuI3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XG4gIH1cblxuICBzZXRGb3JtSGFuZGxlcihoYW5kbGVyKSB7XG4gICAgdGhpcy4jaGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZXI7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLiNmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy4jaGFuZGxlRm9ybVN1Ym1pdCgpO1xuICAgIH0pO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG59XG4iLCJpbXBvcnQgJy4vaW5kZXguY3NzJztcblxuaW1wb3J0IHtcbiAgdmFsaWRhdGlvbkNvbmZpZyxcbiAgZWRpdEluZm9CdXR0b24sXG4gIGFkZFBsYWNlQnV0dG9uLFxuICBhZGRQbGFjZUZvcm1FbGVtZW50LFxuICBhZGRQbGFjZVBvcHVwU2VsZWN0b3IsXG4gIGNhcmRUZW1wbGF0ZVNlbGVjdG9yLFxuICBjYXJkc0NvbnRhaW5lclNlbGVjdG9yLFxuICBlZGl0SW5mb0Zvcm1FbGVtZW50LFxuICBlZGl0SW5mb1BvcHVwU2VsZWN0b3IsXG4gIHBvcHVwRnVsbFBob3RvU2VsZWN0b3IsXG4gIGJpb0lucHV0LFxuICBuYW1lSW5wdXQsXG4gIHVzZXJEYXRhU2VsZWN0b3JzLFxuICBwcm9maWxlQXZhdGFyU2VsZWN0b3IsXG4gIGNvbmZpcm1EZWxldGlvblBvcHVwU2VsZWN0b3IsXG4gIGRlbGV0ZVBsYWNlQnV0dG9uLFxuICBkZWxldGVQbGFjZVBvcHVwU2VsZWN0b3IsXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5cbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMnO1xuXG5leHBvcnQgbGV0IG15VXNlcklkID0gbnVsbDtcbi8vIGxldCBjYXJkSWQgPSBudWxsO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMjcnLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogJzM3NTgwZTI5LWNhNDMtNGU2MC1iZmM0LTk3MzFkNjE2NzY5MScsXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgfSxcbn0pO1xuXG4vLz8gUHJvbWlzZS5hbGw7XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoe1xuICAgIGRhdGE6IGl0ZW0sXG4gICAgdGVtcGxhdGVTZWxlY3RvcjogY2FyZFRlbXBsYXRlU2VsZWN0b3IsXG4gICAgaGFuZGxlQ2FyZENsaWNrOiAobmFtZSwgbGluaykgPT4ge1xuICAgICAgcG9wdXBGdWxsUGhvdG8ub3BlbihuYW1lLCBsaW5rKTtcbiAgICB9LFxuICAgIGhhbmRsZUNhcmREZWxldGU6IChjYXJkSW5zdGFuY2UpID0+IHtcbiAgICAgIGRlbGV0ZUNhcmQoY2FyZEluc3RhbmNlKTtcbiAgICB9LFxuICB9KTtcbiAgcmV0dXJuIGNhcmQuY3JlYXRlQ2FyZCgpO1xufVxuXG5mdW5jdGlvbiBkZWxldGVDYXJkKGNhcmQpIHtcbiAgcG9wdXBEZWxldGVQbGFjZS5vcGVuKCk7XG4gIHBvcHVwRGVsZXRlUGxhY2Uuc2V0Rm9ybUhhbmRsZXIoKCkgPT4ge1xuICAgIGFwaS5kZWxldGVDYXJkKGNhcmQuZ2V0Q2FyZElkKCkpLnRoZW4oKCkgPT4ge1xuICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XG4gICAgICBwb3B1cERlbGV0ZVBsYWNlLmNsb3NlKCk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh1c2VyRGF0YVNlbGVjdG9ycyk7XG5nZXRVc2VyRGF0YUZyb21TZXJ2ZXIoKTtcblxuY29uc3QgY2FyZHNQcm9taXNlID0gYXBpLmdldEluaXRpYWxDYXJkcygpO1xuXG5jb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY2FyZHNMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChpdGVtKSk7XG4gICAgfSxcbiAgfSxcbiAgY2FyZHNDb250YWluZXJTZWxlY3RvclxuKTtcblxuY2FyZHNQcm9taXNlXG4gIC50aGVuKChkYXRhKSA9PiB7XG4gICAgY2FyZHNMaXN0LnJlbmRlckl0ZW1zKGRhdGEpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycik7XG4gIH0pO1xuXG5mdW5jdGlvbiBnZXRVc2VyRGF0YUZyb21TZXJ2ZXIoKSB7XG4gIGNvbnN0IHByb2ZpbGVEYXRhUHJvbWlzZSA9IGFwaS5nZXRVc2VyRGF0YSgpO1xuICBwcm9maWxlRGF0YVByb21pc2VcbiAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICBteVVzZXJJZCA9IHJlc3VsdC5faWQ7XG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICAgIG5hbWU6IHJlc3VsdC5uYW1lLFxuICAgICAgICBiaW86IHJlc3VsdC5hYm91dCxcbiAgICAgICAgYXZhdGFyOiByZXN1bHQuYXZhdGFyLFxuICAgICAgICBpZDogcmVzdWx0Ll9pZCxcbiAgICAgIH0pO1xuICAgICAgLy8gZWRpdEluZm9Gb3JtVmFsaWRhdG9yLmhpZGVFcnJvcigpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG59XG5cbmNvbnN0IHBvcHVwRnVsbFBob3RvID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwRnVsbFBob3RvU2VsZWN0b3IpO1xucG9wdXBGdWxsUGhvdG8uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcG9wdXBFZGl0SW5mbyA9IG5ldyBQb3B1cFdpdGhGb3JtKGVkaXRJbmZvUG9wdXBTZWxlY3RvciwgKGlucHV0RGF0YSkgPT4ge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyhpbnB1dERhdGEpO1xuICBhcGkuc2F2ZVVzZXJEYXRhKGlucHV0RGF0YSk7XG4gIHBvcHVwRWRpdEluZm8uY2xvc2UoKTtcbn0pO1xuXG5wb3B1cEVkaXRJbmZvLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5lZGl0SW5mb0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgcG9wdXBFZGl0SW5mby5vcGVuKCk7XG4gIGNvbnN0IHByb2ZpbGVEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgbmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZURhdGEubmFtZTtcbiAgYmlvSW5wdXQudmFsdWUgPSBwcm9maWxlRGF0YS5iaW87XG4gIGVkaXRJbmZvRm9ybVZhbGlkYXRvci5oaWRlRXJyb3IoKTtcbn0pO1xuXG5jb25zdCBwb3B1cEFkZFBsYWNlID0gbmV3IFBvcHVwV2l0aEZvcm0oYWRkUGxhY2VQb3B1cFNlbGVjdG9yLCAoaW5wdXREYXRhKSA9PiB7XG4gIGlucHV0RGF0YS5saWtlcyA9IFtdO1xuICBpbnB1dERhdGEub3duZXIgPSB7IF9pZDogbXlVc2VySWQgfTtcbiAgYXBpXG4gICAgLmFkZE5ld0NhcmQoaW5wdXREYXRhKVxuICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIGlucHV0RGF0YS5faWQgPSByZXN1bHQuX2lkO1xuICAgICAgY2FyZHNMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChpbnB1dERhdGEpLCBmYWxzZSk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbiAgcG9wdXBBZGRQbGFjZS5jbG9zZSgpO1xufSk7XG5cbnBvcHVwQWRkUGxhY2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmFkZFBsYWNlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBwb3B1cEFkZFBsYWNlLm9wZW4oKTtcbiAgYWRkUGxhY2VGb3JtRWxlbWVudC5yZXNldCgpO1xuICBhZGRQbGFjZUZvcm1WYWxpZGF0b3IuaGlkZUVycm9yKCk7XG59KTtcblxuY29uc3QgcG9wdXBEZWxldGVQbGFjZSA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXG4gIGNvbmZpcm1EZWxldGlvblBvcHVwU2VsZWN0b3Jcbik7XG5cbnBvcHVwRGVsZXRlUGxhY2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgZWRpdEluZm9Gb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRpb25Db25maWcsXG4gIGVkaXRJbmZvRm9ybUVsZW1lbnRcbik7XG5lZGl0SW5mb0Zvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBhZGRQbGFjZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvbkNvbmZpZyxcbiAgYWRkUGxhY2VGb3JtRWxlbWVudFxuKTtcbmFkZFBsYWNlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJlZGl0SW5mb0J1dHRvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImVkaXRJbmZvRm9ybUVsZW1lbnQiLCJuYW1lSW5wdXQiLCJiaW9JbnB1dCIsImFkZFBsYWNlQnV0dG9uIiwiYWRkUGxhY2VGb3JtRWxlbWVudCIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJyZW1vdmUiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInNvbWUiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInRoaXMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJyZW5kZXJlZEl0ZW1zIiwiaXRlbSIsImVsZW1lbnQiLCJvcmRlciIsImFwcGVuZCIsInByZXBlbmQiLCJDYXJkIiwiZGF0YSIsInRlbXBsYXRlU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVDYXJkRGVsZXRlIiwibmFtZSIsImxpbmsiLCJvd25lciIsIl9pZCIsImxpa2VzIiwibGVuZ3RoIiwic3JjIiwiYWx0IiwiaW5uZXJUZXh0IiwibXlVc2VySWQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwidG9nZ2xlIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIlBvcHVwV2l0aEltYWdlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJyZXNldCIsImlucHV0IiwidmFsdWUiLCJVc2VySW5mbyIsInVzZXJEYXRhU2VsZWN0b3JzIiwicHJvZmlsZU5hbWVTZWxlY3RvciIsInByb2ZpbGVCaW9TZWxlY3RvciIsInByb2ZpbGVBdmF0YXJTZWxlY3RvciIsImJpbyIsImF2YXRhciIsIm5ld1VzZXJEYXRhIiwiQXBpIiwib3B0aW9ucyIsInJlc3BvbnNlIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImJhc2VVcmwiLCJoZWFkZXJzIiwiZmV0Y2giLCJ0aGVuIiwiaW5wdXREYXRhIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsImNhcmREYXRhIiwiY2FyZElkIiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiaGFuZGxlciIsImFwaSIsImF1dGhvcml6YXRpb24iLCJjcmVhdGVDYXJkIiwicG9wdXBGdWxsUGhvdG8iLCJvcGVuIiwiY2FyZEluc3RhbmNlIiwiY2FyZCIsInBvcHVwRGVsZXRlUGxhY2UiLCJzZXRGb3JtSGFuZGxlciIsImRlbGV0ZUNhcmQiLCJnZXRDYXJkSWQiLCJ1c2VySW5mbyIsImdldFVzZXJEYXRhIiwicmVzdWx0Iiwic2V0VXNlckluZm8iLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJjYXJkc1Byb21pc2UiLCJnZXRJbml0aWFsQ2FyZHMiLCJjYXJkc0xpc3QiLCJhZGRJdGVtIiwicmVuZGVySXRlbXMiLCJzZXRFdmVudExpc3RlbmVycyIsInBvcHVwRWRpdEluZm8iLCJzYXZlVXNlckRhdGEiLCJwcm9maWxlRGF0YSIsImdldFVzZXJJbmZvIiwiZWRpdEluZm9Gb3JtVmFsaWRhdG9yIiwiaGlkZUVycm9yIiwicG9wdXBBZGRQbGFjZSIsImFkZE5ld0NhcmQiLCJhZGRQbGFjZUZvcm1WYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==