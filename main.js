!function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};e.d({},{Y:function(){return Lt}});var t={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},n=document.querySelector(".button_type_edit"),r=document.querySelector(".profile-edit__form"),o=r.querySelector("[name='name']"),i=r.querySelector("[name='bio']"),a=document.querySelector(".button_type_add"),l=document.querySelector(".place-add__form"),c=(document.querySelector(".button_type_delete"),document.querySelector(".profile__avatar")),u=document.querySelector(".avatar-update__form");function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,h(e,t,"get"))}function p(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,h(e,t,"set"),n),n}function h(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var v=new WeakMap,d=new WeakMap,y=new WeakMap,w=new WeakMap,b=new WeakMap,m=new WeakMap,k=new WeakMap,g=new WeakMap,_=new WeakMap,E=new WeakMap,S=new WeakMap,W=new WeakMap,M=new WeakMap,O=new WeakMap,C=new WeakMap,L=function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v.set(this,{writable:!0,value:void 0}),d.set(this,{writable:!0,value:void 0}),y.set(this,{writable:!0,value:void 0}),w.set(this,{writable:!0,value:void 0}),b.set(this,{writable:!0,value:void 0}),m.set(this,{writable:!0,value:void 0}),k.set(this,{writable:!0,value:void 0}),g.set(this,{writable:!0,value:void 0}),_.set(this,{writable:!0,value:void 0}),E.set(this,{writable:!0,value:function(e){e.validity.valid?f(r,W).call(r,e):f(r,S).call(r,e,e.validationMessage)}}),S.set(this,{writable:!0,value:function(e,t){var n=f(r,k).querySelector(".".concat(e.id,"-error"));e.classList.add(f(r,b)),n.textContent=t,n.classList.add(f(r,m))}}),W.set(this,{writable:!0,value:function(e){var t=f(r,k).querySelector(".".concat(e.id,"-error"));e.classList.remove(f(r,b)),t.classList.remove(f(r,m)),t.textContent=""}}),s(this,"hideError",(function(){f(r,g).forEach((function(e){f(r,W).call(r,e),f(r,O).call(r)}))})),M.set(this,{writable:!0,value:function(){f(r,O).call(r),f(r,g).forEach((function(e){e.addEventListener("input",(function(){f(r,E).call(r,e),f(r,O).call(r)}))}))}}),O.set(this,{writable:!0,value:function(){f(r,C).call(r)?(f(r,_).classList.add(f(r,w)),f(r,_).setAttribute("disabled",!0)):(f(r,_).classList.remove(f(r,w)),f(r,_).removeAttribute("disabled"))}}),C.set(this,{writable:!0,value:function(){return f(r,g).some((function(e){return!e.validity.valid}))}}),s(this,"enableValidation",(function(){f(r,k).addEventListener("submit",(function(e){e.preventDefault(),f(r,O).call(r)})),f(r,M).call(r)})),p(this,v,t.formSelector),p(this,d,t.inputSelector),p(this,y,t.submitButtonSelector),p(this,w,t.inactiveButtonClass),p(this,b,t.inputErrorClass),p(this,m,t.errorClass),p(this,k,n),p(this,g,Array.from(f(this,k).querySelectorAll(f(this,d)))),p(this,_,f(this,k).querySelector(f(this,y)))};function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,q(e,t,"get"))}function P(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,q(e,t,"set"),n),n}function q(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var R=new WeakMap,I=new WeakMap,x=new WeakMap,A=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),R.set(this,{writable:!0,value:void 0}),I.set(this,{writable:!0,value:void 0}),x.set(this,{writable:!0,value:void 0}),P(this,I,r),P(this,x,document.querySelector(n))}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){j(t,I).call(t,e)}))}},{key:"addItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t?j(this,x).append(e):j(this,x).prepend(e)}}])&&T(t.prototype,n),e}();function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function U(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,H(e,t,"get"))}function N(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,H(e,t,"set"),n),n}function H(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var V=new WeakMap,J=new WeakMap,F=new WeakMap,z=new WeakMap,Y=new WeakMap,G=new WeakMap,K=new WeakMap,Q=new WeakMap,X=new WeakMap,Z=new WeakMap,$=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap,re=new WeakMap,oe=new WeakMap,ie=new WeakSet,ae=new WeakSet,le=new WeakSet,ce=function(){function e(t){var n=t.data,r=t.templateSelector,o=t.handleCardClick,i=t.handleCardDelete,a=t.handleCardLike;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),le.add(this),ae.add(this),ie.add(this),V.set(this,{writable:!0,value:void 0}),J.set(this,{writable:!0,value:void 0}),F.set(this,{writable:!0,value:void 0}),z.set(this,{writable:!0,value:void 0}),Y.set(this,{writable:!0,value:void 0}),G.set(this,{writable:!0,value:void 0}),K.set(this,{writable:!0,value:void 0}),Q.set(this,{writable:!0,value:void 0}),X.set(this,{writable:!0,value:void 0}),Z.set(this,{writable:!0,value:void 0}),$.set(this,{writable:!0,value:void 0}),ee.set(this,{writable:!0,value:void 0}),te.set(this,{writable:!0,value:void 0}),ne.set(this,{writable:!0,value:void 0}),re.set(this,{writable:!0,value:void 0}),oe.set(this,{writable:!0,value:void 0}),N(this,V,n.name),N(this,J,n.link),N(this,Z,n.owner._id),N(this,ee,n._id),N(this,te,n.likes),N(this,X,n.likes.length),N(this,F,r),N(this,Q,o),N(this,$,i),N(this,ne,a),N(this,oe,n)}var t,n;return t=e,(n=[{key:"getCardId",value:function(){return U(this,ee)}},{key:"isLiked",value:function(){return console.log(U(this,te)),U(this,re)}},{key:"setLike",value:function(e){U(this,z).querySelector(".place__likes-count").textContent=e.likes.length,N(this,re,e.likes.some((function(e){return e._id===Lt}))),console.log(e.likes.length),U(this,re)?U(this,G).classList.add("place__like_active"):U(this,G).classList.remove("place__like_active")}},{key:"createCard",value:function(){return N(this,z,B(this,ie,ue).call(this)),N(this,K,U(this,z).querySelector(".place__photo")),U(this,K).src=U(this,J),U(this,K).alt=U(this,V),U(this,z).querySelector(".place__title").innerText=U(this,V),N(this,Y,U(this,z).querySelector(".place__delete")),N(this,G,U(this,z).querySelector(".place__like")),this.setLike(U(this,oe)),U(this,Z)===Lt&&U(this,Y).classList.remove("place__delete_active"),B(this,ae,se).call(this),U(this,z)}},{key:"deleteCard",value:function(){U(this,z).remove()}}])&&D(t.prototype,n),e}();function ue(){return document.querySelector(U(this,F)).content.querySelector(".place").cloneNode(!0)}function se(){var e=this;U(this,Y).addEventListener("click",(function(){U(e,$).call(e,e)})),U(this,G).addEventListener("click",(function(){U(e,ne).call(e,e)})),U(this,K).addEventListener("click",(function(){U(e,Q).call(e,U(e,V),U(e,J))}))}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,he(e,t,"get"))}function he(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ve=new WeakMap,de=new WeakMap,ye=function(){function e(t){var n,r,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ve.set(this,{writable:!0,value:void 0}),de.set(this,{writable:!0,value:function(e){"Escape"===e.key&&i.close()}}),n=this,r=ve,o=document.querySelector(t),function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(n,he(n,r,"set"),o)}var t,n;return t=e,(n=[{key:"open",value:function(){pe(this,ve).classList.add("popup_opened"),document.addEventListener("keydown",pe(this,de))}},{key:"close",value:function(){pe(this,ve).classList.remove("popup_opened"),document.removeEventListener("keydown",pe(this,de))}},{key:"setEventListeners",value:function(){var e=this;pe(this,ve).querySelector(".popup__close").addEventListener("click",(function(){e.close()})),pe(this,ve).addEventListener("click",(function(t){t.target===t.currentTarget&&e.close()}))}}])&&fe(t.prototype,n),e}();function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t,n){return(me="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ee(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ge(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?_e(e):t}function _e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Me(e,t,"get"))}function We(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Me(e,t,"set"),n),n}function Me(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Oe=new WeakMap,Ce=new WeakMap,Le=new WeakMap,Te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ee(r);if(o){var n=Ee(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ge(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),Oe.set(_e(t),{writable:!0,value:void 0}),Ce.set(_e(t),{writable:!0,value:void 0}),Le.set(_e(t),{writable:!0,value:void 0}),We(_e(t),Oe,document.querySelector(e)),We(_e(t),Ce,Se(_e(t),Oe).querySelector(".place-full-photo__image")),We(_e(t),Le,Se(_e(t),Oe).querySelector(".place-full-photo__caption")),t}return t=a,(n=[{key:"open",value:function(e,t){Se(this,Ce).src=t,Se(this,Ce).alt=e,Se(this,Le).textContent=e,me(Ee(a.prototype),"open",this).call(this)}}])&&be(t.prototype,n),a}(ye);function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t,n){return(qe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ae(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?xe(e):t}function xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ue(e,t,"get"))}function Be(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ue(e,t,"set"),n),n}function Ue(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Ne=new WeakMap,He=new WeakMap,Ve=new WeakMap,Je=new WeakMap,Fe=new WeakMap,ze=new WeakSet,Ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ae(r);if(o){var n=Ae(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ie(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=i.call(this,e),ze.add(xe(n)),Ne.set(xe(n),{writable:!0,value:void 0}),He.set(xe(n),{writable:!0,value:void 0}),Ve.set(xe(n),{writable:!0,value:void 0}),Je.set(xe(n),{writable:!0,value:void 0}),Fe.set(xe(n),{writable:!0,value:void 0}),Be(xe(n),Je,document.querySelector(e)),Be(xe(n),Ne,t),Be(xe(n),Fe,De(xe(n),Je).querySelector(".form")),Be(xe(n),Ve,De(xe(n),Je).querySelectorAll(".form__input")),n}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;De(this,Fe).addEventListener("submit",(function(t){t.preventDefault(),De(e,Ne).call(e,function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(e,ze,Ge).call(e))})),qe(Ae(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){qe(Ae(a.prototype),"close",this).call(this),De(this,Fe).reset()}}])&&Pe(t.prototype,n),a}(ye);function Ge(){var e=this;return Be(this,He,{}),De(this,Ve).forEach((function(t){De(e,He)[t.name]=t.value})),De(this,He)}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ze(e,t,"get"))}function Xe(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ze(e,t,"set"),n),n}function Ze(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var $e=new WeakMap,et=new WeakMap,tt=new WeakMap,nt=new WeakMap,rt=new WeakMap,ot=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$e.set(this,{writable:!0,value:void 0}),et.set(this,{writable:!0,value:void 0}),tt.set(this,{writable:!0,value:void 0}),nt.set(this,{writable:!0,value:void 0}),rt.set(this,{writable:!0,value:void 0}),Xe(this,$e,document.querySelector(t.profileNameSelector)),Xe(this,et,document.querySelector(t.profileBioSelector)),Xe(this,tt,document.querySelector(t.profileAvatarSelector))}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:Qe(this,$e).textContent,bio:Qe(this,et).textContent,avatar:Qe(this,tt).style.backgroundImage}}},{key:"setUserInfo",value:function(e){Qe(this,$e).textContent=e.name,Qe(this,et).textContent=e.bio,console.log(e.avatar)}},{key:"setAvatar",value:function(e){Qe(this,tt).style.backgroundImage="url("+"".concat(e.avatar)+")",console.log(e.avatar)}}])&&Ke(t.prototype,n),e}();function it(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function at(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ct(e,t,"get"))}function lt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ct(e,t,"set"),n),n}function ct(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ut=new WeakMap,st=new WeakMap,ft=new WeakMap,pt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ut.set(this,{writable:!0,value:void 0}),st.set(this,{writable:!0,value:void 0}),ft.set(this,{writable:!0,value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}}),lt(this,ut,t.baseUrl),lt(this,st,t.headers)}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return fetch(at(this,ut)+"/cards",{headers:at(this,st)}).then(at(this,ft))}},{key:"getUserData",value:function(){return fetch(at(this,ut)+"/users/me",{headers:at(this,st)}).then(at(this,ft))}},{key:"saveUserData",value:function(e){return fetch(at(this,ut)+"/users/me",{method:"PATCH",headers:at(this,st),body:JSON.stringify({name:e.name,about:e.bio})}).then(at(this,ft))}},{key:"addNewCard",value:function(e){return fetch(at(this,ut)+"/cards",{method:"POST",headers:at(this,st),body:JSON.stringify({name:e.name,link:e.link})}).then(at(this,ft))}},{key:"deleteCard",value:function(e){return fetch(at(this,ut)+"/cards/".concat(e),{method:"DELETE",headers:at(this,st)}).then(at(this,ft))}},{key:"likeCard",value:function(e){return fetch(at(this,ut)+"/cards/likes/".concat(e),{method:"PUT",headers:at(this,st)}).then(at(this,ft))}},{key:"dislikeCard",value:function(e){return fetch(at(this,ut)+"/cards/likes/".concat(e),{method:"DELETE",headers:at(this,st)}).then(at(this,ft))}},{key:"updateAvatar",value:function(e){return console.log(e),fetch(at(this,ut)+"/users/me/avatar",{method:"PATCH",headers:at(this,st),body:JSON.stringify(e)}).then(at(this,ft))}}])&&it(t.prototype,n),e}();function ht(e){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dt(e,t,n){return(dt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wt(e,t){return!t||"object"!==ht(t)&&"function"!=typeof t?bt(e):t}function bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mt(e){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,_t(e,t,"get"))}function gt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,_t(e,t,"set"),n),n}function _t(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Et=new WeakMap,St=new WeakMap,Wt=new WeakMap,Mt=new WeakMap,Ot=new WeakMap,Ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=mt(r);if(o){var n=mt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return wt(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),Et.set(bt(t),{writable:!0,value:void 0}),St.set(bt(t),{writable:!0,value:void 0}),Wt.set(bt(t),{writable:!0,value:void 0}),Mt.set(bt(t),{writable:!0,value:void 0}),Ot.set(bt(t),{writable:!0,value:void 0}),gt(bt(t),Mt,document.querySelector(e)),gt(bt(t),Ot,kt(bt(t),Mt).querySelector(".form")),t}return t=a,(n=[{key:"setFormHandler",value:function(e){gt(this,Et,e)}},{key:"setEventListeners",value:function(){var e=this;kt(this,Ot).addEventListener("submit",(function(t){t.preventDefault(),kt(e,Et).call(e)})),dt(mt(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){dt(mt(a.prototype),"close",this).call(this)}}])&&vt(t.prototype,n),a}(ye),Lt=null,Tt=new pt({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-27",headers:{authorization:"37580e29-ca43-4e60-bfc4-9731d6167691","Content-Type":"application/json"}});function jt(e){return new ce({data:e,templateSelector:".card-template",handleCardClick:function(e,t){It.open(e,t)},handleCardDelete:function(e){var t;t=e,Bt.open(),Bt.setFormHandler((function(){Tt.deleteCard(t.getCardId()).then((function(){t.deleteCard(),Bt.close()}))}))},handleCardLike:function(e){var t;t=e,console.log(t.isLiked()),(t.isLiked()?Tt.dislikeCard(t.getCardId()):Tt.likeCard(t.getCardId())).then((function(e){t.setLike(e)})).catch((function(e){return console.log(e)}))}}).createCard()}var Pt=new ot({profileNameSelector:".profile__name",profileBioSelector:".profile__bio",profileAvatarSelector:".profile__avatar"});Tt.getUserData().then((function(e){Lt=e._id,console.log(e),Pt.setUserInfo({name:e.name,bio:e.about,id:e._id}),Pt.setAvatar(e)})).catch((function(e){console.log(e)}));var qt=Tt.getInitialCards(),Rt=new A({renderer:function(e){Rt.addItem(jt(e))}},".places");qt.then((function(e){Rt.renderItems(e),console.log(e)})).catch((function(e){console.log(e)}));var It=new Te(".place-full-photo");It.setEventListeners();var xt=new Ye(".profile-edit",(function(e){Pt.setUserInfo(e),Tt.saveUserData(e),xt.close()}));xt.setEventListeners(),n.addEventListener("click",(function(){xt.open();var e=Pt.getUserInfo();o.value=e.name,i.value=e.bio,Ut.hideError()}));var At=new Ye(".place-add",(function(e){e.likes=[],e.owner={_id:Lt},Tt.addNewCard(e).then((function(t){e._id=t._id,Rt.addItem(jt(e),!1)})).catch((function(e){console.log(e)})),At.close()}));At.setEventListeners(),a.addEventListener("click",(function(){At.open(),l.reset(),Nt.hideError()}));var Dt=new Ye(".avatar-update",(function(e){console.log(Tt.updateAvatar(e)),Tt.updateAvatar(e).then((function(e){console.log(e),Pt.setAvatar(e)})).catch((function(e){console.log(e)})),Dt.close()}));Dt.setEventListeners(),c.addEventListener("click",(function(){Dt.open()}));var Bt=new Ct(".card-delete-confirmation");Bt.setEventListeners(),new L(t,u).enableValidation();var Ut=new L(t,r);Ut.enableValidation();var Nt=new L(t,l);Nt.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBaUIsU0FBUyxXQUNsRHlILEdBQWtCaEMsVUFHcEIsSUFBTUcsR0FBbUIsSUFBSVQsR1Y1SmUsNkJVZ0s1Q1MsR0FBaUJtQixvQkFFaUIsSUFBSTlILEVBQ3BDakIsRUFDQWdCLEdBRXdCMkksbUJBRTFCLElBQU1QLEdBQXdCLElBQUluSSxFQUNoQ2pCLEVBQ0FVLEdBRUYwSSxHQUFzQk8sbUJBRXRCLElBQU1ILEdBQXdCLElBQUl2SSxFQUNoQ2pCLEVBQ0FjLEdBRUYwSSxHQUFzQkcsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9tZXN0by93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vbWVzdG8vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogJ9CQ0YDRhdGL0LcnLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZycsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0KfQtdC70Y/QsdC40L3RgdC60LDRjyDQvtCx0LvQsNGB0YLRjCcsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9jaGVseWFiaW5zay1vYmxhc3QuanBnJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQmNCy0LDQvdC+0LLQvicsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9pdmFub3ZvLmpwZycsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JrQsNC80YfQsNGC0LrQsCcsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQpdC+0LvQvNC+0LPQvtGA0YHQutC40Lkg0YDQsNC50L7QvScsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9raG9sbW9nb3Jza3ktcmF5b24uanBnJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQkdCw0LnQutCw0LsnLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYmFpa2FsLmpwZycsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiAnLmZvcm0nLFxuICBpbnB1dFNlbGVjdG9yOiAnLmZvcm1fX2lucHV0JyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcuZm9ybV9fc3VibWl0JyxcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ2J1dHRvbl9kaXNhYmxlZCcsXG4gIGlucHV0RXJyb3JDbGFzczogJ2Zvcm1fX2lucHV0X3R5cGVfZXJyb3InLFxuICBlcnJvckNsYXNzOiAnZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlJyxcbn07XG5cbmV4cG9ydCBjb25zdCBlZGl0SW5mb0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25fdHlwZV9lZGl0Jyk7XG5leHBvcnQgY29uc3QgZWRpdEluZm9Gb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICcucHJvZmlsZS1lZGl0X19mb3JtJ1xuKTtcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBlZGl0SW5mb0Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0nbmFtZSddXCIpO1xuZXhwb3J0IGNvbnN0IGJpb0lucHV0ID0gZWRpdEluZm9Gb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J2JpbyddXCIpO1xuZXhwb3J0IGNvbnN0IGFkZFBsYWNlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbl90eXBlX2FkZCcpO1xuZXhwb3J0IGNvbnN0IGFkZFBsYWNlRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxhY2UtYWRkX19mb3JtJyk7XG5leHBvcnQgY29uc3QgYWRkUGxhY2VQb3B1cFNlbGVjdG9yID0gJy5wbGFjZS1hZGQnO1xuZXhwb3J0IGNvbnN0IGVkaXRJbmZvUG9wdXBTZWxlY3RvciA9ICcucHJvZmlsZS1lZGl0JztcbmV4cG9ydCBjb25zdCBjb25maXJtRGVsZXRpb25Qb3B1cFNlbGVjdG9yID0gJy5jYXJkLWRlbGV0ZS1jb25maXJtYXRpb24nO1xuZXhwb3J0IGNvbnN0IHBvcHVwRnVsbFBob3RvU2VsZWN0b3IgPSAnLnBsYWNlLWZ1bGwtcGhvdG8nO1xuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZVNlbGVjdG9yID0gJy5jYXJkLXRlbXBsYXRlJztcbmV4cG9ydCBjb25zdCBjYXJkc0NvbnRhaW5lclNlbGVjdG9yID0gJy5wbGFjZXMnO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lU2VsZWN0b3IgPSAnLnByb2ZpbGVfX25hbWUnO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVCaW9TZWxlY3RvciA9ICcucHJvZmlsZV9fYmlvJztcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyU2VsZWN0b3IgPSAnLnByb2ZpbGVfX2F2YXRhcic7XG5leHBvcnQgY29uc3QgdXNlckRhdGFTZWxlY3RvcnMgPSB7XG4gIHByb2ZpbGVOYW1lU2VsZWN0b3IsXG4gIHByb2ZpbGVCaW9TZWxlY3RvcixcbiAgcHJvZmlsZUF2YXRhclNlbGVjdG9yLFxufTtcbmV4cG9ydCBjb25zdCBkZWxldGVQbGFjZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25fdHlwZV9kZWxldGUnKTtcbmV4cG9ydCBjb25zdCBkZWxldGVQbGFjZVBvcHVwU2VsZWN0b3IgPSAnLnBsYWNlX19kZWxldGUnO1xuZXhwb3J0IGNvbnN0IHVwZGF0ZUF2YXRhclBvcHVwU2VsZWN0b3IgPSAnLmF2YXRhci11cGRhdGUnO1xuZXhwb3J0IGNvbnN0IHVwZGF0ZVByb2ZpbGVBdmF0YXJCdXR0b24gPVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJyk7XG5leHBvcnQgY29uc3QgdXBkYXRlQXZhdGFyRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAnLmF2YXRhci11cGRhdGVfX2Zvcm0nXG4pO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gICNmb3JtU2VsZWN0b3I7XG4gICNpbnB1dFNlbGVjdG9yO1xuICAjc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICNpbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAjaW5wdXRFcnJvckNsYXNzO1xuICAjZXJyb3JDbGFzcztcbiAgI2Zvcm1FbGVtZW50O1xuICAjaW5wdXRMaXN0O1xuICAjYnV0dG9uO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLiNmb3JtU2VsZWN0b3IgPSBjb25maWcuZm9ybVNlbGVjdG9yO1xuICAgIHRoaXMuI2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLiNzdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLiNpbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy4jaW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLiNlcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XG4gICAgdGhpcy4jZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLiNpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy4jZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLiNpbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy4jYnV0dG9uID0gdGhpcy4jZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLiNzdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gIH1cblxuICAjY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLiNzaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuI2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9O1xuXG4gICNzaG93SW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkgPT4ge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuI2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuI2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuI2Vycm9yQ2xhc3MpO1xuICB9O1xuXG4gICNoaWRlSW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLiNmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLiNpbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuI2Vycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICB9O1xuXG4gIGhpZGVFcnJvciA9ICgpID0+IHtcbiAgICB0aGlzLiNpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLiNoaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgICAgdGhpcy4jdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB9KTtcbiAgfTtcblxuICAjc2V0Rm9ybUV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIHRoaXMuI3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy4jaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLiNjaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy4jdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gICN0b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcbiAgICBpZiAodGhpcy4jaGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuI2J1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuI2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy4jYnV0dG9uLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4jYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy4jaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLiNidXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgIH1cbiAgfTtcblxuICAjaGFzSW52YWxpZElucHV0ID0gKCkgPT4ge1xuICAgIHJldHVybiB0aGlzLiNpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfTtcblxuICBlbmFibGVWYWxpZGF0aW9uID0gKCkgPT4ge1xuICAgIHRoaXMuI2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy4jdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB9KTtcbiAgICB0aGlzLiNzZXRGb3JtRXZlbnRMaXN0ZW5lcnMoKTtcbiAgfTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICAjcmVuZGVyZWRJdGVtcztcbiAgI3JlbmRlcmVyO1xuICAjY29udGFpbmVyO1xuXG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLiNyZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuI2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMocmVuZGVyZWRJdGVtcykge1xuICAgIHJlbmRlcmVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy4jcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQsIG9yZGVyID0gdHJ1ZSkge1xuICAgIGlmIChvcmRlcikge1xuICAgICAgdGhpcy4jY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4jY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBteVVzZXJJZCB9IGZyb20gJy4uL3BhZ2VzL2luZGV4LmpzJztcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICAjbmFtZTtcbiAgI2xpbms7XG4gICN0ZW1wbGF0ZVNlbGVjdG9yO1xuICAjY2FyZDtcbiAgI2RlbGV0ZUJ1dHRvbjtcbiAgI2xpa2VCdXR0b247XG4gICNwbGFjZVBob3RvO1xuICAjaGFuZGxlQ2FyZENsaWNrO1xuICAjbGlrZXNDb3VudDtcbiAgI293bmVyO1xuICAjaGFuZGxlQ2FyZERlbGV0ZTtcbiAgI2NhcmRJZDtcbiAgI2xpa2VzO1xuICAjaGFuZGxlQ2FyZExpa2U7XG4gICNsaWtlZDtcbiAgI2RhdGE7XG5cbiAgY29uc3RydWN0b3Ioe1xuICAgIGRhdGEsXG4gICAgdGVtcGxhdGVTZWxlY3RvcixcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgaGFuZGxlQ2FyZERlbGV0ZSxcbiAgICBoYW5kbGVDYXJkTGlrZSxcbiAgfSkge1xuICAgIHRoaXMuI25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy4jbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLiNvd25lciA9IGRhdGEub3duZXIuX2lkO1xuICAgIHRoaXMuI2NhcmRJZCA9IGRhdGEuX2lkO1xuICAgIHRoaXMuI2xpa2VzID0gZGF0YS5saWtlcztcbiAgICB0aGlzLiNsaWtlc0NvdW50ID0gZGF0YS5saWtlcy5sZW5ndGg7XG4gICAgdGhpcy4jdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XG4gICAgdGhpcy4jaGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuI2hhbmRsZUNhcmREZWxldGUgPSBoYW5kbGVDYXJkRGVsZXRlO1xuICAgIHRoaXMuI2hhbmRsZUNhcmRMaWtlID0gaGFuZGxlQ2FyZExpa2U7XG4gICAgdGhpcy4jZGF0YSA9IGRhdGE7XG4gIH1cblxuICBnZXRDYXJkSWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuI2NhcmRJZDtcbiAgfVxuXG4gICNnZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLiN0ZW1wbGF0ZVNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLnBsYWNlJylcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9XG5cbiAgaXNMaWtlZCgpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnMScpO1xuICAgIGNvbnNvbGUubG9nKHRoaXMuI2xpa2VzKTtcbiAgICByZXR1cm4gdGhpcy4jbGlrZWQ7XG4gICAgLy8gcmV0dXJuIHRoaXMuI2xpa2VzLnNvbWUoKGVsZW1lbnQpID0+IHtcbiAgICAvLyAgIC8vIGRlYnVnZ2VyO1xuICAgIC8vICAgcmV0dXJuIGVsZW1lbnQuX2lkID09PSBteVVzZXJJZDtcbiAgICAvLyB9KTtcbiAgfVxuXG4gIHNldExpa2UoZGF0YSkge1xuICAgIHRoaXMuI2NhcmQucXVlcnlTZWxlY3RvcignLnBsYWNlX19saWtlcy1jb3VudCcpLnRleHRDb250ZW50ID1cbiAgICAgIGRhdGEubGlrZXMubGVuZ3RoO1xuICAgIHRoaXMuI2xpa2VkID0gZGF0YS5saWtlcy5zb21lKChlbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gZWxlbWVudC5faWQgPT09IG15VXNlcklkO1xuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKGRhdGEubGlrZXMubGVuZ3RoKTtcbiAgICBpZiAodGhpcy4jbGlrZWQpIHtcbiAgICAgIHRoaXMuI2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZCgncGxhY2VfX2xpa2VfYWN0aXZlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuI2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgncGxhY2VfX2xpa2VfYWN0aXZlJyk7XG4gICAgfVxuICB9XG5cbiAgY3JlYXRlQ2FyZCgpIHtcbiAgICB0aGlzLiNjYXJkID0gdGhpcy4jZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLiNwbGFjZVBob3RvID0gdGhpcy4jY2FyZC5xdWVyeVNlbGVjdG9yKCcucGxhY2VfX3Bob3RvJyk7XG4gICAgdGhpcy4jcGxhY2VQaG90by5zcmMgPSB0aGlzLiNsaW5rO1xuICAgIHRoaXMuI3BsYWNlUGhvdG8uYWx0ID0gdGhpcy4jbmFtZTtcbiAgICB0aGlzLiNjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZV9fdGl0bGUnKS5pbm5lclRleHQgPSB0aGlzLiNuYW1lO1xuICAgIHRoaXMuI2RlbGV0ZUJ1dHRvbiA9IHRoaXMuI2NhcmQucXVlcnlTZWxlY3RvcignLnBsYWNlX19kZWxldGUnKTtcbiAgICB0aGlzLiNsaWtlQnV0dG9uID0gdGhpcy4jY2FyZC5xdWVyeVNlbGVjdG9yKCcucGxhY2VfX2xpa2UnKTtcbiAgICB0aGlzLnNldExpa2UodGhpcy4jZGF0YSk7XG4gICAgLy8gdGhpcy4jY2FyZC5xdWVyeVNlbGVjdG9yKCcucGxhY2VfX2xpa2VzLWNvdW50JykudGV4dENvbnRlbnQgPVxuICAgIC8vICAgdGhpcy4jbGlrZXNDb3VudDtcbiAgICBpZiAodGhpcy4jb3duZXIgPT09IG15VXNlcklkKSB7XG4gICAgICB0aGlzLiNkZWxldGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgncGxhY2VfX2RlbGV0ZV9hY3RpdmUnKTtcbiAgICB9XG4gICAgLy8gdGhpcy4jbGlrZXMuc29tZSgoZWxlbWVudCkgPT4ge1xuICAgIC8vICAgaWYgKGVsZW1lbnQuX2lkID09PSBteVVzZXJJZCkge1xuICAgIC8vICAgICB0aGlzLiNsaWtlQ2FyZCgpO1xuICAgIC8vICAgfVxuICAgIC8vIH0pO1xuICAgIHRoaXMuI3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuI2NhcmQ7XG4gIH1cblxuICAjc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy4jZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy4jaGFuZGxlQ2FyZERlbGV0ZSh0aGlzKTtcbiAgICB9KTtcbiAgICB0aGlzLiNsaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy4jaGFuZGxlQ2FyZExpa2UodGhpcyk7XG4gICAgICAvLyB0aGlzLiNsaWtlQ2FyZCgpO1xuICAgIH0pO1xuICAgIHRoaXMuI3BsYWNlUGhvdG8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLiNoYW5kbGVDYXJkQ2xpY2sodGhpcy4jbmFtZSwgdGhpcy4jbGluayk7XG4gICAgfSk7XG4gIH1cblxuICBkZWxldGVDYXJkKCkge1xuICAgIHRoaXMuI2NhcmQucmVtb3ZlKCk7XG4gIH1cblxuICAjbGlrZUNhcmQoKSB7XG4gICAgdGhpcy4jbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdwbGFjZV9fbGlrZV9hY3RpdmUnKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICAjcG9wdXA7XG5cbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuI3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy4jcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuI2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuI3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLiNoYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICAjaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuI3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuI3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQgPT09IGV2dC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gICNwb3B1cDtcbiAgI2Z1bGxQaG90b0ltYWdlO1xuICAjZnVsbFBob3RvQ2FwdGlvbjtcblxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy4jcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuI2Z1bGxQaG90b0ltYWdlID0gdGhpcy4jcG9wdXAucXVlcnlTZWxlY3RvcihcbiAgICAgICcucGxhY2UtZnVsbC1waG90b19faW1hZ2UnXG4gICAgKTtcbiAgICB0aGlzLiNmdWxsUGhvdG9DYXB0aW9uID0gdGhpcy4jcG9wdXAucXVlcnlTZWxlY3RvcihcbiAgICAgICcucGxhY2UtZnVsbC1waG90b19fY2FwdGlvbidcbiAgICApO1xuICB9XG5cbiAgb3BlbihuYW1lLCBsaW5rKSB7XG4gICAgdGhpcy4jZnVsbFBob3RvSW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLiNmdWxsUGhvdG9JbWFnZS5hbHQgPSBuYW1lO1xuICAgIHRoaXMuI2Z1bGxQaG90b0NhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gICNoYW5kbGVGb3JtU3VibWl0O1xuICAjZm9ybVZhbHVlcztcbiAgI2lucHV0TGlzdDtcbiAgI3BvcHVwO1xuICAjZm9ybTtcblxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy4jcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuI2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuI2Zvcm0gPSB0aGlzLiNwb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XG4gICAgdGhpcy4jaW5wdXRMaXN0ID0gdGhpcy4jcG9wdXAucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKTtcbiAgfVxuXG4gICNnZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLiNmb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy4jaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLiNmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuI2Zvcm1WYWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLiNmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLiNoYW5kbGVGb3JtU3VibWl0KHRoaXMuI2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuI2Zvcm0ucmVzZXQoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICAjcHJvZmlsZU5hbWU7XG4gICNwcm9maWxlQmlvO1xuICAjcHJvZmlsZUF2YXRhcjtcbiAgI2F2YXRhcjtcbiAgI2lkO1xuXG4gIGNvbnN0cnVjdG9yKHVzZXJEYXRhU2VsZWN0b3JzKSB7XG4gICAgdGhpcy4jcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdXNlckRhdGFTZWxlY3RvcnMucHJvZmlsZU5hbWVTZWxlY3RvclxuICAgICk7XG4gICAgdGhpcy4jcHJvZmlsZUJpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB1c2VyRGF0YVNlbGVjdG9ycy5wcm9maWxlQmlvU2VsZWN0b3JcbiAgICApO1xuICAgIHRoaXMuI3Byb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdXNlckRhdGFTZWxlY3RvcnMucHJvZmlsZUF2YXRhclNlbGVjdG9yXG4gICAgKTtcbiAgICAvLyB0aGlzLiNhdmF0YXIgPVxuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuI3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxuICAgICAgYmlvOiB0aGlzLiNwcm9maWxlQmlvLnRleHRDb250ZW50LFxuICAgICAgYXZhdGFyOiB0aGlzLiNwcm9maWxlQXZhdGFyLnN0eWxlLmJhY2tncm91bmRJbWFnZSxcbiAgICAgIC8vIGlkOiB0aGlzLiNpZCxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8obmV3VXNlckRhdGEpIHtcbiAgICB0aGlzLiNwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5ld1VzZXJEYXRhLm5hbWU7XG4gICAgdGhpcy4jcHJvZmlsZUJpby50ZXh0Q29udGVudCA9IG5ld1VzZXJEYXRhLmJpbztcblxuICAgIGNvbnNvbGUubG9nKG5ld1VzZXJEYXRhLmF2YXRhcik7XG4gICAgLy8gdGhpcy4jaWQgPSBuZXdVc2VyRGF0YS5pZDtcbiAgICAvLyBjb25zb2xlLmxvZyhuZXdVc2VyRGF0YS5pZCk7XG4gICAgLy8gY29uc29sZS5sb2codGhpcy4jaWQpO1xuICB9XG5cbiAgc2V0QXZhdGFyKGRhdGEpIHtcbiAgICB0aGlzLiNwcm9maWxlQXZhdGFyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIGAke2RhdGEuYXZhdGFyfWAgKyAnKSc7XG4gICAgY29uc29sZS5sb2coZGF0YS5hdmF0YXIpO1xuICB9XG59XG4iLCIvLyBpbXBvcnQgeyBuYW1lSW5wdXQsIGJpb0lucHV0IH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgI2Jhc2VVcmw7XG4gICNoZWFkZXJzO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLiNiYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xuICAgIHRoaXMuI2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XG4gIH1cblxuICAjaGFuZGxlUmVzcG9uc2UgPSAocmVzcG9uc2UpID0+IHtcbiAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICB9XG4gIH07XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLiNiYXNlVXJsICsgJy9jYXJkcycsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuI2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLiNoYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICBnZXRVc2VyRGF0YSgpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy4jYmFzZVVybCArICcvdXNlcnMvbWUnLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLiNoZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy4jaGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgc2F2ZVVzZXJEYXRhKGlucHV0RGF0YSkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLiNiYXNlVXJsICsgJy91c2Vycy9tZScsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuI2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGlucHV0RGF0YS5uYW1lLFxuICAgICAgICBhYm91dDogaW5wdXREYXRhLmJpbyxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy4jaGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgYWRkTmV3Q2FyZChjYXJkRGF0YSkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLiNiYXNlVXJsICsgJy9jYXJkcycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczogdGhpcy4jaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogY2FyZERhdGEubmFtZSxcbiAgICAgICAgbGluazogY2FyZERhdGEubGluayxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy4jaGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy4jYmFzZVVybCArIGAvY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuI2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLiNoYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICBsaWtlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy4jYmFzZVVybCArIGAvY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuI2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLiNoYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICBkaXNsaWtlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy4jYmFzZVVybCArIGAvY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuI2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLiNoYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICB1cGRhdGVBdmF0YXIoaW5wdXRMaW5rKSB7XG4gICAgY29uc29sZS5sb2coaW5wdXRMaW5rKTtcbiAgICByZXR1cm4gZmV0Y2godGhpcy4jYmFzZVVybCArIGAvdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy4jaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGlucHV0TGluayksXG4gICAgfSkudGhlbih0aGlzLiNoYW5kbGVSZXNwb25zZSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICAjaGFuZGxlRm9ybVN1Ym1pdDtcbiAgI2Zvcm1WYWx1ZXM7XG4gICNpbnB1dExpc3Q7XG4gICNwb3B1cDtcbiAgI2Zvcm07XG5cbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuI3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLiNmb3JtID0gdGhpcy4jcG9wdXAucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcbiAgfVxuXG4gIHNldEZvcm1IYW5kbGVyKGhhbmRsZXIpIHtcbiAgICB0aGlzLiNoYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlcjtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuI2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLiNoYW5kbGVGb3JtU3VibWl0KCk7XG4gICAgfSk7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cbn1cbiIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xuXG5pbXBvcnQge1xuICB2YWxpZGF0aW9uQ29uZmlnLFxuICBlZGl0SW5mb0J1dHRvbixcbiAgYWRkUGxhY2VCdXR0b24sXG4gIGFkZFBsYWNlRm9ybUVsZW1lbnQsXG4gIGFkZFBsYWNlUG9wdXBTZWxlY3RvcixcbiAgY2FyZFRlbXBsYXRlU2VsZWN0b3IsXG4gIGNhcmRzQ29udGFpbmVyU2VsZWN0b3IsXG4gIGVkaXRJbmZvRm9ybUVsZW1lbnQsXG4gIGVkaXRJbmZvUG9wdXBTZWxlY3RvcixcbiAgcG9wdXBGdWxsUGhvdG9TZWxlY3RvcixcbiAgYmlvSW5wdXQsXG4gIG5hbWVJbnB1dCxcbiAgdXNlckRhdGFTZWxlY3RvcnMsXG4gIHByb2ZpbGVBdmF0YXJTZWxlY3RvcixcbiAgY29uZmlybURlbGV0aW9uUG9wdXBTZWxlY3RvcixcbiAgZGVsZXRlUGxhY2VCdXR0b24sXG4gIGRlbGV0ZVBsYWNlUG9wdXBTZWxlY3RvcixcbiAgdXBkYXRlQXZhdGFyUG9wdXBTZWxlY3RvcixcbiAgdXBkYXRlUHJvZmlsZUF2YXRhckJ1dHRvbixcbiAgdXBkYXRlQXZhdGFyRm9ybUVsZW1lbnQsXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5cbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMnO1xuXG5leHBvcnQgbGV0IG15VXNlcklkID0gbnVsbDtcbi8vIGxldCBjYXJkSWQgPSBudWxsO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMjcnLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogJzM3NTgwZTI5LWNhNDMtNGU2MC1iZmM0LTk3MzFkNjE2NzY5MScsXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgfSxcbn0pO1xuXG4vLz8gUHJvbWlzZS5hbGw7XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoe1xuICAgIGRhdGE6IGl0ZW0sXG4gICAgdGVtcGxhdGVTZWxlY3RvcjogY2FyZFRlbXBsYXRlU2VsZWN0b3IsXG4gICAgaGFuZGxlQ2FyZENsaWNrOiAobmFtZSwgbGluaykgPT4ge1xuICAgICAgcG9wdXBGdWxsUGhvdG8ub3BlbihuYW1lLCBsaW5rKTtcbiAgICB9LFxuICAgIGhhbmRsZUNhcmREZWxldGU6IChjYXJkSW5zdGFuY2UpID0+IHtcbiAgICAgIGRlbGV0ZUNhcmQoY2FyZEluc3RhbmNlKTtcbiAgICB9LFxuICAgIGhhbmRsZUNhcmRMaWtlOiAoY2FyZEluc3RhbmNlKSA9PiB7XG4gICAgICBsaWtlQ2FyZChjYXJkSW5zdGFuY2UpO1xuICAgIH0sXG4gIH0pO1xuICByZXR1cm4gY2FyZC5jcmVhdGVDYXJkKCk7XG59XG5cbmZ1bmN0aW9uIGxpa2VDYXJkKGNhcmQpIHtcbiAgY29uc29sZS5sb2coY2FyZC5pc0xpa2VkKCkpO1xuICBjb25zdCBjaGVja0Zvckxpa2UgPSBjYXJkLmlzTGlrZWQoKVxuICAgID8gYXBpLmRpc2xpa2VDYXJkKGNhcmQuZ2V0Q2FyZElkKCkpXG4gICAgOiBhcGkubGlrZUNhcmQoY2FyZC5nZXRDYXJkSWQoKSk7XG4gIC8vIGNvbnNvbGUubG9nKGFwaS5kaXNsaWtlQ2FyZChjYXJkLmdldENhcmRJZCgpKSk7XG4gIGNoZWNrRm9yTGlrZVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBjYXJkLnNldExpa2UoZGF0YSk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gIC8vIGNvbnNvbGUubG9nKGNoZWNrRm9yTGlrZSk7XG4gIC8vIGNhcmQubGlrZXMuc29tZSgoZWxlbWVudCkgPT4ge1xuICAvLyAgIGlmIChlbGVtZW50Ll9pZCA9PT0gbXlVc2VySWQpIHtcbiAgLy8gICAgIGFwaS5saWtlQ2FyZChjYXJkLmNhcmRJZCk7XG4gIC8vICAgfSBlbHNlIHtcbiAgLy8gICAgIGFwaS5kaXNsaWtlQ2FyZChjYXJkLmNhcmRJZCk7XG4gIC8vICAgfVxuICAvLyB9KTtcbn1cblxuZnVuY3Rpb24gZGVsZXRlQ2FyZChjYXJkKSB7XG4gIHBvcHVwRGVsZXRlUGxhY2Uub3BlbigpO1xuICBwb3B1cERlbGV0ZVBsYWNlLnNldEZvcm1IYW5kbGVyKCgpID0+IHtcbiAgICBhcGkuZGVsZXRlQ2FyZChjYXJkLmdldENhcmRJZCgpKS50aGVuKCgpID0+IHtcbiAgICAgIGNhcmQuZGVsZXRlQ2FyZCgpO1xuICAgICAgcG9wdXBEZWxldGVQbGFjZS5jbG9zZSgpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8odXNlckRhdGFTZWxlY3RvcnMpO1xuZ2V0VXNlckRhdGFGcm9tU2VydmVyKCk7XG5cbmNvbnN0IGNhcmRzUHJvbWlzZSA9IGFwaS5nZXRJbml0aWFsQ2FyZHMoKTtcblxuY29uc3QgY2FyZHNMaXN0ID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgIGNhcmRzTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSkpO1xuICAgIH0sXG4gIH0sXG4gIGNhcmRzQ29udGFpbmVyU2VsZWN0b3Jcbik7XG5cbmNhcmRzUHJvbWlzZVxuICAudGhlbigoZGF0YSkgPT4ge1xuICAgIGNhcmRzTGlzdC5yZW5kZXJJdGVtcyhkYXRhKTtcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICB9KTtcblxuZnVuY3Rpb24gZ2V0VXNlckRhdGFGcm9tU2VydmVyKCkge1xuICBjb25zdCBwcm9maWxlRGF0YVByb21pc2UgPSBhcGkuZ2V0VXNlckRhdGEoKTtcbiAgcHJvZmlsZURhdGFQcm9taXNlXG4gICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgbXlVc2VySWQgPSByZXN1bHQuX2lkO1xuICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICAgICAgbmFtZTogcmVzdWx0Lm5hbWUsXG4gICAgICAgIGJpbzogcmVzdWx0LmFib3V0LFxuICAgICAgICAvLyBhdmF0YXI6IHJlc3VsdC5hdmF0YXIsXG4gICAgICAgIGlkOiByZXN1bHQuX2lkLFxuICAgICAgfSk7XG4gICAgICB1c2VySW5mby5zZXRBdmF0YXIocmVzdWx0KTtcbiAgICAgIC8vIGVkaXRJbmZvRm9ybVZhbGlkYXRvci5oaWRlRXJyb3IoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pO1xufVxuXG5jb25zdCBwb3B1cEZ1bGxQaG90byA9IG5ldyBQb3B1cFdpdGhJbWFnZShwb3B1cEZ1bGxQaG90b1NlbGVjdG9yKTtcbnBvcHVwRnVsbFBob3RvLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHBvcHVwRWRpdEluZm8gPSBuZXcgUG9wdXBXaXRoRm9ybShlZGl0SW5mb1BvcHVwU2VsZWN0b3IsIChpbnB1dERhdGEpID0+IHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oaW5wdXREYXRhKTtcbiAgYXBpLnNhdmVVc2VyRGF0YShpbnB1dERhdGEpO1xuICBwb3B1cEVkaXRJbmZvLmNsb3NlKCk7XG59KTtcblxucG9wdXBFZGl0SW5mby5zZXRFdmVudExpc3RlbmVycygpO1xuZWRpdEluZm9CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIHBvcHVwRWRpdEluZm8ub3BlbigpO1xuICBjb25zdCBwcm9maWxlRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIG5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVEYXRhLm5hbWU7XG4gIGJpb0lucHV0LnZhbHVlID0gcHJvZmlsZURhdGEuYmlvO1xuICBlZGl0SW5mb0Zvcm1WYWxpZGF0b3IuaGlkZUVycm9yKCk7XG59KTtcblxuY29uc3QgcG9wdXBBZGRQbGFjZSA9IG5ldyBQb3B1cFdpdGhGb3JtKGFkZFBsYWNlUG9wdXBTZWxlY3RvciwgKGlucHV0RGF0YSkgPT4ge1xuICBpbnB1dERhdGEubGlrZXMgPSBbXTtcbiAgaW5wdXREYXRhLm93bmVyID0geyBfaWQ6IG15VXNlcklkIH07XG4gIGFwaVxuICAgIC5hZGROZXdDYXJkKGlucHV0RGF0YSlcbiAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICBpbnB1dERhdGEuX2lkID0gcmVzdWx0Ll9pZDtcbiAgICAgIGNhcmRzTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoaW5wdXREYXRhKSwgZmFsc2UpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG4gIHBvcHVwQWRkUGxhY2UuY2xvc2UoKTtcbn0pO1xuXG5wb3B1cEFkZFBsYWNlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5hZGRQbGFjZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgcG9wdXBBZGRQbGFjZS5vcGVuKCk7XG4gIGFkZFBsYWNlRm9ybUVsZW1lbnQucmVzZXQoKTtcbiAgYWRkUGxhY2VGb3JtVmFsaWRhdG9yLmhpZGVFcnJvcigpO1xufSk7XG5cbmNvbnN0IHBvcHVwVXBkYXRlQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIHVwZGF0ZUF2YXRhclBvcHVwU2VsZWN0b3IsXG4gIChpbnB1dCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKGFwaS51cGRhdGVBdmF0YXIoaW5wdXQpKTtcbiAgICBhcGlcbiAgICAgIC51cGRhdGVBdmF0YXIoaW5wdXQpXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgIHVzZXJJbmZvLnNldEF2YXRhcihyZXN1bHQpO1xuICAgICAgICAvLyBpbnB1dERhdGEuX2lkID0gcmVzdWx0Ll9pZDtcbiAgICAgICAgLy8gY2FyZHNMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChpbnB1dERhdGEpLCBmYWxzZSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICAgIHBvcHVwVXBkYXRlQXZhdGFyLmNsb3NlKCk7XG4gIH1cbik7XG5wb3B1cFVwZGF0ZUF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xuXG51cGRhdGVQcm9maWxlQXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBwb3B1cFVwZGF0ZUF2YXRhci5vcGVuKCk7XG59KTtcblxuY29uc3QgcG9wdXBEZWxldGVQbGFjZSA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXG4gIGNvbmZpcm1EZWxldGlvblBvcHVwU2VsZWN0b3Jcbik7XG5cbnBvcHVwRGVsZXRlUGxhY2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgdXBkYXRlQXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB2YWxpZGF0aW9uQ29uZmlnLFxuICB1cGRhdGVBdmF0YXJGb3JtRWxlbWVudFxuKTtcbnVwZGF0ZUF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBlZGl0SW5mb0Zvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvbkNvbmZpZyxcbiAgZWRpdEluZm9Gb3JtRWxlbWVudFxuKTtcbmVkaXRJbmZvRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGFkZFBsYWNlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB2YWxpZGF0aW9uQ29uZmlnLFxuICBhZGRQbGFjZUZvcm1FbGVtZW50XG4pO1xuYWRkUGxhY2VGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuLy8gY29uc29sZS5sb2cobXlVc2VySWQpO1xuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiZWRpdEluZm9CdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJlZGl0SW5mb0Zvcm1FbGVtZW50IiwibmFtZUlucHV0IiwiYmlvSW5wdXQiLCJhZGRQbGFjZUJ1dHRvbiIsImFkZFBsYWNlRm9ybUVsZW1lbnQiLCJ1cGRhdGVQcm9maWxlQXZhdGFyQnV0dG9uIiwidXBkYXRlQXZhdGFyRm9ybUVsZW1lbnQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwicmVtb3ZlIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzb21lIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJ0aGlzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwicmVuZGVyZWRJdGVtcyIsIml0ZW0iLCJlbGVtZW50Iiwib3JkZXIiLCJhcHBlbmQiLCJwcmVwZW5kIiwiQ2FyZCIsImRhdGEiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlQ2FyZERlbGV0ZSIsImhhbmRsZUNhcmRMaWtlIiwibmFtZSIsImxpbmsiLCJvd25lciIsIl9pZCIsImxpa2VzIiwibGVuZ3RoIiwiY29uc29sZSIsImxvZyIsIm15VXNlcklkIiwic3JjIiwiYWx0IiwiaW5uZXJUZXh0Iiwic2V0TGlrZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInJlc2V0IiwiaW5wdXQiLCJ2YWx1ZSIsIlVzZXJJbmZvIiwidXNlckRhdGFTZWxlY3RvcnMiLCJwcm9maWxlTmFtZVNlbGVjdG9yIiwicHJvZmlsZUJpb1NlbGVjdG9yIiwicHJvZmlsZUF2YXRhclNlbGVjdG9yIiwiYmlvIiwiYXZhdGFyIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJuZXdVc2VyRGF0YSIsIkFwaSIsIm9wdGlvbnMiLCJyZXNwb25zZSIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJiYXNlVXJsIiwiaGVhZGVycyIsImZldGNoIiwidGhlbiIsImlucHV0RGF0YSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJjYXJkRGF0YSIsImNhcmRJZCIsImlucHV0TGluayIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsImhhbmRsZXIiLCJhcGkiLCJhdXRob3JpemF0aW9uIiwiY3JlYXRlQ2FyZCIsInBvcHVwRnVsbFBob3RvIiwib3BlbiIsImNhcmRJbnN0YW5jZSIsImNhcmQiLCJwb3B1cERlbGV0ZVBsYWNlIiwic2V0Rm9ybUhhbmRsZXIiLCJkZWxldGVDYXJkIiwiZ2V0Q2FyZElkIiwiaXNMaWtlZCIsImRpc2xpa2VDYXJkIiwibGlrZUNhcmQiLCJjYXRjaCIsImVyciIsInVzZXJJbmZvIiwiZ2V0VXNlckRhdGEiLCJyZXN1bHQiLCJzZXRVc2VySW5mbyIsInNldEF2YXRhciIsImNhcmRzUHJvbWlzZSIsImdldEluaXRpYWxDYXJkcyIsImNhcmRzTGlzdCIsImFkZEl0ZW0iLCJyZW5kZXJJdGVtcyIsInNldEV2ZW50TGlzdGVuZXJzIiwicG9wdXBFZGl0SW5mbyIsInNhdmVVc2VyRGF0YSIsInByb2ZpbGVEYXRhIiwiZ2V0VXNlckluZm8iLCJlZGl0SW5mb0Zvcm1WYWxpZGF0b3IiLCJoaWRlRXJyb3IiLCJwb3B1cEFkZFBsYWNlIiwiYWRkTmV3Q2FyZCIsImFkZFBsYWNlRm9ybVZhbGlkYXRvciIsInBvcHVwVXBkYXRlQXZhdGFyIiwidXBkYXRlQXZhdGFyIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=