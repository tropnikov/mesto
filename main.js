!function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};e.d({},{Y:function(){return jt}});var t={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},n=document.querySelector(".button_type_edit"),r=document.querySelector(".profile-edit__form"),o=r.querySelector("[name='name']"),i=r.querySelector("[name='bio']"),a=document.querySelector(".button_type_add"),l=document.querySelector(".place-add__form"),u=(document.querySelector(".button_type_delete"),document.querySelector(".profile__avatar")),c=document.querySelector(".avatar-update__form");function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,h(e,t,"get"))}function p(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,h(e,t,"set"),n),n}function h(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var v=new WeakMap,d=new WeakMap,y=new WeakMap,w=new WeakMap,b=new WeakMap,m=new WeakMap,k=new WeakMap,g=new WeakMap,_=new WeakMap,S=new WeakMap,E=new WeakMap,W=new WeakMap,M=new WeakMap,O=new WeakMap,C=new WeakMap,L=function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v.set(this,{writable:!0,value:void 0}),d.set(this,{writable:!0,value:void 0}),y.set(this,{writable:!0,value:void 0}),w.set(this,{writable:!0,value:void 0}),b.set(this,{writable:!0,value:void 0}),m.set(this,{writable:!0,value:void 0}),k.set(this,{writable:!0,value:void 0}),g.set(this,{writable:!0,value:void 0}),_.set(this,{writable:!0,value:void 0}),S.set(this,{writable:!0,value:function(e){e.validity.valid?f(r,W).call(r,e):f(r,E).call(r,e,e.validationMessage)}}),E.set(this,{writable:!0,value:function(e,t){var n=f(r,k).querySelector(".".concat(e.id,"-error"));e.classList.add(f(r,b)),n.textContent=t,n.classList.add(f(r,m))}}),W.set(this,{writable:!0,value:function(e){var t=f(r,k).querySelector(".".concat(e.id,"-error"));e.classList.remove(f(r,b)),t.classList.remove(f(r,m)),t.textContent=""}}),s(this,"hideError",(function(){f(r,g).forEach((function(e){f(r,W).call(r,e),f(r,O).call(r)}))})),M.set(this,{writable:!0,value:function(){f(r,O).call(r),f(r,g).forEach((function(e){e.addEventListener("input",(function(){f(r,S).call(r,e),f(r,O).call(r)}))}))}}),O.set(this,{writable:!0,value:function(){f(r,C).call(r)?(f(r,_).classList.add(f(r,w)),f(r,_).setAttribute("disabled",!0)):(f(r,_).classList.remove(f(r,w)),f(r,_).removeAttribute("disabled"))}}),C.set(this,{writable:!0,value:function(){return f(r,g).some((function(e){return!e.validity.valid}))}}),s(this,"enableValidation",(function(){f(r,k).addEventListener("submit",(function(e){e.preventDefault(),f(r,O).call(r)})),f(r,M).call(r)})),p(this,v,t.formSelector),p(this,d,t.inputSelector),p(this,y,t.submitButtonSelector),p(this,w,t.inactiveButtonClass),p(this,b,t.inputErrorClass),p(this,m,t.errorClass),p(this,k,n),p(this,g,Array.from(f(this,k).querySelectorAll(f(this,d)))),p(this,_,f(this,k).querySelector(f(this,y)))};function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,q(e,t,"get"))}function P(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,q(e,t,"set"),n),n}function q(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var R=new WeakMap,x=new WeakMap,I=new WeakMap,A=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),R.set(this,{writable:!0,value:void 0}),x.set(this,{writable:!0,value:void 0}),I.set(this,{writable:!0,value:void 0}),P(this,x,r),P(this,I,document.querySelector(n))}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){j(t,x).call(t,e)}))}},{key:"addItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t?j(this,I).append(e):j(this,I).prepend(e)}}])&&T(t.prototype,n),e}();function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function U(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,H(e,t,"get"))}function N(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,H(e,t,"set"),n),n}function H(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var V=new WeakMap,J=new WeakMap,F=new WeakMap,z=new WeakMap,Y=new WeakMap,G=new WeakMap,K=new WeakMap,Q=new WeakMap,X=new WeakMap,Z=new WeakMap,$=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap,re=new WeakMap,oe=new WeakMap,ie=new WeakSet,ae=new WeakSet,le=new WeakSet,ue=function(){function e(t){var n=t.data,r=t.templateSelector,o=t.handleCardClick,i=t.handleCardDelete,a=t.handleCardLike;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),le.add(this),ae.add(this),ie.add(this),V.set(this,{writable:!0,value:void 0}),J.set(this,{writable:!0,value:void 0}),F.set(this,{writable:!0,value:void 0}),z.set(this,{writable:!0,value:void 0}),Y.set(this,{writable:!0,value:void 0}),G.set(this,{writable:!0,value:void 0}),K.set(this,{writable:!0,value:void 0}),Q.set(this,{writable:!0,value:void 0}),X.set(this,{writable:!0,value:void 0}),Z.set(this,{writable:!0,value:void 0}),$.set(this,{writable:!0,value:void 0}),ee.set(this,{writable:!0,value:void 0}),te.set(this,{writable:!0,value:void 0}),ne.set(this,{writable:!0,value:void 0}),re.set(this,{writable:!0,value:void 0}),oe.set(this,{writable:!0,value:void 0}),N(this,V,n.name),N(this,J,n.link),N(this,Z,n.owner._id),N(this,ee,n._id),N(this,te,n.likes),N(this,X,n.likes.length),N(this,F,r),N(this,Q,o),N(this,$,i),N(this,ne,a),N(this,oe,n)}var t,n;return t=e,(n=[{key:"getCardId",value:function(){return U(this,ee)}},{key:"isLiked",value:function(){return console.log(U(this,te)),U(this,re)}},{key:"setLike",value:function(e){U(this,z).querySelector(".place__likes-count").textContent=e.likes.length,N(this,re,e.likes.some((function(e){return e._id===jt}))),console.log(e.likes.length),U(this,re)?U(this,G).classList.add("place__like_active"):U(this,G).classList.remove("place__like_active")}},{key:"createCard",value:function(){return N(this,z,B(this,ie,ce).call(this)),N(this,K,U(this,z).querySelector(".place__photo")),U(this,K).src=U(this,J),U(this,K).alt=U(this,V),U(this,z).querySelector(".place__title").innerText=U(this,V),N(this,Y,U(this,z).querySelector(".place__delete")),N(this,G,U(this,z).querySelector(".place__like")),this.setLike(U(this,oe)),U(this,Z)===jt&&U(this,Y).classList.remove("place__delete_active"),B(this,ae,se).call(this),U(this,z)}},{key:"deleteCard",value:function(){U(this,z).remove()}}])&&D(t.prototype,n),e}();function ce(){return document.querySelector(U(this,F)).content.querySelector(".place").cloneNode(!0)}function se(){var e=this;U(this,Y).addEventListener("click",(function(){U(e,$).call(e,e)})),U(this,G).addEventListener("click",(function(){U(e,ne).call(e,e)})),U(this,K).addEventListener("click",(function(){U(e,Q).call(e,U(e,V),U(e,J))}))}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,he(e,t,"get"))}function he(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ve=new WeakMap,de=new WeakMap,ye=function(){function e(t){var n,r,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ve.set(this,{writable:!0,value:void 0}),de.set(this,{writable:!0,value:function(e){"Escape"===e.key&&i.close()}}),n=this,r=ve,o=document.querySelector(t),function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(n,he(n,r,"set"),o)}var t,n;return t=e,(n=[{key:"open",value:function(){pe(this,ve).classList.add("popup_opened"),document.addEventListener("keydown",pe(this,de))}},{key:"close",value:function(){pe(this,ve).classList.remove("popup_opened"),document.removeEventListener("keydown",pe(this,de))}},{key:"setEventListeners",value:function(){var e=this;pe(this,ve).querySelector(".popup__close").addEventListener("click",(function(){e.close()})),pe(this,ve).addEventListener("click",(function(t){t.target===t.currentTarget&&e.close()}))}}])&&fe(t.prototype,n),e}();function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t,n){return(me="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Se(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ge(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?_e(e):t}function _e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Me(e,t,"get"))}function We(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Me(e,t,"set"),n),n}function Me(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Oe=new WeakMap,Ce=new WeakMap,Le=new WeakMap,Te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Se(r);if(o){var n=Se(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ge(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),Oe.set(_e(t),{writable:!0,value:void 0}),Ce.set(_e(t),{writable:!0,value:void 0}),Le.set(_e(t),{writable:!0,value:void 0}),We(_e(t),Oe,document.querySelector(e)),We(_e(t),Ce,Ee(_e(t),Oe).querySelector(".place-full-photo__image")),We(_e(t),Le,Ee(_e(t),Oe).querySelector(".place-full-photo__caption")),t}return t=a,(n=[{key:"open",value:function(e,t){Ee(this,Ce).src=t,Ee(this,Ce).alt=e,Ee(this,Le).textContent=e,me(Se(a.prototype),"open",this).call(this)}}])&&be(t.prototype,n),a}(ye);function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t,n){return(qe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ae(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?Ie(e):t}function Ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ue(e,t,"get"))}function Be(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ue(e,t,"set"),n),n}function Ue(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Ne=new WeakMap,He=new WeakMap,Ve=new WeakMap,Je=new WeakMap,Fe=new WeakMap,ze=new WeakMap,Ye=new WeakSet,Ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ae(r);if(o){var n=Ae(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return xe(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=i.call(this,e),Ye.add(Ie(n)),Ne.set(Ie(n),{writable:!0,value:void 0}),He.set(Ie(n),{writable:!0,value:void 0}),Ve.set(Ie(n),{writable:!0,value:void 0}),Je.set(Ie(n),{writable:!0,value:void 0}),Fe.set(Ie(n),{writable:!0,value:void 0}),ze.set(Ie(n),{writable:!0,value:void 0}),Be(Ie(n),Je,document.querySelector(e)),Be(Ie(n),Ne,t),Be(Ie(n),Fe,De(Ie(n),Je).querySelector(".form")),Be(Ie(n),Ve,De(Ie(n),Je).querySelectorAll(".form__input")),Be(Ie(n),ze,De(Ie(n),Je).querySelector(".button_type_save")),n}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;De(this,Fe).addEventListener("submit",(function(t){t.preventDefault(),De(e,Ne).call(e,function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(e,Ye,Ke).call(e))})),qe(Ae(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){qe(Ae(a.prototype),"close",this).call(this),De(this,Fe).reset()}},{key:"renderLoading",value:function(e){e?(De(this,ze).textContent="Сохранение...",console.log("Saving")):De(this,ze).textContent="Сохранить"}}])&&Pe(t.prototype,n),a}(ye);function Ke(){var e=this;return Be(this,He,{}),De(this,Ve).forEach((function(t){De(e,He)[t.name]=t.value})),De(this,He)}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,$e(e,t,"get"))}function Ze(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,$e(e,t,"set"),n),n}function $e(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var et=new WeakMap,tt=new WeakMap,nt=new WeakMap,rt=new WeakMap,ot=new WeakMap,it=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),et.set(this,{writable:!0,value:void 0}),tt.set(this,{writable:!0,value:void 0}),nt.set(this,{writable:!0,value:void 0}),rt.set(this,{writable:!0,value:void 0}),ot.set(this,{writable:!0,value:void 0}),Ze(this,et,document.querySelector(t.profileNameSelector)),Ze(this,tt,document.querySelector(t.profileBioSelector)),Ze(this,nt,document.querySelector(t.profileAvatarSelector))}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:Xe(this,et).textContent,bio:Xe(this,tt).textContent,avatar:Xe(this,nt).style.backgroundImage}}},{key:"setUserInfo",value:function(e){Xe(this,et).textContent=e.name,Xe(this,tt).textContent=e.bio,console.log(e.avatar)}},{key:"setAvatar",value:function(e){Xe(this,nt).style.backgroundImage="url("+"".concat(e.avatar)+")",console.log(e.avatar)}}])&&Qe(t.prototype,n),e}();function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ct(e,t,"get"))}function ut(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ct(e,t,"set"),n),n}function ct(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var st=new WeakMap,ft=new WeakMap,pt=new WeakMap,ht=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),st.set(this,{writable:!0,value:void 0}),ft.set(this,{writable:!0,value:void 0}),pt.set(this,{writable:!0,value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}}),ut(this,st,t.baseUrl),ut(this,ft,t.headers)}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return fetch(lt(this,st)+"/cards",{headers:lt(this,ft)}).then(lt(this,pt))}},{key:"getUserData",value:function(){return fetch(lt(this,st)+"/users/me",{headers:lt(this,ft)}).then(lt(this,pt))}},{key:"saveUserData",value:function(e){return fetch(lt(this,st)+"/users/me",{method:"PATCH",headers:lt(this,ft),body:JSON.stringify({name:e.name,about:e.bio})}).then(lt(this,pt))}},{key:"addNewCard",value:function(e){return fetch(lt(this,st)+"/cards",{method:"POST",headers:lt(this,ft),body:JSON.stringify({name:e.name,link:e.link})}).then(lt(this,pt))}},{key:"deleteCard",value:function(e){return fetch(lt(this,st)+"/cards/".concat(e),{method:"DELETE",headers:lt(this,ft)}).then(lt(this,pt))}},{key:"likeCard",value:function(e){return fetch(lt(this,st)+"/cards/likes/".concat(e),{method:"PUT",headers:lt(this,ft)}).then(lt(this,pt))}},{key:"dislikeCard",value:function(e){return fetch(lt(this,st)+"/cards/likes/".concat(e),{method:"DELETE",headers:lt(this,ft)}).then(lt(this,pt))}},{key:"updateAvatar",value:function(e){return console.log(e),fetch(lt(this,st)+"/users/me/avatar",{method:"PATCH",headers:lt(this,ft),body:JSON.stringify(e)}).then(lt(this,pt))}}])&&at(t.prototype,n),e}();function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yt(e,t,n){return(yt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function wt(e,t){return(wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bt(e,t){return!t||"object"!==vt(t)&&"function"!=typeof t?mt(e):t}function mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,St(e,t,"get"))}function _t(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,St(e,t,"set"),n),n}function St(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Et=new WeakMap,Wt=new WeakMap,Mt=new WeakMap,Ot=new WeakMap,Ct=new WeakMap,Lt=new WeakMap,Tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wt(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=kt(r);if(o){var n=kt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return bt(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),Et.set(mt(t),{writable:!0,value:void 0}),Wt.set(mt(t),{writable:!0,value:void 0}),Mt.set(mt(t),{writable:!0,value:void 0}),Ot.set(mt(t),{writable:!0,value:void 0}),Ct.set(mt(t),{writable:!0,value:void 0}),Lt.set(mt(t),{writable:!0,value:void 0}),_t(mt(t),Ot,document.querySelector(e)),_t(mt(t),Ct,gt(mt(t),Ot).querySelector(".form")),_t(mt(t),Lt,gt(mt(t),Ot).querySelector(".button_type_save")),t}return t=a,(n=[{key:"setFormHandler",value:function(e){_t(this,Et,e)}},{key:"setEventListeners",value:function(){var e=this;gt(this,Ct).addEventListener("submit",(function(t){t.preventDefault(),gt(e,Et).call(e)})),yt(kt(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){yt(kt(a.prototype),"close",this).call(this)}},{key:"renderLoading",value:function(e){gt(this,Lt).textContent=e?"Удаление...":"Да"}}])&&dt(t.prototype,n),a}(ye),jt=null,Pt=new ht({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-27",headers:{authorization:"37580e29-ca43-4e60-bfc4-9731d6167691","Content-Type":"application/json"}});function qt(e){return new ue({data:e,templateSelector:".card-template",handleCardClick:function(e,t){At.open(e,t)},handleCardDelete:function(e){var t;t=e,Nt.open(),Nt.setFormHandler((function(){Jt(Nt,!0),Pt.deleteCard(t.getCardId()).then((function(){t.deleteCard(),Nt.close()})).catch((function(e){return console.log(e)})).finally((function(){return Jt(Nt,!1)}))}))},handleCardLike:function(e){var t;t=e,console.log(t.isLiked()),(t.isLiked()?Pt.dislikeCard(t.getCardId()):Pt.likeCard(t.getCardId())).then((function(e){t.setLike(e)})).catch((function(e){return console.log(e)}))}}).createCard()}var Rt=new it({profileNameSelector:".profile__name",profileBioSelector:".profile__bio",profileAvatarSelector:".profile__avatar"});Pt.getUserData().then((function(e){jt=e._id,console.log(e),Rt.setUserInfo({name:e.name,bio:e.about,id:e._id}),Rt.setAvatar(e)})).catch((function(e){console.log(e)}));var xt=Pt.getInitialCards(),It=new A({renderer:function(e){It.addItem(qt(e))}},".places");xt.then((function(e){It.renderItems(e),console.log(e)})).catch((function(e){console.log(e)}));var At=new Te(".place-full-photo");At.setEventListeners();var Dt=new Ge(".profile-edit",(function(e){Jt(Dt,!0),Pt.saveUserData(e).then((function(){Rt.setUserInfo(e)})).catch((function(e){return console.log(e)})).finally((function(){return Jt(Dt,!1)})),Dt.close()}));Dt.setEventListeners(),n.addEventListener("click",(function(){Dt.open();var e=Rt.getUserInfo();o.value=e.name,i.value=e.bio,Ht.hideError()}));var Bt=new Ge(".place-add",(function(e){Jt(Bt,!0),e.likes=[],e.owner={_id:jt},Pt.addNewCard(e).then((function(t){e._id=t._id,It.addItem(qt(e),!1)})).catch((function(e){console.log(e)})).finally((function(){return Jt(Bt,!1)})),Bt.close()}));Bt.setEventListeners(),a.addEventListener("click",(function(){Bt.open(),l.reset(),Vt.hideError()}));var Ut=new Ge(".avatar-update",(function(e){console.log(Pt.updateAvatar(e)),Pt.updateAvatar(e).then((function(e){console.log(e),Rt.setAvatar(e)})).catch((function(e){console.log(e)})),Ut.close()}));Ut.setEventListeners(),u.addEventListener("click",(function(){Ut.open()}));var Nt=new Tt(".card-delete-confirmation");Nt.setEventListeners(),new L(t,c).enableValidation();var Ht=new L(t,r);Ht.enableValidation();var Vt=new L(t,l);function Jt(e,t){e.renderLoading(t)}Vt.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNOEUsRUFBTzlFLElBQ3ZCbUYsR0FBVUMsUUFBUXhCLEdBQVdiLElBQVksTUFFMUN1QixPQUFNLFNBQUNDLEdBQ05wRSxRQUFRQyxJQUFJbUUsTUFFYkMsU0FBUSxrQkFBTUwsR0FBYzBCLElBQWUsTUFDOUNBLEdBQWMvRSxXQUdoQitFLEdBQWNQLG9CQUNkckksRUFBZW1CLGlCQUFpQixTQUFTLFdBQ3ZDeUgsR0FBYy9CLE9BQ2Q1RyxFQUFvQm1FLFFBQ3BCMEUsR0FBc0JILGVBR3hCLElBQU1JLEdBQW9CLElBQUk3RSxHVnJJVyxrQlV1SXZDLFNBQUNJLEdBQ0NwQixRQUFRQyxJQUFJc0QsR0FBSXVDLGFBQWExRSxJQUM3Qm1DLEdBQ0d1QyxhQUFhMUUsR0FDYnVCLE1BQUssU0FBQ2dDLEdBQ0wzRSxRQUFRQyxJQUFJMEUsR0FDWkYsR0FBU0ksVUFBVUYsTUFJcEJSLE9BQU0sU0FBQ0MsR0FDTnBFLFFBQVFDLElBQUltRSxNQUVoQnlCLEdBQWtCbEYsV0FHdEJrRixHQUFrQlYsb0JBRWxCbkksRUFBMEJpQixpQkFBaUIsU0FBUyxXQUNsRDRILEdBQWtCbEMsVUFHcEIsSUFBTUcsR0FBbUIsSUFBSVQsR1YzS2UsNkJVK0s1Q1MsR0FBaUJxQixvQkFFaUIsSUFBSWpJLEVBQ3BDakIsRUFDQWdCLEdBRXdCOEksbUJBRTFCLElBQU1QLEdBQXdCLElBQUl0SSxFQUNoQ2pCLEVBQ0FVLEdBRUY2SSxHQUFzQk8sbUJBRXRCLElBQU1ILEdBQXdCLElBQUkxSSxFQUNoQ2pCLEVBQ0FjLEdBSUYsU0FBU2lILEdBQWNnQyxFQUFPN0UsR0FDNUI2RSxFQUFNaEMsY0FBYzdDLEdBSHRCeUUsR0FBc0JHLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbWVzdG8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL21lc3RvL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgZGVmaW5pdGlvbikge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmosIHByb3ApIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApOyB9IiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6ICfQkNGA0YXRi9C3JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2Fya2h5ei5qcGcnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ9Cn0LXQu9GP0LHQuNC90YHQutCw0Y8g0L7QsdC70LDRgdGC0YwnLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvY2hlbHlhYmluc2stb2JsYXN0LmpwZycsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JjQstCw0L3QvtCy0L4nLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGcnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ9Ca0LDQvNGH0LDRgtC60LAnLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2FtY2hhdGthLmpwZycsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0KXQvtC70LzQvtCz0L7RgNGB0LrQuNC5INGA0LDQudC+0L0nLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2hvbG1vZ29yc2t5LXJheW9uLmpwZycsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JHQsNC50LrQsNC7JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGcnLFxuICB9LFxuXTtcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogJy5mb3JtJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5mb3JtX19pbnB1dCcsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLmZvcm1fX3N1Ym1pdCcsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdidXR0b25fZGlzYWJsZWQnLFxuICBpbnB1dEVycm9yQ2xhc3M6ICdmb3JtX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ2Zvcm1fX2lucHV0LWVycm9yX2FjdGl2ZScsXG59O1xuXG5leHBvcnQgY29uc3QgZWRpdEluZm9CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX3R5cGVfZWRpdCcpO1xuZXhwb3J0IGNvbnN0IGVkaXRJbmZvRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAnLnByb2ZpbGUtZWRpdF9fZm9ybSdcbik7XG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gZWRpdEluZm9Gb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J25hbWUnXVwiKTtcbmV4cG9ydCBjb25zdCBiaW9JbnB1dCA9IGVkaXRJbmZvRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIltuYW1lPSdiaW8nXVwiKTtcbmV4cG9ydCBjb25zdCBhZGRQbGFjZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25fdHlwZV9hZGQnKTtcbmV4cG9ydCBjb25zdCBhZGRQbGFjZUZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYWNlLWFkZF9fZm9ybScpO1xuZXhwb3J0IGNvbnN0IGFkZFBsYWNlUG9wdXBTZWxlY3RvciA9ICcucGxhY2UtYWRkJztcbmV4cG9ydCBjb25zdCBlZGl0SW5mb1BvcHVwU2VsZWN0b3IgPSAnLnByb2ZpbGUtZWRpdCc7XG5leHBvcnQgY29uc3QgY29uZmlybURlbGV0aW9uUG9wdXBTZWxlY3RvciA9ICcuY2FyZC1kZWxldGUtY29uZmlybWF0aW9uJztcbmV4cG9ydCBjb25zdCBwb3B1cEZ1bGxQaG90b1NlbGVjdG9yID0gJy5wbGFjZS1mdWxsLXBob3RvJztcbmV4cG9ydCBjb25zdCBjYXJkVGVtcGxhdGVTZWxlY3RvciA9ICcuY2FyZC10ZW1wbGF0ZSc7XG5leHBvcnQgY29uc3QgY2FyZHNDb250YWluZXJTZWxlY3RvciA9ICcucGxhY2VzJztcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZVNlbGVjdG9yID0gJy5wcm9maWxlX19uYW1lJztcbmV4cG9ydCBjb25zdCBwcm9maWxlQmlvU2VsZWN0b3IgPSAnLnByb2ZpbGVfX2Jpbyc7XG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhclNlbGVjdG9yID0gJy5wcm9maWxlX19hdmF0YXInO1xuZXhwb3J0IGNvbnN0IHVzZXJEYXRhU2VsZWN0b3JzID0ge1xuICBwcm9maWxlTmFtZVNlbGVjdG9yLFxuICBwcm9maWxlQmlvU2VsZWN0b3IsXG4gIHByb2ZpbGVBdmF0YXJTZWxlY3Rvcixcbn07XG5leHBvcnQgY29uc3QgZGVsZXRlUGxhY2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX3R5cGVfZGVsZXRlJyk7XG5leHBvcnQgY29uc3QgZGVsZXRlUGxhY2VQb3B1cFNlbGVjdG9yID0gJy5wbGFjZV9fZGVsZXRlJztcbmV4cG9ydCBjb25zdCB1cGRhdGVBdmF0YXJQb3B1cFNlbGVjdG9yID0gJy5hdmF0YXItdXBkYXRlJztcbmV4cG9ydCBjb25zdCB1cGRhdGVQcm9maWxlQXZhdGFyQnV0dG9uID1cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhcicpO1xuZXhwb3J0IGNvbnN0IHVwZGF0ZUF2YXRhckZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgJy5hdmF0YXItdXBkYXRlX19mb3JtJ1xuKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICAjZm9ybVNlbGVjdG9yO1xuICAjaW5wdXRTZWxlY3RvcjtcbiAgI3N1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAjaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgI2lucHV0RXJyb3JDbGFzcztcbiAgI2Vycm9yQ2xhc3M7XG4gICNmb3JtRWxlbWVudDtcbiAgI2lucHV0TGlzdDtcbiAgI2J1dHRvbjtcblxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy4jZm9ybVNlbGVjdG9yID0gY29uZmlnLmZvcm1TZWxlY3RvcjtcbiAgICB0aGlzLiNpbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy4jc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy4jaW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuI2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy4jZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xuICAgIHRoaXMuI2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy4jaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuI2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy4jaW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuI2J1dHRvbiA9IHRoaXMuI2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy4jc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG5cbiAgI2NoZWNrSW5wdXRWYWxpZGl0eSA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy4jc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiNoaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfTtcblxuICAjc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpID0+IHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLiNmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLiNpbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLiNlcnJvckNsYXNzKTtcbiAgfTtcblxuICAjaGlkZUlucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy4jZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy4jaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLiNlcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgfTtcblxuICBoaWRlRXJyb3IgPSAoKSA9PiB7XG4gICAgdGhpcy4jaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy4jaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICAgIHRoaXMuI3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgI3NldEZvcm1FdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICB0aGlzLiN0b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuI2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy4jY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuI3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICAjdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuI2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLiNidXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLiNpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuI2J1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuI2J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuI2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy4jYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICB9XG4gIH07XG5cbiAgI2hhc0ludmFsaWRJbnB1dCA9ICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy4jaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH07XG5cbiAgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcbiAgICB0aGlzLiNmb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuI3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgfSk7XG4gICAgdGhpcy4jc2V0Rm9ybUV2ZW50TGlzdGVuZXJzKCk7XG4gIH07XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgI3JlbmRlcmVkSXRlbXM7XG4gICNyZW5kZXJlcjtcbiAgI2NvbnRhaW5lcjtcblxuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy4jcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLiNjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKHJlbmRlcmVkSXRlbXMpIHtcbiAgICByZW5kZXJlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuI3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50LCBvcmRlciA9IHRydWUpIHtcbiAgICBpZiAob3JkZXIpIHtcbiAgICAgIHRoaXMuI2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuI2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgbXlVc2VySWQgfSBmcm9tICcuLi9wYWdlcy9pbmRleC5qcyc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgI25hbWU7XG4gICNsaW5rO1xuICAjdGVtcGxhdGVTZWxlY3RvcjtcbiAgI2NhcmQ7XG4gICNkZWxldGVCdXR0b247XG4gICNsaWtlQnV0dG9uO1xuICAjcGxhY2VQaG90bztcbiAgI2hhbmRsZUNhcmRDbGljaztcbiAgI2xpa2VzQ291bnQ7XG4gICNvd25lcjtcbiAgI2hhbmRsZUNhcmREZWxldGU7XG4gICNjYXJkSWQ7XG4gICNsaWtlcztcbiAgI2hhbmRsZUNhcmRMaWtlO1xuICAjbGlrZWQ7XG4gICNkYXRhO1xuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBkYXRhLFxuICAgIHRlbXBsYXRlU2VsZWN0b3IsXG4gICAgaGFuZGxlQ2FyZENsaWNrLFxuICAgIGhhbmRsZUNhcmREZWxldGUsXG4gICAgaGFuZGxlQ2FyZExpa2UsXG4gIH0pIHtcbiAgICB0aGlzLiNuYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuI2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy4jb3duZXIgPSBkYXRhLm93bmVyLl9pZDtcbiAgICB0aGlzLiNjYXJkSWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLiNsaWtlcyA9IGRhdGEubGlrZXM7XG4gICAgdGhpcy4jbGlrZXNDb3VudCA9IGRhdGEubGlrZXMubGVuZ3RoO1xuICAgIHRoaXMuI3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xuICAgIHRoaXMuI2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLiNoYW5kbGVDYXJkRGVsZXRlID0gaGFuZGxlQ2FyZERlbGV0ZTtcbiAgICB0aGlzLiNoYW5kbGVDYXJkTGlrZSA9IGhhbmRsZUNhcmRMaWtlO1xuICAgIHRoaXMuI2RhdGEgPSBkYXRhO1xuICB9XG5cbiAgZ2V0Q2FyZElkKCkge1xuICAgIHJldHVybiB0aGlzLiNjYXJkSWQ7XG4gIH1cblxuICAjZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy4jdGVtcGxhdGVTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZScpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIGlzTGlrZWQoKSB7XG4gICAgLy8gY29uc29sZS5sb2coJzEnKTtcbiAgICBjb25zb2xlLmxvZyh0aGlzLiNsaWtlcyk7XG4gICAgcmV0dXJuIHRoaXMuI2xpa2VkO1xuICAgIC8vIHJldHVybiB0aGlzLiNsaWtlcy5zb21lKChlbGVtZW50KSA9PiB7XG4gICAgLy8gICAvLyBkZWJ1Z2dlcjtcbiAgICAvLyAgIHJldHVybiBlbGVtZW50Ll9pZCA9PT0gbXlVc2VySWQ7XG4gICAgLy8gfSk7XG4gIH1cblxuICBzZXRMaWtlKGRhdGEpIHtcbiAgICB0aGlzLiNjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZV9fbGlrZXMtY291bnQnKS50ZXh0Q29udGVudCA9XG4gICAgICBkYXRhLmxpa2VzLmxlbmd0aDtcbiAgICB0aGlzLiNsaWtlZCA9IGRhdGEubGlrZXMuc29tZSgoZWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuIGVsZW1lbnQuX2lkID09PSBteVVzZXJJZDtcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZyhkYXRhLmxpa2VzLmxlbmd0aCk7XG4gICAgaWYgKHRoaXMuI2xpa2VkKSB7XG4gICAgICB0aGlzLiNsaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3BsYWNlX19saWtlX2FjdGl2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiNsaWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3BsYWNlX19saWtlX2FjdGl2ZScpO1xuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZUNhcmQoKSB7XG4gICAgdGhpcy4jY2FyZCA9IHRoaXMuI2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy4jcGxhY2VQaG90byA9IHRoaXMuI2NhcmQucXVlcnlTZWxlY3RvcignLnBsYWNlX19waG90bycpO1xuICAgIHRoaXMuI3BsYWNlUGhvdG8uc3JjID0gdGhpcy4jbGluaztcbiAgICB0aGlzLiNwbGFjZVBob3RvLmFsdCA9IHRoaXMuI25hbWU7XG4gICAgdGhpcy4jY2FyZC5xdWVyeVNlbGVjdG9yKCcucGxhY2VfX3RpdGxlJykuaW5uZXJUZXh0ID0gdGhpcy4jbmFtZTtcbiAgICB0aGlzLiNkZWxldGVCdXR0b24gPSB0aGlzLiNjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZV9fZGVsZXRlJyk7XG4gICAgdGhpcy4jbGlrZUJ1dHRvbiA9IHRoaXMuI2NhcmQucXVlcnlTZWxlY3RvcignLnBsYWNlX19saWtlJyk7XG4gICAgdGhpcy5zZXRMaWtlKHRoaXMuI2RhdGEpO1xuICAgIC8vIHRoaXMuI2NhcmQucXVlcnlTZWxlY3RvcignLnBsYWNlX19saWtlcy1jb3VudCcpLnRleHRDb250ZW50ID1cbiAgICAvLyAgIHRoaXMuI2xpa2VzQ291bnQ7XG4gICAgaWYgKHRoaXMuI293bmVyID09PSBteVVzZXJJZCkge1xuICAgICAgdGhpcy4jZGVsZXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3BsYWNlX19kZWxldGVfYWN0aXZlJyk7XG4gICAgfVxuICAgIC8vIHRoaXMuI2xpa2VzLnNvbWUoKGVsZW1lbnQpID0+IHtcbiAgICAvLyAgIGlmIChlbGVtZW50Ll9pZCA9PT0gbXlVc2VySWQpIHtcbiAgICAvLyAgICAgdGhpcy4jbGlrZUNhcmQoKTtcbiAgICAvLyAgIH1cbiAgICAvLyB9KTtcbiAgICB0aGlzLiNzZXRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLiNjYXJkO1xuICB9XG5cbiAgI3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuI2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuI2hhbmRsZUNhcmREZWxldGUodGhpcyk7XG4gICAgfSk7XG4gICAgdGhpcy4jbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuI2hhbmRsZUNhcmRMaWtlKHRoaXMpO1xuICAgICAgLy8gdGhpcy4jbGlrZUNhcmQoKTtcbiAgICB9KTtcbiAgICB0aGlzLiNwbGFjZVBob3RvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy4jaGFuZGxlQ2FyZENsaWNrKHRoaXMuI25hbWUsIHRoaXMuI2xpbmspO1xuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLiNjYXJkLnJlbW92ZSgpO1xuICB9XG5cbiAgI2xpa2VDYXJkKCkge1xuICAgIHRoaXMuI2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgncGxhY2VfX2xpa2VfYWN0aXZlJyk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgI3BvcHVwO1xuXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLiNwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuI3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLiNoYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLiNwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy4jaGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgI2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLiNwb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLiNwb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICAjcG9wdXA7XG4gICNmdWxsUGhvdG9JbWFnZTtcbiAgI2Z1bGxQaG90b0NhcHRpb247XG5cbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuI3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLiNmdWxsUGhvdG9JbWFnZSA9IHRoaXMuI3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAnLnBsYWNlLWZ1bGwtcGhvdG9fX2ltYWdlJ1xuICAgICk7XG4gICAgdGhpcy4jZnVsbFBob3RvQ2FwdGlvbiA9IHRoaXMuI3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAnLnBsYWNlLWZ1bGwtcGhvdG9fX2NhcHRpb24nXG4gICAgKTtcbiAgfVxuXG4gIG9wZW4obmFtZSwgbGluaykge1xuICAgIHRoaXMuI2Z1bGxQaG90b0ltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy4jZnVsbFBob3RvSW1hZ2UuYWx0ID0gbmFtZTtcbiAgICB0aGlzLiNmdWxsUGhvdG9DYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgI2hhbmRsZUZvcm1TdWJtaXQ7XG4gICNmb3JtVmFsdWVzO1xuICAjaW5wdXRMaXN0O1xuICAjcG9wdXA7XG4gICNmb3JtO1xuICAjc3VibWl0QnV0dG9uO1xuXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLiNwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy4jaGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy4jZm9ybSA9IHRoaXMuI3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XG4gICAgdGhpcy4jaW5wdXRMaXN0ID0gdGhpcy4jcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnLmZvcm1fX2lucHV0Jyk7XG4gICAgdGhpcy4jc3VibWl0QnV0dG9uID0gdGhpcy4jcG9wdXAucXVlcnlTZWxlY3RvcignLmJ1dHRvbl90eXBlX3NhdmUnKTtcbiAgfVxuXG4gICNnZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLiNmb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy4jaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLiNmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuI2Zvcm1WYWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLiNmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy4jaGFuZGxlRm9ybVN1Ym1pdCh0aGlzLiNnZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLiNmb3JtLnJlc2V0KCk7XG4gIH1cblxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuI3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XG4gICAgICBjb25zb2xlLmxvZygnU2F2aW5nJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuI3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QuNGC0YwnO1xuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICAjcHJvZmlsZU5hbWU7XG4gICNwcm9maWxlQmlvO1xuICAjcHJvZmlsZUF2YXRhcjtcbiAgI2F2YXRhcjtcbiAgI2lkO1xuXG4gIGNvbnN0cnVjdG9yKHVzZXJEYXRhU2VsZWN0b3JzKSB7XG4gICAgdGhpcy4jcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdXNlckRhdGFTZWxlY3RvcnMucHJvZmlsZU5hbWVTZWxlY3RvclxuICAgICk7XG4gICAgdGhpcy4jcHJvZmlsZUJpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB1c2VyRGF0YVNlbGVjdG9ycy5wcm9maWxlQmlvU2VsZWN0b3JcbiAgICApO1xuICAgIHRoaXMuI3Byb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdXNlckRhdGFTZWxlY3RvcnMucHJvZmlsZUF2YXRhclNlbGVjdG9yXG4gICAgKTtcbiAgICAvLyB0aGlzLiNhdmF0YXIgPVxuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuI3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxuICAgICAgYmlvOiB0aGlzLiNwcm9maWxlQmlvLnRleHRDb250ZW50LFxuICAgICAgYXZhdGFyOiB0aGlzLiNwcm9maWxlQXZhdGFyLnN0eWxlLmJhY2tncm91bmRJbWFnZSxcbiAgICAgIC8vIGlkOiB0aGlzLiNpZCxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8obmV3VXNlckRhdGEpIHtcbiAgICB0aGlzLiNwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5ld1VzZXJEYXRhLm5hbWU7XG4gICAgdGhpcy4jcHJvZmlsZUJpby50ZXh0Q29udGVudCA9IG5ld1VzZXJEYXRhLmJpbztcblxuICAgIGNvbnNvbGUubG9nKG5ld1VzZXJEYXRhLmF2YXRhcik7XG4gICAgLy8gdGhpcy4jaWQgPSBuZXdVc2VyRGF0YS5pZDtcbiAgICAvLyBjb25zb2xlLmxvZyhuZXdVc2VyRGF0YS5pZCk7XG4gICAgLy8gY29uc29sZS5sb2codGhpcy4jaWQpO1xuICB9XG5cbiAgc2V0QXZhdGFyKGRhdGEpIHtcbiAgICB0aGlzLiNwcm9maWxlQXZhdGFyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIGAke2RhdGEuYXZhdGFyfWAgKyAnKSc7XG4gICAgY29uc29sZS5sb2coZGF0YS5hdmF0YXIpO1xuICB9XG59XG4iLCIvLyBpbXBvcnQgeyBuYW1lSW5wdXQsIGJpb0lucHV0IH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgI2Jhc2VVcmw7XG4gICNoZWFkZXJzO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLiNiYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xuICAgIHRoaXMuI2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XG4gIH1cblxuICAjaGFuZGxlUmVzcG9uc2UgPSAocmVzcG9uc2UpID0+IHtcbiAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICB9XG4gIH07XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLiNiYXNlVXJsICsgJy9jYXJkcycsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuI2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLiNoYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICBnZXRVc2VyRGF0YSgpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy4jYmFzZVVybCArICcvdXNlcnMvbWUnLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLiNoZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy4jaGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgc2F2ZVVzZXJEYXRhKGlucHV0RGF0YSkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLiNiYXNlVXJsICsgJy91c2Vycy9tZScsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuI2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGlucHV0RGF0YS5uYW1lLFxuICAgICAgICBhYm91dDogaW5wdXREYXRhLmJpbyxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy4jaGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgYWRkTmV3Q2FyZChjYXJkRGF0YSkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLiNiYXNlVXJsICsgJy9jYXJkcycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczogdGhpcy4jaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogY2FyZERhdGEubmFtZSxcbiAgICAgICAgbGluazogY2FyZERhdGEubGluayxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy4jaGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy4jYmFzZVVybCArIGAvY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuI2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLiNoYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICBsaWtlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy4jYmFzZVVybCArIGAvY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuI2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLiNoYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICBkaXNsaWtlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy4jYmFzZVVybCArIGAvY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuI2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLiNoYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICB1cGRhdGVBdmF0YXIoaW5wdXRMaW5rKSB7XG4gICAgY29uc29sZS5sb2coaW5wdXRMaW5rKTtcbiAgICByZXR1cm4gZmV0Y2godGhpcy4jYmFzZVVybCArIGAvdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy4jaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGlucHV0TGluayksXG4gICAgfSkudGhlbih0aGlzLiNoYW5kbGVSZXNwb25zZSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICAjaGFuZGxlRm9ybVN1Ym1pdDtcbiAgI2Zvcm1WYWx1ZXM7XG4gICNpbnB1dExpc3Q7XG4gICNwb3B1cDtcbiAgI2Zvcm07XG4gICNzdWJtaXRCdXR0b247XG5cbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuI3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLiNmb3JtID0gdGhpcy4jcG9wdXAucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcbiAgICB0aGlzLiNzdWJtaXRCdXR0b24gPSB0aGlzLiNwb3B1cC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX3R5cGVfc2F2ZScpO1xuICB9XG5cbiAgc2V0Rm9ybUhhbmRsZXIoaGFuZGxlcikge1xuICAgIHRoaXMuI2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVyO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy4jZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuI2hhbmRsZUZvcm1TdWJtaXQoKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxuXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nKSB7XG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgdGhpcy4jc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gJ9Cj0LTQsNC70LXQvdC40LUuLi4nO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiNzdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSAn0JTQsCc7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgJy4vaW5kZXguY3NzJztcblxuaW1wb3J0IHtcbiAgdmFsaWRhdGlvbkNvbmZpZyxcbiAgZWRpdEluZm9CdXR0b24sXG4gIGFkZFBsYWNlQnV0dG9uLFxuICBhZGRQbGFjZUZvcm1FbGVtZW50LFxuICBhZGRQbGFjZVBvcHVwU2VsZWN0b3IsXG4gIGNhcmRUZW1wbGF0ZVNlbGVjdG9yLFxuICBjYXJkc0NvbnRhaW5lclNlbGVjdG9yLFxuICBlZGl0SW5mb0Zvcm1FbGVtZW50LFxuICBlZGl0SW5mb1BvcHVwU2VsZWN0b3IsXG4gIHBvcHVwRnVsbFBob3RvU2VsZWN0b3IsXG4gIGJpb0lucHV0LFxuICBuYW1lSW5wdXQsXG4gIHVzZXJEYXRhU2VsZWN0b3JzLFxuICBwcm9maWxlQXZhdGFyU2VsZWN0b3IsXG4gIGNvbmZpcm1EZWxldGlvblBvcHVwU2VsZWN0b3IsXG4gIGRlbGV0ZVBsYWNlQnV0dG9uLFxuICBkZWxldGVQbGFjZVBvcHVwU2VsZWN0b3IsXG4gIHVwZGF0ZUF2YXRhclBvcHVwU2VsZWN0b3IsXG4gIHVwZGF0ZVByb2ZpbGVBdmF0YXJCdXR0b24sXG4gIHVwZGF0ZUF2YXRhckZvcm1FbGVtZW50LFxufSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xuXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xuaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzJztcblxuZXhwb3J0IGxldCBteVVzZXJJZCA9IG51bGw7XG4vLyBsZXQgY2FyZElkID0gbnVsbDtcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTI3JyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICczNzU4MGUyOS1jYTQzLTRlNjAtYmZjNC05NzMxZDYxNjc2OTEnLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gIH0sXG59KTtcblxuLy8/IFByb21pc2UuYWxsO1xuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGl0ZW0pIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHtcbiAgICBkYXRhOiBpdGVtLFxuICAgIHRlbXBsYXRlU2VsZWN0b3I6IGNhcmRUZW1wbGF0ZVNlbGVjdG9yLFxuICAgIGhhbmRsZUNhcmRDbGljazogKG5hbWUsIGxpbmspID0+IHtcbiAgICAgIHBvcHVwRnVsbFBob3RvLm9wZW4obmFtZSwgbGluayk7XG4gICAgfSxcbiAgICBoYW5kbGVDYXJkRGVsZXRlOiAoY2FyZEluc3RhbmNlKSA9PiB7XG4gICAgICBkZWxldGVDYXJkKGNhcmRJbnN0YW5jZSk7XG4gICAgfSxcbiAgICBoYW5kbGVDYXJkTGlrZTogKGNhcmRJbnN0YW5jZSkgPT4ge1xuICAgICAgbGlrZUNhcmQoY2FyZEluc3RhbmNlKTtcbiAgICB9LFxuICB9KTtcbiAgcmV0dXJuIGNhcmQuY3JlYXRlQ2FyZCgpO1xufVxuXG5mdW5jdGlvbiBsaWtlQ2FyZChjYXJkKSB7XG4gIGNvbnNvbGUubG9nKGNhcmQuaXNMaWtlZCgpKTtcbiAgY29uc3QgY2hlY2tGb3JMaWtlID0gY2FyZC5pc0xpa2VkKClcbiAgICA/IGFwaS5kaXNsaWtlQ2FyZChjYXJkLmdldENhcmRJZCgpKVxuICAgIDogYXBpLmxpa2VDYXJkKGNhcmQuZ2V0Q2FyZElkKCkpO1xuICAvLyBjb25zb2xlLmxvZyhhcGkuZGlzbGlrZUNhcmQoY2FyZC5nZXRDYXJkSWQoKSkpO1xuICBjaGVja0Zvckxpa2VcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgY2FyZC5zZXRMaWtlKGRhdGEpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xuICAvLyBjb25zb2xlLmxvZyhjaGVja0Zvckxpa2UpO1xuICAvLyBjYXJkLmxpa2VzLnNvbWUoKGVsZW1lbnQpID0+IHtcbiAgLy8gICBpZiAoZWxlbWVudC5faWQgPT09IG15VXNlcklkKSB7XG4gIC8vICAgICBhcGkubGlrZUNhcmQoY2FyZC5jYXJkSWQpO1xuICAvLyAgIH0gZWxzZSB7XG4gIC8vICAgICBhcGkuZGlzbGlrZUNhcmQoY2FyZC5jYXJkSWQpO1xuICAvLyAgIH1cbiAgLy8gfSk7XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZUNhcmQoY2FyZCkge1xuICBwb3B1cERlbGV0ZVBsYWNlLm9wZW4oKTtcbiAgcG9wdXBEZWxldGVQbGFjZS5zZXRGb3JtSGFuZGxlcigoKSA9PiB7XG4gICAgcmVuZGVyTG9hZGluZyhwb3B1cERlbGV0ZVBsYWNlLCB0cnVlKTtcbiAgICBhcGlcbiAgICAgIC5kZWxldGVDYXJkKGNhcmQuZ2V0Q2FyZElkKCkpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQuZGVsZXRlQ2FyZCgpO1xuICAgICAgICBwb3B1cERlbGV0ZVBsYWNlLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXG4gICAgICAuZmluYWxseSgoKSA9PiByZW5kZXJMb2FkaW5nKHBvcHVwRGVsZXRlUGxhY2UsIGZhbHNlKSk7XG4gIH0pO1xufVxuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh1c2VyRGF0YVNlbGVjdG9ycyk7XG5nZXRVc2VyRGF0YUZyb21TZXJ2ZXIoKTtcblxuY29uc3QgY2FyZHNQcm9taXNlID0gYXBpLmdldEluaXRpYWxDYXJkcygpO1xuXG5jb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY2FyZHNMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChpdGVtKSk7XG4gICAgfSxcbiAgfSxcbiAgY2FyZHNDb250YWluZXJTZWxlY3RvclxuKTtcblxuY2FyZHNQcm9taXNlXG4gIC50aGVuKChkYXRhKSA9PiB7XG4gICAgY2FyZHNMaXN0LnJlbmRlckl0ZW1zKGRhdGEpO1xuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycik7XG4gIH0pO1xuXG5mdW5jdGlvbiBnZXRVc2VyRGF0YUZyb21TZXJ2ZXIoKSB7XG4gIGNvbnN0IHByb2ZpbGVEYXRhUHJvbWlzZSA9IGFwaS5nZXRVc2VyRGF0YSgpO1xuICBwcm9maWxlRGF0YVByb21pc2VcbiAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICBteVVzZXJJZCA9IHJlc3VsdC5faWQ7XG4gICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xuICAgICAgICBuYW1lOiByZXN1bHQubmFtZSxcbiAgICAgICAgYmlvOiByZXN1bHQuYWJvdXQsXG4gICAgICAgIC8vIGF2YXRhcjogcmVzdWx0LmF2YXRhcixcbiAgICAgICAgaWQ6IHJlc3VsdC5faWQsXG4gICAgICB9KTtcbiAgICAgIHVzZXJJbmZvLnNldEF2YXRhcihyZXN1bHQpO1xuICAgICAgLy8gZWRpdEluZm9Gb3JtVmFsaWRhdG9yLmhpZGVFcnJvcigpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG59XG5cbmNvbnN0IHBvcHVwRnVsbFBob3RvID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwRnVsbFBob3RvU2VsZWN0b3IpO1xucG9wdXBGdWxsUGhvdG8uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcG9wdXBFZGl0SW5mbyA9IG5ldyBQb3B1cFdpdGhGb3JtKGVkaXRJbmZvUG9wdXBTZWxlY3RvciwgKGlucHV0RGF0YSkgPT4ge1xuICByZW5kZXJMb2FkaW5nKHBvcHVwRWRpdEluZm8sIHRydWUpO1xuXG4gIGFwaVxuICAgIC5zYXZlVXNlckRhdGEoaW5wdXREYXRhKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGlucHV0RGF0YSk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgICAuZmluYWxseSgoKSA9PiByZW5kZXJMb2FkaW5nKHBvcHVwRWRpdEluZm8sIGZhbHNlKSk7XG4gIHBvcHVwRWRpdEluZm8uY2xvc2UoKTtcbn0pO1xuXG5wb3B1cEVkaXRJbmZvLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5lZGl0SW5mb0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgcG9wdXBFZGl0SW5mby5vcGVuKCk7XG4gIGNvbnN0IHByb2ZpbGVEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgbmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZURhdGEubmFtZTtcbiAgYmlvSW5wdXQudmFsdWUgPSBwcm9maWxlRGF0YS5iaW87XG4gIGVkaXRJbmZvRm9ybVZhbGlkYXRvci5oaWRlRXJyb3IoKTtcbn0pO1xuXG5jb25zdCBwb3B1cEFkZFBsYWNlID0gbmV3IFBvcHVwV2l0aEZvcm0oYWRkUGxhY2VQb3B1cFNlbGVjdG9yLCAoaW5wdXREYXRhKSA9PiB7XG4gIHJlbmRlckxvYWRpbmcocG9wdXBBZGRQbGFjZSwgdHJ1ZSk7XG4gIGlucHV0RGF0YS5saWtlcyA9IFtdO1xuICBpbnB1dERhdGEub3duZXIgPSB7IF9pZDogbXlVc2VySWQgfTtcbiAgLy8gcmVuZGVyTG9hZGluZyhwb3B1cEFkZFBsYWNlLCB0cnVlKTtcbiAgYXBpXG4gICAgLmFkZE5ld0NhcmQoaW5wdXREYXRhKVxuICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIGlucHV0RGF0YS5faWQgPSByZXN1bHQuX2lkO1xuICAgICAgY2FyZHNMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChpbnB1dERhdGEpLCBmYWxzZSk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHJlbmRlckxvYWRpbmcocG9wdXBBZGRQbGFjZSwgZmFsc2UpKTtcbiAgcG9wdXBBZGRQbGFjZS5jbG9zZSgpO1xufSk7XG5cbnBvcHVwQWRkUGxhY2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmFkZFBsYWNlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBwb3B1cEFkZFBsYWNlLm9wZW4oKTtcbiAgYWRkUGxhY2VGb3JtRWxlbWVudC5yZXNldCgpO1xuICBhZGRQbGFjZUZvcm1WYWxpZGF0b3IuaGlkZUVycm9yKCk7XG59KTtcblxuY29uc3QgcG9wdXBVcGRhdGVBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgdXBkYXRlQXZhdGFyUG9wdXBTZWxlY3RvcixcbiAgKGlucHV0KSA9PiB7XG4gICAgY29uc29sZS5sb2coYXBpLnVwZGF0ZUF2YXRhcihpbnB1dCkpO1xuICAgIGFwaVxuICAgICAgLnVwZGF0ZUF2YXRhcihpbnB1dClcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgdXNlckluZm8uc2V0QXZhdGFyKHJlc3VsdCk7XG4gICAgICAgIC8vIGlucHV0RGF0YS5faWQgPSByZXN1bHQuX2lkO1xuICAgICAgICAvLyBjYXJkc0xpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGlucHV0RGF0YSksIGZhbHNlKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gICAgcG9wdXBVcGRhdGVBdmF0YXIuY2xvc2UoKTtcbiAgfVxuKTtcbnBvcHVwVXBkYXRlQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbnVwZGF0ZVByb2ZpbGVBdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIHBvcHVwVXBkYXRlQXZhdGFyLm9wZW4oKTtcbn0pO1xuXG5jb25zdCBwb3B1cERlbGV0ZVBsYWNlID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcbiAgY29uZmlybURlbGV0aW9uUG9wdXBTZWxlY3RvclxuKTtcblxucG9wdXBEZWxldGVQbGFjZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCB1cGRhdGVBdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRpb25Db25maWcsXG4gIHVwZGF0ZUF2YXRhckZvcm1FbGVtZW50XG4pO1xudXBkYXRlQXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGVkaXRJbmZvRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB2YWxpZGF0aW9uQ29uZmlnLFxuICBlZGl0SW5mb0Zvcm1FbGVtZW50XG4pO1xuZWRpdEluZm9Gb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgYWRkUGxhY2VGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRpb25Db25maWcsXG4gIGFkZFBsYWNlRm9ybUVsZW1lbnRcbik7XG5hZGRQbGFjZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5mdW5jdGlvbiByZW5kZXJMb2FkaW5nKHBvcHVwLCBpc0xvYWRpbmcpIHtcbiAgcG9wdXAucmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpO1xufVxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiZWRpdEluZm9CdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJlZGl0SW5mb0Zvcm1FbGVtZW50IiwibmFtZUlucHV0IiwiYmlvSW5wdXQiLCJhZGRQbGFjZUJ1dHRvbiIsImFkZFBsYWNlRm9ybUVsZW1lbnQiLCJ1cGRhdGVQcm9maWxlQXZhdGFyQnV0dG9uIiwidXBkYXRlQXZhdGFyRm9ybUVsZW1lbnQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwicmVtb3ZlIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzb21lIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJ0aGlzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwicmVuZGVyZWRJdGVtcyIsIml0ZW0iLCJlbGVtZW50Iiwib3JkZXIiLCJhcHBlbmQiLCJwcmVwZW5kIiwiQ2FyZCIsImRhdGEiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlQ2FyZERlbGV0ZSIsImhhbmRsZUNhcmRMaWtlIiwibmFtZSIsImxpbmsiLCJvd25lciIsIl9pZCIsImxpa2VzIiwibGVuZ3RoIiwiY29uc29sZSIsImxvZyIsIm15VXNlcklkIiwic3JjIiwiYWx0IiwiaW5uZXJUZXh0Iiwic2V0TGlrZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInJlc2V0IiwiaXNMb2FkaW5nIiwiaW5wdXQiLCJ2YWx1ZSIsIlVzZXJJbmZvIiwidXNlckRhdGFTZWxlY3RvcnMiLCJwcm9maWxlTmFtZVNlbGVjdG9yIiwicHJvZmlsZUJpb1NlbGVjdG9yIiwicHJvZmlsZUF2YXRhclNlbGVjdG9yIiwiYmlvIiwiYXZhdGFyIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJuZXdVc2VyRGF0YSIsIkFwaSIsIm9wdGlvbnMiLCJyZXNwb25zZSIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJiYXNlVXJsIiwiaGVhZGVycyIsImZldGNoIiwidGhlbiIsImlucHV0RGF0YSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJjYXJkRGF0YSIsImNhcmRJZCIsImlucHV0TGluayIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsImhhbmRsZXIiLCJhcGkiLCJhdXRob3JpemF0aW9uIiwiY3JlYXRlQ2FyZCIsInBvcHVwRnVsbFBob3RvIiwib3BlbiIsImNhcmRJbnN0YW5jZSIsImNhcmQiLCJwb3B1cERlbGV0ZVBsYWNlIiwic2V0Rm9ybUhhbmRsZXIiLCJyZW5kZXJMb2FkaW5nIiwiZGVsZXRlQ2FyZCIsImdldENhcmRJZCIsImNhdGNoIiwiZXJyIiwiZmluYWxseSIsImlzTGlrZWQiLCJkaXNsaWtlQ2FyZCIsImxpa2VDYXJkIiwidXNlckluZm8iLCJnZXRVc2VyRGF0YSIsInJlc3VsdCIsInNldFVzZXJJbmZvIiwic2V0QXZhdGFyIiwiY2FyZHNQcm9taXNlIiwiZ2V0SW5pdGlhbENhcmRzIiwiY2FyZHNMaXN0IiwiYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwb3B1cEVkaXRJbmZvIiwic2F2ZVVzZXJEYXRhIiwicHJvZmlsZURhdGEiLCJnZXRVc2VySW5mbyIsImVkaXRJbmZvRm9ybVZhbGlkYXRvciIsImhpZGVFcnJvciIsInBvcHVwQWRkUGxhY2UiLCJhZGROZXdDYXJkIiwiYWRkUGxhY2VGb3JtVmFsaWRhdG9yIiwicG9wdXBVcGRhdGVBdmF0YXIiLCJ1cGRhdGVBdmF0YXIiLCJlbmFibGVWYWxpZGF0aW9uIiwicG9wdXAiXSwic291cmNlUm9vdCI6IiJ9