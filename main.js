!function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};e.d({},{Y:function(){return St}});var t={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},n=document.querySelector(".button_type_edit"),r=document.querySelector(".profile-edit__form"),o=r.querySelector("[name='name']"),i=r.querySelector("[name='bio']"),a=document.querySelector(".button_type_add"),l=document.querySelector(".place-add__form");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,f(e,t,"get"))}function s(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,f(e,t,"set"),n),n}function f(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}document.querySelector(".button_type_delete");var p=new WeakMap,h=new WeakMap,v=new WeakMap,d=new WeakMap,y=new WeakMap,w=new WeakMap,b=new WeakMap,m=new WeakMap,k=new WeakMap,g=new WeakMap,_=new WeakMap,E=new WeakMap,S=new WeakMap,O=new WeakMap,W=new WeakMap,M=function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p.set(this,{writable:!0,value:void 0}),h.set(this,{writable:!0,value:void 0}),v.set(this,{writable:!0,value:void 0}),d.set(this,{writable:!0,value:void 0}),y.set(this,{writable:!0,value:void 0}),w.set(this,{writable:!0,value:void 0}),b.set(this,{writable:!0,value:void 0}),m.set(this,{writable:!0,value:void 0}),k.set(this,{writable:!0,value:void 0}),g.set(this,{writable:!0,value:function(e){e.validity.valid?c(r,E).call(r,e):c(r,_).call(r,e,e.validationMessage)}}),_.set(this,{writable:!0,value:function(e,t){var n=c(r,b).querySelector(".".concat(e.id,"-error"));e.classList.add(c(r,y)),n.textContent=t,n.classList.add(c(r,w))}}),E.set(this,{writable:!0,value:function(e){var t=c(r,b).querySelector(".".concat(e.id,"-error"));e.classList.remove(c(r,y)),t.classList.remove(c(r,w)),t.textContent=""}}),u(this,"hideError",(function(){c(r,m).forEach((function(e){c(r,E).call(r,e),c(r,O).call(r)}))})),S.set(this,{writable:!0,value:function(){c(r,O).call(r),c(r,m).forEach((function(e){e.addEventListener("input",(function(){c(r,g).call(r,e),c(r,O).call(r)}))}))}}),O.set(this,{writable:!0,value:function(){c(r,W).call(r)?(c(r,k).classList.add(c(r,d)),c(r,k).setAttribute("disabled",!0)):(c(r,k).classList.remove(c(r,d)),c(r,k).removeAttribute("disabled"))}}),W.set(this,{writable:!0,value:function(){return c(r,m).some((function(e){return!e.validity.valid}))}}),u(this,"enableValidation",(function(){c(r,b).addEventListener("submit",(function(e){e.preventDefault(),c(r,O).call(r)})),c(r,S).call(r)})),s(this,p,t.formSelector),s(this,h,t.inputSelector),s(this,v,t.submitButtonSelector),s(this,d,t.inactiveButtonClass),s(this,y,t.inputErrorClass),s(this,w,t.errorClass),s(this,b,n),s(this,m,Array.from(c(this,b).querySelectorAll(c(this,h)))),s(this,k,c(this,b).querySelector(c(this,v)))};function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,P(e,t,"get"))}function j(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,P(e,t,"set"),n),n}function P(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var L=new WeakMap,q=new WeakMap,R=new WeakMap,x=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),L.set(this,{writable:!0,value:void 0}),q.set(this,{writable:!0,value:void 0}),R.set(this,{writable:!0,value:void 0}),j(this,q,r),j(this,R,document.querySelector(n))}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){T(t,q).call(t,e)}))}},{key:"addItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t?T(this,R).append(e):T(this,R).prepend(e)}}])&&C(t.prototype,n),e}();function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function B(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,A(e,t,"get"))}function U(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,A(e,t,"set"),n),n}function A(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var N=new WeakMap,H=new WeakMap,V=new WeakMap,F=new WeakMap,J=new WeakMap,z=new WeakMap,Y=new WeakMap,G=new WeakMap,K=new WeakMap,Q=new WeakMap,X=new WeakMap,Z=new WeakMap,$=new WeakSet,ee=new WeakSet,te=new WeakSet,ne=function(){function e(t){var n=t.data,r=t.templateSelector,o=t.handleCardClick,i=t.handleCardDelete;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),te.add(this),ee.add(this),$.add(this),N.set(this,{writable:!0,value:void 0}),H.set(this,{writable:!0,value:void 0}),V.set(this,{writable:!0,value:void 0}),F.set(this,{writable:!0,value:void 0}),J.set(this,{writable:!0,value:void 0}),z.set(this,{writable:!0,value:void 0}),Y.set(this,{writable:!0,value:void 0}),G.set(this,{writable:!0,value:void 0}),K.set(this,{writable:!0,value:void 0}),Q.set(this,{writable:!0,value:void 0}),X.set(this,{writable:!0,value:void 0}),Z.set(this,{writable:!0,value:void 0}),U(this,N,n.name),U(this,H,n.link),U(this,Q,n.owner._id),U(this,Z,n._id),n.likes.length?U(this,K,n.likes.length):U(this,K,0),U(this,V,r),U(this,G,o),U(this,X,i)}var t,n;return t=e,(n=[{key:"getCardId",value:function(){return B(this,Z)}},{key:"createCard",value:function(){return U(this,F,I(this,$,re).call(this)),U(this,Y,B(this,F).querySelector(".place__photo")),B(this,Y).src=B(this,H),B(this,Y).alt=B(this,N),B(this,F).querySelector(".place__title").innerText=B(this,N),U(this,J,B(this,F).querySelector(".place__delete")),U(this,z,B(this,F).querySelector(".place__like")),B(this,F).querySelector(".place__likes-count").textContent=B(this,K),B(this,Q)===St&&B(this,J).classList.remove("place__delete_active"),I(this,ee,oe).call(this),B(this,F)}},{key:"deleteCard",value:function(){B(this,F).remove()}}])&&D(t.prototype,n),e}();function re(){return document.querySelector(B(this,V)).content.querySelector(".place").cloneNode(!0)}function oe(){var e=this;B(this,J).addEventListener("click",(function(){B(e,X).call(e,e)})),B(this,z).addEventListener("click",(function(){I(e,te,ie).call(e)})),B(this,Y).addEventListener("click",(function(){B(e,G).call(e,B(e,N),B(e,H))}))}function ie(){B(this,z).classList.toggle("place__like_active")}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ue(e,t,"get"))}function ue(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ce=new WeakMap,se=new WeakMap,fe=function(){function e(t){var n,r,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ce.set(this,{writable:!0,value:void 0}),se.set(this,{writable:!0,value:function(e){"Escape"===e.key&&i.close()}}),n=this,r=ce,o=document.querySelector(t),function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(n,ue(n,r,"set"),o)}var t,n;return t=e,(n=[{key:"open",value:function(){le(this,ce).classList.add("popup_opened"),document.addEventListener("keydown",le(this,se))}},{key:"close",value:function(){le(this,ce).classList.remove("popup_opened"),document.removeEventListener("keydown",le(this,se))}},{key:"setEventListeners",value:function(){var e=this;le(this,ce).querySelector(".popup__close").addEventListener("click",(function(){e.close()})),le(this,ce).addEventListener("click",(function(t){t.target===t.currentTarget&&e.close()}))}}])&&ae(t.prototype,n),e}();function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t,n){return(ve="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=be(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ye(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?we(e):t}function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ge(e,t,"get"))}function ke(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ge(e,t,"set"),n),n}function ge(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var _e=new WeakMap,Ee=new WeakMap,Se=new WeakMap,Oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=be(r);if(o){var n=be(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ye(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),_e.set(we(t),{writable:!0,value:void 0}),Ee.set(we(t),{writable:!0,value:void 0}),Se.set(we(t),{writable:!0,value:void 0}),ke(we(t),_e,document.querySelector(e)),ke(we(t),Ee,me(we(t),_e).querySelector(".place-full-photo__image")),ke(we(t),Se,me(we(t),_e).querySelector(".place-full-photo__caption")),t}return t=a,(n=[{key:"open",value:function(e,t){me(this,Ee).src=t,me(this,Ee).alt=e,me(this,Se).textContent=e,ve(be(a.prototype),"open",this).call(this)}}])&&he(t.prototype,n),a}(fe);function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e,t,n){return(Ce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Le(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e,t){return!t||"object"!==We(t)&&"function"!=typeof t?Pe(e):t}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,xe(e,t,"get"))}function Re(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,xe(e,t,"set"),n),n}function xe(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var De=new WeakMap,Ie=new WeakMap,Be=new WeakMap,Ue=new WeakMap,Ae=new WeakMap,Ne=new WeakSet,He=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Le(r);if(o){var n=Le(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return je(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=i.call(this,e),Ne.add(Pe(n)),De.set(Pe(n),{writable:!0,value:void 0}),Ie.set(Pe(n),{writable:!0,value:void 0}),Be.set(Pe(n),{writable:!0,value:void 0}),Ue.set(Pe(n),{writable:!0,value:void 0}),Ae.set(Pe(n),{writable:!0,value:void 0}),Re(Pe(n),Ue,document.querySelector(e)),Re(Pe(n),De,t),Re(Pe(n),Ae,qe(Pe(n),Ue).querySelector(".form")),Re(Pe(n),Be,qe(Pe(n),Ue).querySelectorAll(".form__input")),n}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;qe(this,Ae).addEventListener("submit",(function(t){t.preventDefault(),qe(e,De).call(e,function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(e,Ne,Ve).call(e))})),Ce(Le(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){Ce(Le(a.prototype),"close",this).call(this),qe(this,Ae).reset()}}])&&Me(t.prototype,n),a}(fe);function Ve(){var e=this;return Re(this,Ie,{}),qe(this,Be).forEach((function(t){qe(e,Ie)[t.name]=t.value})),qe(this,Ie)}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ye(e,t,"get"))}function ze(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ye(e,t,"set"),n),n}function Ye(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Ge=new WeakMap,Ke=new WeakMap,Qe=new WeakMap,Xe=new WeakMap,Ze=new WeakMap,$e=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ge.set(this,{writable:!0,value:void 0}),Ke.set(this,{writable:!0,value:void 0}),Qe.set(this,{writable:!0,value:void 0}),Xe.set(this,{writable:!0,value:void 0}),Ze.set(this,{writable:!0,value:void 0}),ze(this,Ge,document.querySelector(t.profileNameSelector)),ze(this,Ke,document.querySelector(t.profileBioSelector)),ze(this,Qe,document.querySelector(t.profileAvatarSelector))}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:Je(this,Ge).textContent,bio:Je(this,Ke).textContent,avatar:Je(this,Xe),id:Je(this,Ze)}}},{key:"setUserInfo",value:function(e){Je(this,Ge).textContent=e.name,Je(this,Ke).textContent=e.bio}}])&&Fe(t.prototype,n),e}();function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,rt(e,t,"get"))}function nt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,rt(e,t,"set"),n),n}function rt(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ot=new WeakMap,it=new WeakMap,at=new WeakMap,lt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ot.set(this,{writable:!0,value:void 0}),it.set(this,{writable:!0,value:void 0}),at.set(this,{writable:!0,value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}}),nt(this,ot,t.baseUrl),nt(this,it,t.headers)}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return fetch(tt(this,ot)+"/cards",{headers:tt(this,it)}).then(tt(this,at))}},{key:"getUserData",value:function(){return fetch(tt(this,ot)+"/users/me",{headers:tt(this,it)}).then(tt(this,at))}},{key:"saveUserData",value:function(e){return fetch(tt(this,ot)+"/users/me",{method:"PATCH",headers:tt(this,it),body:JSON.stringify({name:e.name,about:e.bio})}).then(tt(this,at))}},{key:"addNewCard",value:function(e){return fetch(tt(this,ot)+"/cards",{method:"POST",headers:tt(this,it),body:JSON.stringify({name:e.name,link:e.link})}).then(tt(this,at))}},{key:"deleteCard",value:function(e){return fetch(tt(this,ot)+"/cards/".concat(e),{method:"DELETE",headers:tt(this,it)}).then(tt(this,at))}},{key:"likeCard",value:function(e){return fetch(tt(this,ot)+"/cards/likes/".concat(e),{method:"PUT",headers:tt(this,it)}).then(tt(this,at))}},{key:"dislikeCard",value:function(e){return fetch(tt(this,ot)+"/cards/likes/".concat(e),{method:"DELETE",headers:tt(this,it)}).then(tt(this,at))}}])&&et(t.prototype,n),e}();function ut(e){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function st(e,t,n){return(st="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pt(e,t){return!t||"object"!==ut(t)&&"function"!=typeof t?ht(e):t}function ht(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,wt(e,t,"get"))}function yt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,wt(e,t,"set"),n),n}function wt(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var bt=new WeakMap,mt=new WeakMap,kt=new WeakMap,gt=new WeakMap,_t=new WeakMap,Et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=vt(r);if(o){var n=vt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return pt(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),bt.set(ht(t),{writable:!0,value:void 0}),mt.set(ht(t),{writable:!0,value:void 0}),kt.set(ht(t),{writable:!0,value:void 0}),gt.set(ht(t),{writable:!0,value:void 0}),_t.set(ht(t),{writable:!0,value:void 0}),yt(ht(t),gt,document.querySelector(e)),yt(ht(t),_t,dt(ht(t),gt).querySelector(".form")),t}return t=a,(n=[{key:"setFormHandler",value:function(e){yt(this,bt,e)}},{key:"setEventListeners",value:function(){var e=this;dt(this,_t).addEventListener("submit",(function(t){t.preventDefault(),dt(e,bt).call(e)})),st(vt(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){st(vt(a.prototype),"close",this).call(this)}}])&&ct(t.prototype,n),a}(fe),St=null,Ot=new lt({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-27",headers:{authorization:"37580e29-ca43-4e60-bfc4-9731d6167691","Content-Type":"application/json"}});function Wt(e){return new ne({data:e,templateSelector:".card-template",handleCardClick:function(e,t){jt.open(e,t)},handleCardDelete:function(e){var t;t=e,qt.open(),qt.setFormHandler((function(){Ot.deleteCard(t.getCardId()).then((function(){t.deleteCard(),qt.close()}))}))}}).createCard()}var Mt=new $e({profileNameSelector:".profile__name",profileBioSelector:".profile__bio",profileAvatarSelector:".profile__avatar"});Ot.getUserData().then((function(e){St=e._id,Mt.setUserInfo({name:e.name,bio:e.about,avatar:e.avatar,id:e._id})})).catch((function(e){console.log(e)}));var Ct=Ot.getInitialCards(),Tt=new x({renderer:function(e){Tt.addItem(Wt(e))}},".places");Ct.then((function(e){Tt.renderItems(e)})).catch((function(e){console.log(e)}));var jt=new Oe(".place-full-photo");jt.setEventListeners();var Pt=new He(".profile-edit",(function(e){Mt.setUserInfo(e),Ot.saveUserData(e),Pt.close()}));Pt.setEventListeners(),n.addEventListener("click",(function(){Pt.open();var e=Mt.getUserInfo();o.value=e.name,i.value=e.bio,Rt.hideError()}));var Lt=new He(".place-add",(function(e){e.likes=[],e.owner={_id:St},Ot.addNewCard(e).then((function(t){e._id=t._id,Tt.addItem(Wt(e),!1)})).catch((function(e){console.log(e)})),Lt.close()}));Lt.setEventListeners(),a.addEventListener("click",(function(){Lt.open(),l.reset(),xt.hideError()}));var qt=new Et(".card-delete-confirmation");qt.setEventListeners();var Rt=new M(t,r);Rt.enableValidation();var xt=new M(t,l);xt.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUYsTUFxQmhCLElBQU1iLEdBQWlCLElBQUl2QyxHVjdEVyxxQlU4RHRDdUMsR0FBZXFCLG9CQUVmLElBQU1DLEdBQWdCLElBQUk1RCxHVmxFVyxpQlVrRTBCLFNBQUN5QixHQUM5RHFCLEdBQVNHLFlBQVl4QixHQUNyQlUsR0FBSTBCLGFBQWFwQyxHQUNqQm1DLEdBQWNqRSxXQUdoQmlFLEdBQWNELG9CQUNkOUgsRUFBZXVCLGlCQUFpQixTQUFTLFdBQ3ZDd0csR0FBY3JCLE9BQ2QsSUFBTXVCLEVBQWNoQixHQUFTaUIsY0FDN0I5SCxFQUFVbUUsTUFBUTBELEVBQVlsRixLQUM5QjFDLEVBQVNrRSxNQUFRMEQsRUFBWXBELElBQzdCc0QsR0FBc0JDLGVBR3hCLElBQU1DLEdBQWdCLElBQUlsRSxHVmxGVyxjVWtGMEIsU0FBQ3lCLEdBQzlEQSxFQUFVekMsTUFBUSxHQUNsQnlDLEVBQVUzQyxNQUFRLENBQUVDLElBQUtNLElBQ3pCOEMsR0FDR2dDLFdBQVcxQyxHQUNYRCxNQUFLLFNBQUN3QixHQUNMdkIsRUFBVTFDLElBQU1pRSxFQUFPakUsSUFDdkJ5RSxHQUFVQyxRQUFRcEIsR0FBV1osSUFBWSxNQUUxQ3lCLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsTUFFaEJlLEdBQWN2RSxXQUdoQnVFLEdBQWNQLG9CQUNkeEgsRUFBZWlCLGlCQUFpQixTQUFTLFdBQ3ZDOEcsR0FBYzNCLE9BQ2RuRyxFQUFvQjhELFFBQ3BCa0UsR0FBc0JILGVBR3hCLElBQU12QixHQUFtQixJQUFJVCxHVnRHZSw2QlUwRzVDUyxHQUFpQmlCLG9CQUVqQixJQUFNSyxHQUF3QixJQUFJM0gsRUFDaENmLEVBQ0FVLEdBRUZnSSxHQUFzQkssbUJBRXRCLElBQU1ELEdBQXdCLElBQUkvSCxFQUNoQ2YsRUFDQWMsR0FFRmdJLEdBQXNCQyxtQiIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL21lc3RvL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9tZXN0by93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIGRlZmluaXRpb24pIHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiAn0JDRgNGF0YvQtycsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9hcmtoeXouanBnJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQp9C10LvRj9Cx0LjQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGcnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ9CY0LLQsNC90L7QstC+JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2l2YW5vdm8uanBnJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQmtCw0LzRh9Cw0YLQutCwJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2thbWNoYXRrYS5qcGcnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ9Cl0L7Qu9C80L7Qs9C+0YDRgdC60LjQuSDRgNCw0LnQvtC9JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGcnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ9CR0LDQudC60LDQuycsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9iYWlrYWwuanBnJyxcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6ICcuZm9ybScsXG4gIGlucHV0U2VsZWN0b3I6ICcuZm9ybV9faW5wdXQnLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5mb3JtX19zdWJtaXQnLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAnYnV0dG9uX2Rpc2FibGVkJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAnZm9ybV9faW5wdXRfdHlwZV9lcnJvcicsXG4gIGVycm9yQ2xhc3M6ICdmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmUnLFxufTtcblxuZXhwb3J0IGNvbnN0IGVkaXRJbmZvQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbl90eXBlX2VkaXQnKTtcbmV4cG9ydCBjb25zdCBlZGl0SW5mb0Zvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgJy5wcm9maWxlLWVkaXRfX2Zvcm0nXG4pO1xuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGVkaXRJbmZvRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIltuYW1lPSduYW1lJ11cIik7XG5leHBvcnQgY29uc3QgYmlvSW5wdXQgPSBlZGl0SW5mb0Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0nYmlvJ11cIik7XG5leHBvcnQgY29uc3QgYWRkUGxhY2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX3R5cGVfYWRkJyk7XG5leHBvcnQgY29uc3QgYWRkUGxhY2VGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZS1hZGRfX2Zvcm0nKTtcbmV4cG9ydCBjb25zdCBhZGRQbGFjZVBvcHVwU2VsZWN0b3IgPSAnLnBsYWNlLWFkZCc7XG5leHBvcnQgY29uc3QgZWRpdEluZm9Qb3B1cFNlbGVjdG9yID0gJy5wcm9maWxlLWVkaXQnO1xuZXhwb3J0IGNvbnN0IGNvbmZpcm1EZWxldGlvblBvcHVwU2VsZWN0b3IgPSAnLmNhcmQtZGVsZXRlLWNvbmZpcm1hdGlvbic7XG5leHBvcnQgY29uc3QgcG9wdXBGdWxsUGhvdG9TZWxlY3RvciA9ICcucGxhY2UtZnVsbC1waG90byc7XG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlU2VsZWN0b3IgPSAnLmNhcmQtdGVtcGxhdGUnO1xuZXhwb3J0IGNvbnN0IGNhcmRzQ29udGFpbmVyU2VsZWN0b3IgPSAnLnBsYWNlcyc7XG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWVTZWxlY3RvciA9ICcucHJvZmlsZV9fbmFtZSc7XG5leHBvcnQgY29uc3QgcHJvZmlsZUJpb1NlbGVjdG9yID0gJy5wcm9maWxlX19iaW8nO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXJTZWxlY3RvciA9ICcucHJvZmlsZV9fYXZhdGFyJztcbmV4cG9ydCBjb25zdCB1c2VyRGF0YVNlbGVjdG9ycyA9IHtcbiAgcHJvZmlsZU5hbWVTZWxlY3RvcixcbiAgcHJvZmlsZUJpb1NlbGVjdG9yLFxuICBwcm9maWxlQXZhdGFyU2VsZWN0b3IsXG59O1xuZXhwb3J0IGNvbnN0IGRlbGV0ZVBsYWNlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbl90eXBlX2RlbGV0ZScpO1xuZXhwb3J0IGNvbnN0IGRlbGV0ZVBsYWNlUG9wdXBTZWxlY3RvciA9ICcucGxhY2VfX2RlbGV0ZSc7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgI2Zvcm1TZWxlY3RvcjtcbiAgI2lucHV0U2VsZWN0b3I7XG4gICNzdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgI2luYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICNpbnB1dEVycm9yQ2xhc3M7XG4gICNlcnJvckNsYXNzO1xuICAjZm9ybUVsZW1lbnQ7XG4gICNpbnB1dExpc3Q7XG4gICNidXR0b247XG5cbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuI2Zvcm1TZWxlY3RvciA9IGNvbmZpZy5mb3JtU2VsZWN0b3I7XG4gICAgdGhpcy4jaW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuI3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuI2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLiNpbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuI2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcbiAgICB0aGlzLiNmb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuI2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLiNmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuI2lucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLiNidXR0b24gPSB0aGlzLiNmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuI3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gICNjaGVja0lucHV0VmFsaWRpdHkgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuI3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4jaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH07XG5cbiAgI3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSA9PiB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy4jZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy4jaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy4jZXJyb3JDbGFzcyk7XG4gIH07XG5cbiAgI2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuI2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuI2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy4jZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gIH07XG5cbiAgaGlkZUVycm9yID0gKCkgPT4ge1xuICAgIHRoaXMuI2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuI2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgICB0aGlzLiN0b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIH0pO1xuICB9O1xuXG4gICNzZXRGb3JtRXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgLy8gY29uc29sZS5sb2coJzEnKTtcbiAgICB0aGlzLiN0b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuI2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy4jY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuI3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICAjdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuI2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLiNidXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLiNpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuI2J1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuI2J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuI2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy4jYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICB9XG4gIH07XG5cbiAgI2hhc0ludmFsaWRJbnB1dCA9ICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy4jaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH07XG5cbiAgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcbiAgICB0aGlzLiNmb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuI3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgfSk7XG4gICAgdGhpcy4jc2V0Rm9ybUV2ZW50TGlzdGVuZXJzKCk7XG4gIH07XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgI3JlbmRlcmVkSXRlbXM7XG4gICNyZW5kZXJlcjtcbiAgI2NvbnRhaW5lcjtcblxuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgLy8gdGhpcy4jcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuI3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy4jY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcyhyZW5kZXJlZEl0ZW1zKSB7XG4gICAgcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLiNyZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCwgb3JkZXIgPSB0cnVlKSB7XG4gICAgaWYgKG9yZGVyKSB7XG4gICAgICB0aGlzLiNjb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiNjb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IG15VXNlcklkIH0gZnJvbSAnLi4vcGFnZXMvaW5kZXguanMnO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gICNuYW1lO1xuICAjbGluaztcbiAgI3RlbXBsYXRlU2VsZWN0b3I7XG4gICNjYXJkO1xuICAjZGVsZXRlQnV0dG9uO1xuICAjbGlrZUJ1dHRvbjtcbiAgI3BsYWNlUGhvdG87XG4gICNoYW5kbGVDYXJkQ2xpY2s7XG4gICNsaWtlc0NvdW50O1xuICAjb3duZXI7XG4gICNoYW5kbGVDYXJkRGVsZXRlO1xuICAjY2FyZElkO1xuXG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgdGVtcGxhdGVTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVDYXJkRGVsZXRlIH0pIHtcbiAgICB0aGlzLiNuYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuI2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy4jb3duZXIgPSBkYXRhLm93bmVyLl9pZDtcbiAgICB0aGlzLiNjYXJkSWQgPSBkYXRhLl9pZDtcbiAgICBpZiAoZGF0YS5saWtlcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuI2xpa2VzQ291bnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4jbGlrZXNDb3VudCA9IDA7XG4gICAgfVxuICAgIHRoaXMuI3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xuICAgIHRoaXMuI2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLiNoYW5kbGVDYXJkRGVsZXRlID0gaGFuZGxlQ2FyZERlbGV0ZTtcbiAgfVxuXG4gIGdldENhcmRJZCgpIHtcbiAgICByZXR1cm4gdGhpcy4jY2FyZElkO1xuICB9XG5cbiAgI2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuI3RlbXBsYXRlU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKCcucGxhY2UnKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBjcmVhdGVDYXJkKCkge1xuICAgIHRoaXMuI2NhcmQgPSB0aGlzLiNnZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuI3BsYWNlUGhvdG8gPSB0aGlzLiNjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZV9fcGhvdG8nKTtcbiAgICB0aGlzLiNwbGFjZVBob3RvLnNyYyA9IHRoaXMuI2xpbms7XG4gICAgdGhpcy4jcGxhY2VQaG90by5hbHQgPSB0aGlzLiNuYW1lO1xuICAgIHRoaXMuI2NhcmQucXVlcnlTZWxlY3RvcignLnBsYWNlX190aXRsZScpLmlubmVyVGV4dCA9IHRoaXMuI25hbWU7XG4gICAgdGhpcy4jZGVsZXRlQnV0dG9uID0gdGhpcy4jY2FyZC5xdWVyeVNlbGVjdG9yKCcucGxhY2VfX2RlbGV0ZScpO1xuICAgIHRoaXMuI2xpa2VCdXR0b24gPSB0aGlzLiNjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZV9fbGlrZScpO1xuICAgIHRoaXMuI2NhcmQucXVlcnlTZWxlY3RvcignLnBsYWNlX19saWtlcy1jb3VudCcpLnRleHRDb250ZW50ID1cbiAgICAgIHRoaXMuI2xpa2VzQ291bnQ7XG4gICAgLy8gY29uc29sZS5sb2codGhpcy4jY2FyZCk7XG4gICAgLy8gY29uc29sZS5sb2codGhpcy4jb3duZXIpO1xuICAgIGlmICh0aGlzLiNvd25lciA9PT0gbXlVc2VySWQpIHtcbiAgICAgIHRoaXMuI2RlbGV0ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdwbGFjZV9fZGVsZXRlX2FjdGl2ZScpO1xuICAgICAgLy8gY29uc29sZS5sb2codGhpcy4jZGVsZXRlQnV0dG9uKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCcxJyk7XG4gICAgfVxuICAgIHRoaXMuI3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgLy8gY29uc29sZS5sb2codGhpcyk7XG4gICAgcmV0dXJuIHRoaXMuI2NhcmQ7XG4gIH1cblxuICAjc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy4jZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgLy8gY29uc29sZS5sb2codGhpcy4jY2FyZElkKTtcbiAgICAgIHRoaXMuI2hhbmRsZUNhcmREZWxldGUodGhpcyk7XG4gICAgICAvLyB0aGlzLiNkZWxldGVDYXJkKCk7XG4gICAgfSk7XG4gICAgdGhpcy4jbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuI2xpa2VDYXJkKCk7XG4gICAgfSk7XG4gICAgdGhpcy4jcGxhY2VQaG90by5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuI2hhbmRsZUNhcmRDbGljayh0aGlzLiNuYW1lLCB0aGlzLiNsaW5rKTtcbiAgICB9KTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy4jY2FyZC5yZW1vdmUoKTtcbiAgfVxuXG4gICNsaWtlQ2FyZCgpIHtcbiAgICB0aGlzLiNsaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ3BsYWNlX19saWtlX2FjdGl2ZScpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gICNwb3B1cDtcblxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy4jcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLiNwb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy4jaGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy4jcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuI2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gICNoYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy4jcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy4jcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgI3BvcHVwO1xuICAjZnVsbFBob3RvSW1hZ2U7XG4gICNmdWxsUGhvdG9DYXB0aW9uO1xuXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLiNwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy4jZnVsbFBob3RvSW1hZ2UgPSB0aGlzLiNwb3B1cC5xdWVyeVNlbGVjdG9yKFxuICAgICAgJy5wbGFjZS1mdWxsLXBob3RvX19pbWFnZSdcbiAgICApO1xuICAgIHRoaXMuI2Z1bGxQaG90b0NhcHRpb24gPSB0aGlzLiNwb3B1cC5xdWVyeVNlbGVjdG9yKFxuICAgICAgJy5wbGFjZS1mdWxsLXBob3RvX19jYXB0aW9uJ1xuICAgICk7XG4gIH1cblxuICBvcGVuKG5hbWUsIGxpbmspIHtcbiAgICB0aGlzLiNmdWxsUGhvdG9JbWFnZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuI2Z1bGxQaG90b0ltYWdlLmFsdCA9IG5hbWU7XG4gICAgdGhpcy4jZnVsbFBob3RvQ2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgI2hhbmRsZUZvcm1TdWJtaXQ7XG4gICNmb3JtVmFsdWVzO1xuICAjaW5wdXRMaXN0O1xuICAjcG9wdXA7XG4gICNmb3JtO1xuXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLiNwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy4jaGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy4jZm9ybSA9IHRoaXMuI3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcbiAgICB0aGlzLiNpbnB1dExpc3QgPSB0aGlzLiNwb3B1cC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpO1xuICB9XG5cbiAgI2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuI2Zvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLiNpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHRoaXMuI2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy4jZm9ybVZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuI2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuI2hhbmRsZUZvcm1TdWJtaXQodGhpcy4jZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy4jZm9ybS5yZXNldCgpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gICNwcm9maWxlTmFtZTtcbiAgI3Byb2ZpbGVCaW87XG4gICNwcm9maWxlQXZhdGFyO1xuICAjYXZhdGFyO1xuICAjaWQ7XG5cbiAgY29uc3RydWN0b3IodXNlckRhdGFTZWxlY3RvcnMpIHtcbiAgICB0aGlzLiNwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB1c2VyRGF0YVNlbGVjdG9ycy5wcm9maWxlTmFtZVNlbGVjdG9yXG4gICAgKTtcbiAgICB0aGlzLiNwcm9maWxlQmlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHVzZXJEYXRhU2VsZWN0b3JzLnByb2ZpbGVCaW9TZWxlY3RvclxuICAgICk7XG4gICAgdGhpcy4jcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB1c2VyRGF0YVNlbGVjdG9ycy5wcm9maWxlQXZhdGFyU2VsZWN0b3JcbiAgICApO1xuICAgIC8vIHRoaXMuI2F2YXRhciA9XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy4jcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXG4gICAgICBiaW86IHRoaXMuI3Byb2ZpbGVCaW8udGV4dENvbnRlbnQsXG4gICAgICBhdmF0YXI6IHRoaXMuI2F2YXRhcixcbiAgICAgIGlkOiB0aGlzLiNpZCxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8obmV3VXNlckRhdGEpIHtcbiAgICB0aGlzLiNwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5ld1VzZXJEYXRhLm5hbWU7XG4gICAgdGhpcy4jcHJvZmlsZUJpby50ZXh0Q29udGVudCA9IG5ld1VzZXJEYXRhLmJpbztcbiAgICAvLyB0aGlzLiNwcm9maWxlQXZhdGFyLnNyYyA9IG5ld1VzZXJEYXRhLmF2YXRhcjtcbiAgICAvLyB0aGlzLiNpZCA9IG5ld1VzZXJEYXRhLmlkO1xuICAgIC8vIGNvbnNvbGUubG9nKG5ld1VzZXJEYXRhLmlkKTtcbiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLiNpZCk7XG4gIH1cbn1cbiIsIi8vIGltcG9ydCB7IG5hbWVJbnB1dCwgYmlvSW5wdXQgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICAjYmFzZVVybDtcbiAgI2hlYWRlcnM7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuI2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XG4gICAgdGhpcy4jaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcbiAgfVxuXG4gICNoYW5kbGVSZXNwb25zZSA9IChyZXNwb25zZSkgPT4ge1xuICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgIH1cbiAgfTtcblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuI2Jhc2VVcmwgKyAnL2NhcmRzJywge1xuICAgICAgaGVhZGVyczogdGhpcy4jaGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuI2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIGdldFVzZXJEYXRhKCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLiNiYXNlVXJsICsgJy91c2Vycy9tZScsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuI2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLiNoYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICBzYXZlVXNlckRhdGEoaW5wdXREYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuI2Jhc2VVcmwgKyAnL3VzZXJzL21lJywge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy4jaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogaW5wdXREYXRhLm5hbWUsXG4gICAgICAgIGFib3V0OiBpbnB1dERhdGEuYmlvLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLiNoYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICBhZGROZXdDYXJkKGNhcmREYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuI2Jhc2VVcmwgKyAnL2NhcmRzJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLiNoZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBjYXJkRGF0YS5uYW1lLFxuICAgICAgICBsaW5rOiBjYXJkRGF0YS5saW5rLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLiNoYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLiNiYXNlVXJsICsgYC9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy4jaGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuI2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLiNiYXNlVXJsICsgYC9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgaGVhZGVyczogdGhpcy4jaGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuI2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIGRpc2xpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLiNiYXNlVXJsICsgYC9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy4jaGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuI2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gICNoYW5kbGVGb3JtU3VibWl0O1xuICAjZm9ybVZhbHVlcztcbiAgI2lucHV0TGlzdDtcbiAgI3BvcHVwO1xuICAjZm9ybTtcblxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy4jcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIC8vIHRoaXMuI2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuI2Zvcm0gPSB0aGlzLiNwb3B1cC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xuICB9XG5cbiAgc2V0Rm9ybUhhbmRsZXIoaGFuZGxlcikge1xuICAgIHRoaXMuI2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVyO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy4jZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuI2hhbmRsZUZvcm1TdWJtaXQoKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICAvLyB0aGlzLiNmb3JtLnJlc2V0KCk7XG4gIH1cbn1cbiIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xuXG5pbXBvcnQge1xuICB2YWxpZGF0aW9uQ29uZmlnLFxuICBlZGl0SW5mb0J1dHRvbixcbiAgYWRkUGxhY2VCdXR0b24sXG4gIGFkZFBsYWNlRm9ybUVsZW1lbnQsXG4gIGFkZFBsYWNlUG9wdXBTZWxlY3RvcixcbiAgY2FyZFRlbXBsYXRlU2VsZWN0b3IsXG4gIGNhcmRzQ29udGFpbmVyU2VsZWN0b3IsXG4gIGVkaXRJbmZvRm9ybUVsZW1lbnQsXG4gIGVkaXRJbmZvUG9wdXBTZWxlY3RvcixcbiAgcG9wdXBGdWxsUGhvdG9TZWxlY3RvcixcbiAgYmlvSW5wdXQsXG4gIG5hbWVJbnB1dCxcbiAgdXNlckRhdGFTZWxlY3RvcnMsXG4gIHByb2ZpbGVBdmF0YXJTZWxlY3RvcixcbiAgY29uZmlybURlbGV0aW9uUG9wdXBTZWxlY3RvcixcbiAgZGVsZXRlUGxhY2VCdXR0b24sXG4gIGRlbGV0ZVBsYWNlUG9wdXBTZWxlY3Rvcixcbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcblxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCBBcGkgZnJvbSAnLi4vY29tcG9uZW50cy9BcGkuanMnO1xuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyc7XG5cbmV4cG9ydCBsZXQgbXlVc2VySWQgPSBudWxsO1xuLy8gbGV0IGNhcmRJZCA9IG51bGw7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0yNycsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiAnMzc1ODBlMjktY2E0My00ZTYwLWJmYzQtOTczMWQ2MTY3NjkxJyxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICB9LFxufSk7XG5cbi8vPyBQcm9taXNlLmFsbDtcblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XG4gICAgZGF0YTogaXRlbSxcbiAgICB0ZW1wbGF0ZVNlbGVjdG9yOiBjYXJkVGVtcGxhdGVTZWxlY3RvcixcbiAgICBoYW5kbGVDYXJkQ2xpY2s6IChuYW1lLCBsaW5rKSA9PiB7XG4gICAgICBwb3B1cEZ1bGxQaG90by5vcGVuKG5hbWUsIGxpbmspO1xuICAgIH0sXG4gICAgaGFuZGxlQ2FyZERlbGV0ZTogKGNhcmRJbnN0YW5jZSkgPT4ge1xuICAgICAgZGVsZXRlQ2FyZChjYXJkSW5zdGFuY2UpO1xuICAgIH0sXG4gIH0pO1xuICByZXR1cm4gY2FyZC5jcmVhdGVDYXJkKCk7XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZUNhcmQoY2FyZCkge1xuICBwb3B1cERlbGV0ZVBsYWNlLm9wZW4oKTtcbiAgcG9wdXBEZWxldGVQbGFjZS5zZXRGb3JtSGFuZGxlcigoKSA9PiB7XG4gICAgYXBpLmRlbGV0ZUNhcmQoY2FyZC5nZXRDYXJkSWQoKSkudGhlbigoKSA9PiB7XG4gICAgICBjYXJkLmRlbGV0ZUNhcmQoKTtcbiAgICAgIHBvcHVwRGVsZXRlUGxhY2UuY2xvc2UoKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHVzZXJEYXRhU2VsZWN0b3JzKTtcbmdldFVzZXJEYXRhRnJvbVNlcnZlcigpO1xuXG5jb25zdCBjYXJkc1Byb21pc2UgPSBhcGkuZ2V0SW5pdGlhbENhcmRzKCk7XG5cbmNvbnN0IGNhcmRzTGlzdCA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICBjYXJkc0xpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGl0ZW0pKTtcbiAgICB9LFxuICB9LFxuICBjYXJkc0NvbnRhaW5lclNlbGVjdG9yXG4pO1xuXG5jYXJkc1Byb21pc2VcbiAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICBjYXJkc0xpc3QucmVuZGVySXRlbXMoZGF0YSk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbiAgfSk7XG5cbmZ1bmN0aW9uIGdldFVzZXJEYXRhRnJvbVNlcnZlcigpIHtcbiAgY29uc3QgcHJvZmlsZURhdGFQcm9taXNlID0gYXBpLmdldFVzZXJEYXRhKCk7XG4gIHByb2ZpbGVEYXRhUHJvbWlzZVxuICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIG15VXNlcklkID0gcmVzdWx0Ll9pZDtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICAgICAgbmFtZTogcmVzdWx0Lm5hbWUsXG4gICAgICAgIGJpbzogcmVzdWx0LmFib3V0LFxuICAgICAgICBhdmF0YXI6IHJlc3VsdC5hdmF0YXIsXG4gICAgICAgIGlkOiByZXN1bHQuX2lkLFxuICAgICAgfSk7XG4gICAgICAvLyBlZGl0SW5mb0Zvcm1WYWxpZGF0b3IuaGlkZUVycm9yKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbn1cblxuY29uc3QgcG9wdXBGdWxsUGhvdG8gPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBGdWxsUGhvdG9TZWxlY3Rvcik7XG5wb3B1cEZ1bGxQaG90by5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwb3B1cEVkaXRJbmZvID0gbmV3IFBvcHVwV2l0aEZvcm0oZWRpdEluZm9Qb3B1cFNlbGVjdG9yLCAoaW5wdXREYXRhKSA9PiB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGlucHV0RGF0YSk7XG4gIGFwaS5zYXZlVXNlckRhdGEoaW5wdXREYXRhKTtcbiAgcG9wdXBFZGl0SW5mby5jbG9zZSgpO1xufSk7XG5cbnBvcHVwRWRpdEluZm8uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmVkaXRJbmZvQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBwb3B1cEVkaXRJbmZvLm9wZW4oKTtcbiAgY29uc3QgcHJvZmlsZURhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBuYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlRGF0YS5uYW1lO1xuICBiaW9JbnB1dC52YWx1ZSA9IHByb2ZpbGVEYXRhLmJpbztcbiAgZWRpdEluZm9Gb3JtVmFsaWRhdG9yLmhpZGVFcnJvcigpO1xufSk7XG5cbmNvbnN0IHBvcHVwQWRkUGxhY2UgPSBuZXcgUG9wdXBXaXRoRm9ybShhZGRQbGFjZVBvcHVwU2VsZWN0b3IsIChpbnB1dERhdGEpID0+IHtcbiAgaW5wdXREYXRhLmxpa2VzID0gW107XG4gIGlucHV0RGF0YS5vd25lciA9IHsgX2lkOiBteVVzZXJJZCB9O1xuICBhcGlcbiAgICAuYWRkTmV3Q2FyZChpbnB1dERhdGEpXG4gICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgaW5wdXREYXRhLl9pZCA9IHJlc3VsdC5faWQ7XG4gICAgICBjYXJkc0xpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGlucHV0RGF0YSksIGZhbHNlKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pO1xuICBwb3B1cEFkZFBsYWNlLmNsb3NlKCk7XG59KTtcblxucG9wdXBBZGRQbGFjZS5zZXRFdmVudExpc3RlbmVycygpO1xuYWRkUGxhY2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIHBvcHVwQWRkUGxhY2Uub3BlbigpO1xuICBhZGRQbGFjZUZvcm1FbGVtZW50LnJlc2V0KCk7XG4gIGFkZFBsYWNlRm9ybVZhbGlkYXRvci5oaWRlRXJyb3IoKTtcbn0pO1xuXG5jb25zdCBwb3B1cERlbGV0ZVBsYWNlID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcbiAgY29uZmlybURlbGV0aW9uUG9wdXBTZWxlY3RvclxuKTtcblxucG9wdXBEZWxldGVQbGFjZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBlZGl0SW5mb0Zvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvbkNvbmZpZyxcbiAgZWRpdEluZm9Gb3JtRWxlbWVudFxuKTtcbmVkaXRJbmZvRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGFkZFBsYWNlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB2YWxpZGF0aW9uQ29uZmlnLFxuICBhZGRQbGFjZUZvcm1FbGVtZW50XG4pO1xuYWRkUGxhY2VGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInZhbGlkYXRpb25Db25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImVkaXRJbmZvQnV0dG9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWRpdEluZm9Gb3JtRWxlbWVudCIsIm5hbWVJbnB1dCIsImJpb0lucHV0IiwiYWRkUGxhY2VCdXR0b24iLCJhZGRQbGFjZUZvcm1FbGVtZW50IiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInJlbW92ZSIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwic29tZSIsImV2dCIsInByZXZlbnREZWZhdWx0IiwidGhpcyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsInJlbmRlcmVkSXRlbXMiLCJpdGVtIiwiZWxlbWVudCIsIm9yZGVyIiwiYXBwZW5kIiwicHJlcGVuZCIsIkNhcmQiLCJkYXRhIiwidGVtcGxhdGVTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUNhcmREZWxldGUiLCJuYW1lIiwibGluayIsIm93bmVyIiwiX2lkIiwibGlrZXMiLCJsZW5ndGgiLCJzcmMiLCJhbHQiLCJpbm5lclRleHQiLCJteVVzZXJJZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJ0b2dnbGUiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInJlc2V0IiwiaW5wdXQiLCJ2YWx1ZSIsIlVzZXJJbmZvIiwidXNlckRhdGFTZWxlY3RvcnMiLCJwcm9maWxlTmFtZVNlbGVjdG9yIiwicHJvZmlsZUJpb1NlbGVjdG9yIiwicHJvZmlsZUF2YXRhclNlbGVjdG9yIiwiYmlvIiwiYXZhdGFyIiwibmV3VXNlckRhdGEiLCJBcGkiLCJvcHRpb25zIiwicmVzcG9uc2UiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiYmFzZVVybCIsImhlYWRlcnMiLCJmZXRjaCIsInRoZW4iLCJpbnB1dERhdGEiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwiY2FyZERhdGEiLCJjYXJkSWQiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJoYW5kbGVyIiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsImNyZWF0ZUNhcmQiLCJwb3B1cEZ1bGxQaG90byIsIm9wZW4iLCJjYXJkSW5zdGFuY2UiLCJjYXJkIiwicG9wdXBEZWxldGVQbGFjZSIsInNldEZvcm1IYW5kbGVyIiwiZGVsZXRlQ2FyZCIsImdldENhcmRJZCIsInVzZXJJbmZvIiwiZ2V0VXNlckRhdGEiLCJyZXN1bHQiLCJzZXRVc2VySW5mbyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImNhcmRzUHJvbWlzZSIsImdldEluaXRpYWxDYXJkcyIsImNhcmRzTGlzdCIsImFkZEl0ZW0iLCJyZW5kZXJJdGVtcyIsInNldEV2ZW50TGlzdGVuZXJzIiwicG9wdXBFZGl0SW5mbyIsInNhdmVVc2VyRGF0YSIsInByb2ZpbGVEYXRhIiwiZ2V0VXNlckluZm8iLCJlZGl0SW5mb0Zvcm1WYWxpZGF0b3IiLCJoaWRlRXJyb3IiLCJwb3B1cEFkZFBsYWNlIiwiYWRkTmV3Q2FyZCIsImFkZFBsYWNlRm9ybVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9