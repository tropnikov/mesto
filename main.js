!function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};e.d({},{Y:function(){return Lt}});var t={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},n=document.querySelector(".button_type_edit"),r=document.querySelector(".profile-edit__form"),o=r.querySelector("[name='name']"),i=r.querySelector("[name='bio']"),a=document.querySelector(".button_type_add"),l=document.querySelector(".place-add__form"),c=(document.querySelector(".button_type_delete"),document.querySelector(".profile__avatar")),u=document.querySelector(".avatar-update__form");function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,h(e,t,"get"))}function p(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,h(e,t,"set"),n),n}function h(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var d=new WeakMap,v=new WeakMap,y=new WeakMap,w=new WeakMap,b=new WeakMap,m=new WeakMap,k=new WeakMap,g=new WeakMap,_=new WeakMap,E=new WeakMap,S=new WeakMap,W=new WeakMap,M=new WeakMap,O=new WeakMap,C=new WeakMap,L=function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d.set(this,{writable:!0,value:void 0}),v.set(this,{writable:!0,value:void 0}),y.set(this,{writable:!0,value:void 0}),w.set(this,{writable:!0,value:void 0}),b.set(this,{writable:!0,value:void 0}),m.set(this,{writable:!0,value:void 0}),k.set(this,{writable:!0,value:void 0}),g.set(this,{writable:!0,value:void 0}),_.set(this,{writable:!0,value:void 0}),E.set(this,{writable:!0,value:function(e){e.validity.valid?f(r,W).call(r,e):f(r,S).call(r,e,e.validationMessage)}}),S.set(this,{writable:!0,value:function(e,t){var n=f(r,k).querySelector(".".concat(e.id,"-error"));e.classList.add(f(r,b)),n.textContent=t,n.classList.add(f(r,m))}}),W.set(this,{writable:!0,value:function(e){var t=f(r,k).querySelector(".".concat(e.id,"-error"));e.classList.remove(f(r,b)),t.classList.remove(f(r,m)),t.textContent=""}}),s(this,"hideError",(function(){f(r,g).forEach((function(e){f(r,W).call(r,e),f(r,O).call(r)}))})),M.set(this,{writable:!0,value:function(){f(r,O).call(r),f(r,g).forEach((function(e){e.addEventListener("input",(function(){f(r,E).call(r,e),f(r,O).call(r)}))}))}}),O.set(this,{writable:!0,value:function(){f(r,C).call(r)?(f(r,_).classList.add(f(r,w)),f(r,_).setAttribute("disabled",!0)):(f(r,_).classList.remove(f(r,w)),f(r,_).removeAttribute("disabled"))}}),C.set(this,{writable:!0,value:function(){return f(r,g).some((function(e){return!e.validity.valid}))}}),s(this,"enableValidation",(function(){f(r,k).addEventListener("submit",(function(e){e.preventDefault(),f(r,O).call(r)})),f(r,M).call(r)})),p(this,d,t.formSelector),p(this,v,t.inputSelector),p(this,y,t.submitButtonSelector),p(this,w,t.inactiveButtonClass),p(this,b,t.inputErrorClass),p(this,m,t.errorClass),p(this,k,n),p(this,g,Array.from(f(this,k).querySelectorAll(f(this,v)))),p(this,_,f(this,k).querySelector(f(this,y)))};function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,q(e,t,"get"))}function P(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,q(e,t,"set"),n),n}function q(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var R=new WeakMap,I=new WeakMap,x=new WeakMap,D=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),R.set(this,{writable:!0,value:void 0}),I.set(this,{writable:!0,value:void 0}),x.set(this,{writable:!0,value:void 0}),P(this,I,r),P(this,x,document.querySelector(n))}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){j(t,I).call(t,e)}))}},{key:"addItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t?j(this,x).append(e):j(this,x).prepend(e)}}])&&T(t.prototype,n),e}();function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function B(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,H(e,t,"get"))}function N(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,H(e,t,"set"),n),n}function H(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var V=new WeakMap,J=new WeakMap,F=new WeakMap,z=new WeakMap,Y=new WeakMap,G=new WeakMap,K=new WeakMap,Q=new WeakMap,X=new WeakMap,Z=new WeakMap,$=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap,re=new WeakMap,oe=new WeakMap,ie=new WeakSet,ae=new WeakSet,le=new WeakSet,ce=function(){function e(t){var n=t.data,r=t.templateSelector,o=t.handleCardClick,i=t.handleCardDelete,a=t.handleCardLike;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),le.add(this),ae.add(this),ie.add(this),V.set(this,{writable:!0,value:void 0}),J.set(this,{writable:!0,value:void 0}),F.set(this,{writable:!0,value:void 0}),z.set(this,{writable:!0,value:void 0}),Y.set(this,{writable:!0,value:void 0}),G.set(this,{writable:!0,value:void 0}),K.set(this,{writable:!0,value:void 0}),Q.set(this,{writable:!0,value:void 0}),X.set(this,{writable:!0,value:void 0}),Z.set(this,{writable:!0,value:void 0}),$.set(this,{writable:!0,value:void 0}),ee.set(this,{writable:!0,value:void 0}),te.set(this,{writable:!0,value:void 0}),ne.set(this,{writable:!0,value:void 0}),re.set(this,{writable:!0,value:void 0}),oe.set(this,{writable:!0,value:void 0}),N(this,V,n.name),N(this,J,n.link),N(this,Z,n.owner._id),N(this,ee,n._id),N(this,te,n.likes),N(this,X,n.likes.length),N(this,F,r),N(this,Q,o),N(this,$,i),N(this,ne,a),N(this,oe,n)}var t,n;return t=e,(n=[{key:"getCardId",value:function(){return B(this,ee)}},{key:"isLiked",value:function(){return console.log(B(this,te)),B(this,re)}},{key:"setLike",value:function(e){B(this,z).querySelector(".place__likes-count").textContent=e.likes.length,N(this,re,e.likes.some((function(e){return e._id===Lt}))),console.log(e.likes.length),B(this,re)?B(this,G).classList.add("place__like_active"):B(this,G).classList.remove("place__like_active")}},{key:"createCard",value:function(){return N(this,z,A(this,ie,ue).call(this)),N(this,K,B(this,z).querySelector(".place__photo")),B(this,K).src=B(this,J),B(this,K).alt=B(this,V),B(this,z).querySelector(".place__title").innerText=B(this,V),N(this,Y,B(this,z).querySelector(".place__delete")),N(this,G,B(this,z).querySelector(".place__like")),this.setLike(B(this,oe)),B(this,Z)===Lt&&B(this,Y).classList.remove("place__delete_active"),A(this,ae,se).call(this),B(this,z)}},{key:"deleteCard",value:function(){B(this,z).remove()}}])&&U(t.prototype,n),e}();function ue(){return document.querySelector(B(this,F)).content.querySelector(".place").cloneNode(!0)}function se(){var e=this;B(this,Y).addEventListener("click",(function(){B(e,$).call(e,e)})),B(this,G).addEventListener("click",(function(){B(e,ne).call(e,e)})),B(this,K).addEventListener("click",(function(){B(e,Q).call(e,B(e,V),B(e,J))}))}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,he(e,t,"get"))}function he(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var de=new WeakMap,ve=new WeakMap,ye=function(){function e(t){var n,r,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),de.set(this,{writable:!0,value:void 0}),ve.set(this,{writable:!0,value:function(e){"Escape"===e.key&&i.close()}}),n=this,r=de,o=document.querySelector(t),function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(n,he(n,r,"set"),o)}var t,n;return t=e,(n=[{key:"open",value:function(){pe(this,de).classList.add("popup_opened"),document.addEventListener("keydown",pe(this,ve))}},{key:"close",value:function(){pe(this,de).classList.remove("popup_opened"),document.removeEventListener("keydown",pe(this,ve))}},{key:"setEventListeners",value:function(){var e=this;pe(this,de).querySelector(".popup__close").addEventListener("click",(function(){e.close()})),pe(this,de).addEventListener("click",(function(t){t.target===t.currentTarget&&e.close()}))}}])&&fe(t.prototype,n),e}();function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t,n){return(me="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ee(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ge(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?_e(e):t}function _e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Me(e,t,"get"))}function We(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Me(e,t,"set"),n),n}function Me(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Oe=new WeakMap,Ce=new WeakMap,Le=new WeakMap,Te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ee(r);if(o){var n=Ee(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ge(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),Oe.set(_e(t),{writable:!0,value:void 0}),Ce.set(_e(t),{writable:!0,value:void 0}),Le.set(_e(t),{writable:!0,value:void 0}),We(_e(t),Oe,document.querySelector(e)),We(_e(t),Ce,Se(_e(t),Oe).querySelector(".place-full-photo__image")),We(_e(t),Le,Se(_e(t),Oe).querySelector(".place-full-photo__caption")),t}return t=a,(n=[{key:"open",value:function(e,t){Se(this,Ce).src=t,Se(this,Ce).alt=e,Se(this,Le).textContent=e,me(Ee(a.prototype),"open",this).call(this)}}])&&be(t.prototype,n),a}(ye);function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t,n){return(qe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=De(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?xe(e):t}function xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ue(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Be(e,t,"get"))}function Ae(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Be(e,t,"set"),n),n}function Be(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Ne=new WeakMap,He=new WeakMap,Ve=new WeakMap,Je=new WeakMap,Fe=new WeakMap,ze=new WeakSet,Ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=De(r);if(o){var n=De(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ie(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=i.call(this,e),ze.add(xe(n)),Ne.set(xe(n),{writable:!0,value:void 0}),He.set(xe(n),{writable:!0,value:void 0}),Ve.set(xe(n),{writable:!0,value:void 0}),Je.set(xe(n),{writable:!0,value:void 0}),Fe.set(xe(n),{writable:!0,value:void 0}),Ae(xe(n),Je,document.querySelector(e)),Ae(xe(n),Ne,t),Ae(xe(n),Fe,Ue(xe(n),Je).querySelector(".form")),Ae(xe(n),Ve,Ue(xe(n),Je).querySelectorAll(".form__input")),n}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;Ue(this,Fe).addEventListener("submit",(function(t){t.preventDefault(),Ue(e,Ne).call(e,function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(e,ze,Ge).call(e))})),qe(De(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){qe(De(a.prototype),"close",this).call(this),Ue(this,Fe).reset()}}])&&Pe(t.prototype,n),a}(ye);function Ge(){var e=this;return Ae(this,He,{}),Ue(this,Ve).forEach((function(t){Ue(e,He)[t.name]=t.value})),Ue(this,He)}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ze(e,t,"get"))}function Xe(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ze(e,t,"set"),n),n}function Ze(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var $e=new WeakMap,et=new WeakMap,tt=new WeakMap,nt=new WeakMap,rt=new WeakMap,ot=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$e.set(this,{writable:!0,value:void 0}),et.set(this,{writable:!0,value:void 0}),tt.set(this,{writable:!0,value:void 0}),nt.set(this,{writable:!0,value:void 0}),rt.set(this,{writable:!0,value:void 0}),Xe(this,$e,document.querySelector(t.profileNameSelector)),Xe(this,et,document.querySelector(t.profileBioSelector)),Xe(this,tt,document.querySelector(t.profileAvatarSelector))}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:Qe(this,$e).textContent,bio:Qe(this,et).textContent,avatar:Qe(this,nt),id:Qe(this,rt)}}},{key:"setUserInfo",value:function(e){Qe(this,$e).textContent=e.name,Qe(this,et).textContent=e.about,Qe(this,tt).style.backgroundImage="url("+"".concat(e.avatar)+")",console.log(e.avatar)}}])&&Ke(t.prototype,n),e}();function it(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function at(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ct(e,t,"get"))}function lt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ct(e,t,"set"),n),n}function ct(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ut=new WeakMap,st=new WeakMap,ft=new WeakMap,pt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ut.set(this,{writable:!0,value:void 0}),st.set(this,{writable:!0,value:void 0}),ft.set(this,{writable:!0,value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}}),lt(this,ut,t.baseUrl),lt(this,st,t.headers)}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return fetch(at(this,ut)+"/cards",{headers:at(this,st)}).then(at(this,ft))}},{key:"getUserData",value:function(){return fetch(at(this,ut)+"/users/me",{headers:at(this,st)}).then(at(this,ft))}},{key:"saveUserData",value:function(e){return fetch(at(this,ut)+"/users/me",{method:"PATCH",headers:at(this,st),body:JSON.stringify({name:e.name,about:e.bio})}).then(at(this,ft))}},{key:"addNewCard",value:function(e){return fetch(at(this,ut)+"/cards",{method:"POST",headers:at(this,st),body:JSON.stringify({name:e.name,link:e.link})}).then(at(this,ft))}},{key:"deleteCard",value:function(e){return fetch(at(this,ut)+"/cards/".concat(e),{method:"DELETE",headers:at(this,st)}).then(at(this,ft))}},{key:"likeCard",value:function(e){return fetch(at(this,ut)+"/cards/likes/".concat(e),{method:"PUT",headers:at(this,st)}).then(at(this,ft))}},{key:"dislikeCard",value:function(e){return fetch(at(this,ut)+"/cards/likes/".concat(e),{method:"DELETE",headers:at(this,st)}).then(at(this,ft))}},{key:"updateAvatar",value:function(e){return console.log(e),fetch(at(this,ut)+"/users/me/avatar",{method:"PATCH",headers:at(this,st),body:JSON.stringify(e)}).then(at(this,ft))}}])&&it(t.prototype,n),e}();function ht(e){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vt(e,t,n){return(vt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wt(e,t){return!t||"object"!==ht(t)&&"function"!=typeof t?bt(e):t}function bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mt(e){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,_t(e,t,"get"))}function gt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,_t(e,t,"set"),n),n}function _t(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Et=new WeakMap,St=new WeakMap,Wt=new WeakMap,Mt=new WeakMap,Ot=new WeakMap,Ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=mt(r);if(o){var n=mt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return wt(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),Et.set(bt(t),{writable:!0,value:void 0}),St.set(bt(t),{writable:!0,value:void 0}),Wt.set(bt(t),{writable:!0,value:void 0}),Mt.set(bt(t),{writable:!0,value:void 0}),Ot.set(bt(t),{writable:!0,value:void 0}),gt(bt(t),Mt,document.querySelector(e)),gt(bt(t),Ot,kt(bt(t),Mt).querySelector(".form")),t}return t=a,(n=[{key:"setFormHandler",value:function(e){gt(this,Et,e)}},{key:"setEventListeners",value:function(){var e=this;kt(this,Ot).addEventListener("submit",(function(t){t.preventDefault(),kt(e,Et).call(e)})),vt(mt(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){vt(mt(a.prototype),"close",this).call(this)}}])&&dt(t.prototype,n),a}(ye),Lt=null,Tt=new pt({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-27",headers:{authorization:"37580e29-ca43-4e60-bfc4-9731d6167691","Content-Type":"application/json"}});function jt(e){return new ce({data:e,templateSelector:".card-template",handleCardClick:function(e,t){It.open(e,t)},handleCardDelete:function(e){var t;t=e,At.open(),At.setFormHandler((function(){Tt.deleteCard(t.getCardId()).then((function(){t.deleteCard(),At.close()}))}))},handleCardLike:function(e){var t;t=e,console.log(t.isLiked()),(t.isLiked()?Tt.dislikeCard(t.getCardId()):Tt.likeCard(t.getCardId())).then((function(e){t.setLike(e)})).catch((function(e){return console.log(e)}))}}).createCard()}var Pt=new ot({profileNameSelector:".profile__name",profileBioSelector:".profile__bio",profileAvatarSelector:".profile__avatar"});Tt.getUserData().then((function(e){Lt=e._id,console.log(e),Pt.setUserInfo({name:e.name,about:e.about,avatar:e.avatar,id:e._id})})).catch((function(e){console.log(e)}));var qt=Tt.getInitialCards(),Rt=new D({renderer:function(e){Rt.addItem(jt(e))}},".places");qt.then((function(e){Rt.renderItems(e),console.log(e)})).catch((function(e){console.log(e)}));var It=new Te(".place-full-photo");It.setEventListeners();var xt=new Ye(".profile-edit",(function(e){Pt.setUserInfo(e),Tt.saveUserData(e),xt.close()}));xt.setEventListeners(),n.addEventListener("click",(function(){xt.open();var e=Pt.getUserInfo();o.value=e.name,i.value=e.bio,Bt.hideError()}));var Dt=new Ye(".place-add",(function(e){e.likes=[],e.owner={_id:Lt},Tt.addNewCard(e).then((function(t){e._id=t._id,Rt.addItem(jt(e),!1)})).catch((function(e){console.log(e)})),Dt.close()}));Dt.setEventListeners(),a.addEventListener("click",(function(){Dt.open(),l.reset(),Nt.hideError()}));var Ut=new Ye(".avatar-update",(function(e){console.log(Tt.updateAvatar(e)),Tt.updateAvatar(e).then((function(e){console.log(e),Pt.setUserInfo(e)})).catch((function(e){console.log(e)})),Ut.close()}));Ut.setEventListeners(),c.addEventListener("click",(function(){Ut.open()}));var At=new Ct(".card-delete-confirmation");At.setEventListeners(),new L(t,u).enableValidation();var Bt=new L(t,r);Bt.enableValidation();var Nt=new L(t,l);Nt.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU1HLEdBQW1CLElBQUlULEdWM0plLDZCVStKNUNTLEdBQWlCa0Isb0JBRWlCLElBQUk3SCxFQUNwQ2pCLEVBQ0FnQixHQUV3QjBJLG1CQUUxQixJQUFNUCxHQUF3QixJQUFJbEksRUFDaENqQixFQUNBVSxHQUVGeUksR0FBc0JPLG1CQUV0QixJQUFNSCxHQUF3QixJQUFJdEksRUFDaENqQixFQUNBYyxHQUVGeUksR0FBc0JHLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbWVzdG8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL21lc3RvL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgZGVmaW5pdGlvbikge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmosIHByb3ApIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApOyB9IiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6ICfQkNGA0YXRi9C3JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2Fya2h5ei5qcGcnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ9Cn0LXQu9GP0LHQuNC90YHQutCw0Y8g0L7QsdC70LDRgdGC0YwnLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvY2hlbHlhYmluc2stb2JsYXN0LmpwZycsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JjQstCw0L3QvtCy0L4nLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGcnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ9Ca0LDQvNGH0LDRgtC60LAnLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2FtY2hhdGthLmpwZycsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0KXQvtC70LzQvtCz0L7RgNGB0LrQuNC5INGA0LDQudC+0L0nLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2hvbG1vZ29yc2t5LXJheW9uLmpwZycsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JHQsNC50LrQsNC7JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGcnLFxuICB9LFxuXTtcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogJy5mb3JtJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5mb3JtX19pbnB1dCcsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLmZvcm1fX3N1Ym1pdCcsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdidXR0b25fZGlzYWJsZWQnLFxuICBpbnB1dEVycm9yQ2xhc3M6ICdmb3JtX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ2Zvcm1fX2lucHV0LWVycm9yX2FjdGl2ZScsXG59O1xuXG5leHBvcnQgY29uc3QgZWRpdEluZm9CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX3R5cGVfZWRpdCcpO1xuZXhwb3J0IGNvbnN0IGVkaXRJbmZvRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAnLnByb2ZpbGUtZWRpdF9fZm9ybSdcbik7XG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gZWRpdEluZm9Gb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J25hbWUnXVwiKTtcbmV4cG9ydCBjb25zdCBiaW9JbnB1dCA9IGVkaXRJbmZvRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIltuYW1lPSdiaW8nXVwiKTtcbmV4cG9ydCBjb25zdCBhZGRQbGFjZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25fdHlwZV9hZGQnKTtcbmV4cG9ydCBjb25zdCBhZGRQbGFjZUZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYWNlLWFkZF9fZm9ybScpO1xuZXhwb3J0IGNvbnN0IGFkZFBsYWNlUG9wdXBTZWxlY3RvciA9ICcucGxhY2UtYWRkJztcbmV4cG9ydCBjb25zdCBlZGl0SW5mb1BvcHVwU2VsZWN0b3IgPSAnLnByb2ZpbGUtZWRpdCc7XG5leHBvcnQgY29uc3QgY29uZmlybURlbGV0aW9uUG9wdXBTZWxlY3RvciA9ICcuY2FyZC1kZWxldGUtY29uZmlybWF0aW9uJztcbmV4cG9ydCBjb25zdCBwb3B1cEZ1bGxQaG90b1NlbGVjdG9yID0gJy5wbGFjZS1mdWxsLXBob3RvJztcbmV4cG9ydCBjb25zdCBjYXJkVGVtcGxhdGVTZWxlY3RvciA9ICcuY2FyZC10ZW1wbGF0ZSc7XG5leHBvcnQgY29uc3QgY2FyZHNDb250YWluZXJTZWxlY3RvciA9ICcucGxhY2VzJztcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZVNlbGVjdG9yID0gJy5wcm9maWxlX19uYW1lJztcbmV4cG9ydCBjb25zdCBwcm9maWxlQmlvU2VsZWN0b3IgPSAnLnByb2ZpbGVfX2Jpbyc7XG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhclNlbGVjdG9yID0gJy5wcm9maWxlX19hdmF0YXInO1xuZXhwb3J0IGNvbnN0IHVzZXJEYXRhU2VsZWN0b3JzID0ge1xuICBwcm9maWxlTmFtZVNlbGVjdG9yLFxuICBwcm9maWxlQmlvU2VsZWN0b3IsXG4gIHByb2ZpbGVBdmF0YXJTZWxlY3Rvcixcbn07XG5leHBvcnQgY29uc3QgZGVsZXRlUGxhY2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX3R5cGVfZGVsZXRlJyk7XG5leHBvcnQgY29uc3QgZGVsZXRlUGxhY2VQb3B1cFNlbGVjdG9yID0gJy5wbGFjZV9fZGVsZXRlJztcbmV4cG9ydCBjb25zdCB1cGRhdGVBdmF0YXJQb3B1cFNlbGVjdG9yID0gJy5hdmF0YXItdXBkYXRlJztcbmV4cG9ydCBjb25zdCB1cGRhdGVQcm9maWxlQXZhdGFyQnV0dG9uID1cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhcicpO1xuZXhwb3J0IGNvbnN0IHVwZGF0ZUF2YXRhckZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgJy5hdmF0YXItdXBkYXRlX19mb3JtJ1xuKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICAjZm9ybVNlbGVjdG9yO1xuICAjaW5wdXRTZWxlY3RvcjtcbiAgI3N1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAjaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgI2lucHV0RXJyb3JDbGFzcztcbiAgI2Vycm9yQ2xhc3M7XG4gICNmb3JtRWxlbWVudDtcbiAgI2lucHV0TGlzdDtcbiAgI2J1dHRvbjtcblxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy4jZm9ybVNlbGVjdG9yID0gY29uZmlnLmZvcm1TZWxlY3RvcjtcbiAgICB0aGlzLiNpbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy4jc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy4jaW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuI2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy4jZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xuICAgIHRoaXMuI2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy4jaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuI2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy4jaW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuI2J1dHRvbiA9IHRoaXMuI2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy4jc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG5cbiAgI2NoZWNrSW5wdXRWYWxpZGl0eSA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy4jc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiNoaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfTtcblxuICAjc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpID0+IHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLiNmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLiNpbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLiNlcnJvckNsYXNzKTtcbiAgfTtcblxuICAjaGlkZUlucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy4jZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy4jaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLiNlcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgfTtcblxuICBoaWRlRXJyb3IgPSAoKSA9PiB7XG4gICAgdGhpcy4jaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy4jaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICAgIHRoaXMuI3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgI3NldEZvcm1FdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICB0aGlzLiN0b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuI2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy4jY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuI3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICAjdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuI2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLiNidXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLiNpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuI2J1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuI2J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuI2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy4jYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICB9XG4gIH07XG5cbiAgI2hhc0ludmFsaWRJbnB1dCA9ICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy4jaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH07XG5cbiAgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcbiAgICB0aGlzLiNmb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuI3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgfSk7XG4gICAgdGhpcy4jc2V0Rm9ybUV2ZW50TGlzdGVuZXJzKCk7XG4gIH07XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgI3JlbmRlcmVkSXRlbXM7XG4gICNyZW5kZXJlcjtcbiAgI2NvbnRhaW5lcjtcblxuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy4jcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLiNjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKHJlbmRlcmVkSXRlbXMpIHtcbiAgICByZW5kZXJlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuI3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50LCBvcmRlciA9IHRydWUpIHtcbiAgICBpZiAob3JkZXIpIHtcbiAgICAgIHRoaXMuI2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuI2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgbXlVc2VySWQgfSBmcm9tICcuLi9wYWdlcy9pbmRleC5qcyc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgI25hbWU7XG4gICNsaW5rO1xuICAjdGVtcGxhdGVTZWxlY3RvcjtcbiAgI2NhcmQ7XG4gICNkZWxldGVCdXR0b247XG4gICNsaWtlQnV0dG9uO1xuICAjcGxhY2VQaG90bztcbiAgI2hhbmRsZUNhcmRDbGljaztcbiAgI2xpa2VzQ291bnQ7XG4gICNvd25lcjtcbiAgI2hhbmRsZUNhcmREZWxldGU7XG4gICNjYXJkSWQ7XG4gICNsaWtlcztcbiAgI2hhbmRsZUNhcmRMaWtlO1xuICAjbGlrZWQ7XG4gICNkYXRhO1xuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBkYXRhLFxuICAgIHRlbXBsYXRlU2VsZWN0b3IsXG4gICAgaGFuZGxlQ2FyZENsaWNrLFxuICAgIGhhbmRsZUNhcmREZWxldGUsXG4gICAgaGFuZGxlQ2FyZExpa2UsXG4gIH0pIHtcbiAgICB0aGlzLiNuYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuI2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy4jb3duZXIgPSBkYXRhLm93bmVyLl9pZDtcbiAgICB0aGlzLiNjYXJkSWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLiNsaWtlcyA9IGRhdGEubGlrZXM7XG4gICAgdGhpcy4jbGlrZXNDb3VudCA9IGRhdGEubGlrZXMubGVuZ3RoO1xuICAgIHRoaXMuI3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xuICAgIHRoaXMuI2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLiNoYW5kbGVDYXJkRGVsZXRlID0gaGFuZGxlQ2FyZERlbGV0ZTtcbiAgICB0aGlzLiNoYW5kbGVDYXJkTGlrZSA9IGhhbmRsZUNhcmRMaWtlO1xuICAgIHRoaXMuI2RhdGEgPSBkYXRhO1xuICB9XG5cbiAgZ2V0Q2FyZElkKCkge1xuICAgIHJldHVybiB0aGlzLiNjYXJkSWQ7XG4gIH1cblxuICAjZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy4jdGVtcGxhdGVTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZScpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIGlzTGlrZWQoKSB7XG4gICAgLy8gY29uc29sZS5sb2coJzEnKTtcbiAgICBjb25zb2xlLmxvZyh0aGlzLiNsaWtlcyk7XG4gICAgcmV0dXJuIHRoaXMuI2xpa2VkO1xuICAgIC8vIHJldHVybiB0aGlzLiNsaWtlcy5zb21lKChlbGVtZW50KSA9PiB7XG4gICAgLy8gICAvLyBkZWJ1Z2dlcjtcbiAgICAvLyAgIHJldHVybiBlbGVtZW50Ll9pZCA9PT0gbXlVc2VySWQ7XG4gICAgLy8gfSk7XG4gIH1cblxuICBzZXRMaWtlKGRhdGEpIHtcbiAgICB0aGlzLiNjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZV9fbGlrZXMtY291bnQnKS50ZXh0Q29udGVudCA9XG4gICAgICBkYXRhLmxpa2VzLmxlbmd0aDtcbiAgICB0aGlzLiNsaWtlZCA9IGRhdGEubGlrZXMuc29tZSgoZWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuIGVsZW1lbnQuX2lkID09PSBteVVzZXJJZDtcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZyhkYXRhLmxpa2VzLmxlbmd0aCk7XG4gICAgaWYgKHRoaXMuI2xpa2VkKSB7XG4gICAgICB0aGlzLiNsaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3BsYWNlX19saWtlX2FjdGl2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiNsaWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3BsYWNlX19saWtlX2FjdGl2ZScpO1xuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZUNhcmQoKSB7XG4gICAgdGhpcy4jY2FyZCA9IHRoaXMuI2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy4jcGxhY2VQaG90byA9IHRoaXMuI2NhcmQucXVlcnlTZWxlY3RvcignLnBsYWNlX19waG90bycpO1xuICAgIHRoaXMuI3BsYWNlUGhvdG8uc3JjID0gdGhpcy4jbGluaztcbiAgICB0aGlzLiNwbGFjZVBob3RvLmFsdCA9IHRoaXMuI25hbWU7XG4gICAgdGhpcy4jY2FyZC5xdWVyeVNlbGVjdG9yKCcucGxhY2VfX3RpdGxlJykuaW5uZXJUZXh0ID0gdGhpcy4jbmFtZTtcbiAgICB0aGlzLiNkZWxldGVCdXR0b24gPSB0aGlzLiNjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZV9fZGVsZXRlJyk7XG4gICAgdGhpcy4jbGlrZUJ1dHRvbiA9IHRoaXMuI2NhcmQucXVlcnlTZWxlY3RvcignLnBsYWNlX19saWtlJyk7XG4gICAgdGhpcy5zZXRMaWtlKHRoaXMuI2RhdGEpO1xuICAgIC8vIHRoaXMuI2NhcmQucXVlcnlTZWxlY3RvcignLnBsYWNlX19saWtlcy1jb3VudCcpLnRleHRDb250ZW50ID1cbiAgICAvLyAgIHRoaXMuI2xpa2VzQ291bnQ7XG4gICAgaWYgKHRoaXMuI293bmVyID09PSBteVVzZXJJZCkge1xuICAgICAgdGhpcy4jZGVsZXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3BsYWNlX19kZWxldGVfYWN0aXZlJyk7XG4gICAgfVxuICAgIC8vIHRoaXMuI2xpa2VzLnNvbWUoKGVsZW1lbnQpID0+IHtcbiAgICAvLyAgIGlmIChlbGVtZW50Ll9pZCA9PT0gbXlVc2VySWQpIHtcbiAgICAvLyAgICAgdGhpcy4jbGlrZUNhcmQoKTtcbiAgICAvLyAgIH1cbiAgICAvLyB9KTtcbiAgICB0aGlzLiNzZXRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLiNjYXJkO1xuICB9XG5cbiAgI3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuI2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuI2hhbmRsZUNhcmREZWxldGUodGhpcyk7XG4gICAgfSk7XG4gICAgdGhpcy4jbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuI2hhbmRsZUNhcmRMaWtlKHRoaXMpO1xuICAgICAgLy8gdGhpcy4jbGlrZUNhcmQoKTtcbiAgICB9KTtcbiAgICB0aGlzLiNwbGFjZVBob3RvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy4jaGFuZGxlQ2FyZENsaWNrKHRoaXMuI25hbWUsIHRoaXMuI2xpbmspO1xuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLiNjYXJkLnJlbW92ZSgpO1xuICB9XG5cbiAgI2xpa2VDYXJkKCkge1xuICAgIHRoaXMuI2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgncGxhY2VfX2xpa2VfYWN0aXZlJyk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgI3BvcHVwO1xuXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLiNwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuI3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLiNoYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLiNwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy4jaGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgI2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLiNwb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLiNwb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICAjcG9wdXA7XG4gICNmdWxsUGhvdG9JbWFnZTtcbiAgI2Z1bGxQaG90b0NhcHRpb247XG5cbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuI3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLiNmdWxsUGhvdG9JbWFnZSA9IHRoaXMuI3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAnLnBsYWNlLWZ1bGwtcGhvdG9fX2ltYWdlJ1xuICAgICk7XG4gICAgdGhpcy4jZnVsbFBob3RvQ2FwdGlvbiA9IHRoaXMuI3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAnLnBsYWNlLWZ1bGwtcGhvdG9fX2NhcHRpb24nXG4gICAgKTtcbiAgfVxuXG4gIG9wZW4obmFtZSwgbGluaykge1xuICAgIHRoaXMuI2Z1bGxQaG90b0ltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy4jZnVsbFBob3RvSW1hZ2UuYWx0ID0gbmFtZTtcbiAgICB0aGlzLiNmdWxsUGhvdG9DYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICAjaGFuZGxlRm9ybVN1Ym1pdDtcbiAgI2Zvcm1WYWx1ZXM7XG4gICNpbnB1dExpc3Q7XG4gICNwb3B1cDtcbiAgI2Zvcm07XG5cbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuI3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLiNoYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLiNmb3JtID0gdGhpcy4jcG9wdXAucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xuICAgIHRoaXMuI2lucHV0TGlzdCA9IHRoaXMuI3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIik7XG4gIH1cblxuICAjZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy4jZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuI2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy4jZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLiNmb3JtVmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy4jZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy4jaGFuZGxlRm9ybVN1Ym1pdCh0aGlzLiNnZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLiNmb3JtLnJlc2V0KCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgI3Byb2ZpbGVOYW1lO1xuICAjcHJvZmlsZUJpbztcbiAgI3Byb2ZpbGVBdmF0YXI7XG4gICNhdmF0YXI7XG4gICNpZDtcblxuICBjb25zdHJ1Y3Rvcih1c2VyRGF0YVNlbGVjdG9ycykge1xuICAgIHRoaXMuI3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHVzZXJEYXRhU2VsZWN0b3JzLnByb2ZpbGVOYW1lU2VsZWN0b3JcbiAgICApO1xuICAgIHRoaXMuI3Byb2ZpbGVCaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdXNlckRhdGFTZWxlY3RvcnMucHJvZmlsZUJpb1NlbGVjdG9yXG4gICAgKTtcbiAgICB0aGlzLiNwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHVzZXJEYXRhU2VsZWN0b3JzLnByb2ZpbGVBdmF0YXJTZWxlY3RvclxuICAgICk7XG4gICAgLy8gdGhpcy4jYXZhdGFyID1cbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLiNwcm9maWxlTmFtZS50ZXh0Q29udGVudCxcbiAgICAgIGJpbzogdGhpcy4jcHJvZmlsZUJpby50ZXh0Q29udGVudCxcbiAgICAgIGF2YXRhcjogdGhpcy4jYXZhdGFyLFxuICAgICAgaWQ6IHRoaXMuI2lkLFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyhuZXdVc2VyRGF0YSkge1xuICAgIHRoaXMuI3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmV3VXNlckRhdGEubmFtZTtcbiAgICB0aGlzLiNwcm9maWxlQmlvLnRleHRDb250ZW50ID0gbmV3VXNlckRhdGEuYWJvdXQ7XG4gICAgdGhpcy4jcHJvZmlsZUF2YXRhci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPVxuICAgICAgJ3VybCgnICsgYCR7bmV3VXNlckRhdGEuYXZhdGFyfWAgKyAnKSc7XG4gICAgY29uc29sZS5sb2cobmV3VXNlckRhdGEuYXZhdGFyKTtcbiAgICAvLyB0aGlzLiNpZCA9IG5ld1VzZXJEYXRhLmlkO1xuICAgIC8vIGNvbnNvbGUubG9nKG5ld1VzZXJEYXRhLmlkKTtcbiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLiNpZCk7XG4gIH1cbn1cbiIsIi8vIGltcG9ydCB7IG5hbWVJbnB1dCwgYmlvSW5wdXQgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICAjYmFzZVVybDtcbiAgI2hlYWRlcnM7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuI2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XG4gICAgdGhpcy4jaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcbiAgfVxuXG4gICNoYW5kbGVSZXNwb25zZSA9IChyZXNwb25zZSkgPT4ge1xuICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgIH1cbiAgfTtcblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuI2Jhc2VVcmwgKyAnL2NhcmRzJywge1xuICAgICAgaGVhZGVyczogdGhpcy4jaGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuI2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIGdldFVzZXJEYXRhKCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLiNiYXNlVXJsICsgJy91c2Vycy9tZScsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuI2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLiNoYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICBzYXZlVXNlckRhdGEoaW5wdXREYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuI2Jhc2VVcmwgKyAnL3VzZXJzL21lJywge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy4jaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogaW5wdXREYXRhLm5hbWUsXG4gICAgICAgIGFib3V0OiBpbnB1dERhdGEuYmlvLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLiNoYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICBhZGROZXdDYXJkKGNhcmREYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuI2Jhc2VVcmwgKyAnL2NhcmRzJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLiNoZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBjYXJkRGF0YS5uYW1lLFxuICAgICAgICBsaW5rOiBjYXJkRGF0YS5saW5rLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLiNoYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLiNiYXNlVXJsICsgYC9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy4jaGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuI2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLiNiYXNlVXJsICsgYC9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgaGVhZGVyczogdGhpcy4jaGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuI2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIGRpc2xpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLiNiYXNlVXJsICsgYC9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy4jaGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuI2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIHVwZGF0ZUF2YXRhcihpbnB1dExpbmspIHtcbiAgICBjb25zb2xlLmxvZyhpbnB1dExpbmspO1xuICAgIHJldHVybiBmZXRjaCh0aGlzLiNiYXNlVXJsICsgYC91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLiNoZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoaW5wdXRMaW5rKSxcbiAgICB9KS50aGVuKHRoaXMuI2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gICNoYW5kbGVGb3JtU3VibWl0O1xuICAjZm9ybVZhbHVlcztcbiAgI2lucHV0TGlzdDtcbiAgI3BvcHVwO1xuICAjZm9ybTtcblxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy4jcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuI2Zvcm0gPSB0aGlzLiNwb3B1cC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xuICB9XG5cbiAgc2V0Rm9ybUhhbmRsZXIoaGFuZGxlcikge1xuICAgIHRoaXMuI2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVyO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy4jZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuI2hhbmRsZUZvcm1TdWJtaXQoKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxufVxuIiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5cbmltcG9ydCB7XG4gIHZhbGlkYXRpb25Db25maWcsXG4gIGVkaXRJbmZvQnV0dG9uLFxuICBhZGRQbGFjZUJ1dHRvbixcbiAgYWRkUGxhY2VGb3JtRWxlbWVudCxcbiAgYWRkUGxhY2VQb3B1cFNlbGVjdG9yLFxuICBjYXJkVGVtcGxhdGVTZWxlY3RvcixcbiAgY2FyZHNDb250YWluZXJTZWxlY3RvcixcbiAgZWRpdEluZm9Gb3JtRWxlbWVudCxcbiAgZWRpdEluZm9Qb3B1cFNlbGVjdG9yLFxuICBwb3B1cEZ1bGxQaG90b1NlbGVjdG9yLFxuICBiaW9JbnB1dCxcbiAgbmFtZUlucHV0LFxuICB1c2VyRGF0YVNlbGVjdG9ycyxcbiAgcHJvZmlsZUF2YXRhclNlbGVjdG9yLFxuICBjb25maXJtRGVsZXRpb25Qb3B1cFNlbGVjdG9yLFxuICBkZWxldGVQbGFjZUJ1dHRvbixcbiAgZGVsZXRlUGxhY2VQb3B1cFNlbGVjdG9yLFxuICB1cGRhdGVBdmF0YXJQb3B1cFNlbGVjdG9yLFxuICB1cGRhdGVQcm9maWxlQXZhdGFyQnV0dG9uLFxuICB1cGRhdGVBdmF0YXJGb3JtRWxlbWVudCxcbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcblxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCBBcGkgZnJvbSAnLi4vY29tcG9uZW50cy9BcGkuanMnO1xuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyc7XG5cbmV4cG9ydCBsZXQgbXlVc2VySWQgPSBudWxsO1xuLy8gbGV0IGNhcmRJZCA9IG51bGw7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0yNycsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiAnMzc1ODBlMjktY2E0My00ZTYwLWJmYzQtOTczMWQ2MTY3NjkxJyxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICB9LFxufSk7XG5cbi8vPyBQcm9taXNlLmFsbDtcblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XG4gICAgZGF0YTogaXRlbSxcbiAgICB0ZW1wbGF0ZVNlbGVjdG9yOiBjYXJkVGVtcGxhdGVTZWxlY3RvcixcbiAgICBoYW5kbGVDYXJkQ2xpY2s6IChuYW1lLCBsaW5rKSA9PiB7XG4gICAgICBwb3B1cEZ1bGxQaG90by5vcGVuKG5hbWUsIGxpbmspO1xuICAgIH0sXG4gICAgaGFuZGxlQ2FyZERlbGV0ZTogKGNhcmRJbnN0YW5jZSkgPT4ge1xuICAgICAgZGVsZXRlQ2FyZChjYXJkSW5zdGFuY2UpO1xuICAgIH0sXG4gICAgaGFuZGxlQ2FyZExpa2U6IChjYXJkSW5zdGFuY2UpID0+IHtcbiAgICAgIGxpa2VDYXJkKGNhcmRJbnN0YW5jZSk7XG4gICAgfSxcbiAgfSk7XG4gIHJldHVybiBjYXJkLmNyZWF0ZUNhcmQoKTtcbn1cblxuZnVuY3Rpb24gbGlrZUNhcmQoY2FyZCkge1xuICBjb25zb2xlLmxvZyhjYXJkLmlzTGlrZWQoKSk7XG4gIGNvbnN0IGNoZWNrRm9yTGlrZSA9IGNhcmQuaXNMaWtlZCgpXG4gICAgPyBhcGkuZGlzbGlrZUNhcmQoY2FyZC5nZXRDYXJkSWQoKSlcbiAgICA6IGFwaS5saWtlQ2FyZChjYXJkLmdldENhcmRJZCgpKTtcbiAgLy8gY29uc29sZS5sb2coYXBpLmRpc2xpa2VDYXJkKGNhcmQuZ2V0Q2FyZElkKCkpKTtcbiAgY2hlY2tGb3JMaWtlXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIGNhcmQuc2V0TGlrZShkYXRhKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgLy8gY29uc29sZS5sb2coY2hlY2tGb3JMaWtlKTtcbiAgLy8gY2FyZC5saWtlcy5zb21lKChlbGVtZW50KSA9PiB7XG4gIC8vICAgaWYgKGVsZW1lbnQuX2lkID09PSBteVVzZXJJZCkge1xuICAvLyAgICAgYXBpLmxpa2VDYXJkKGNhcmQuY2FyZElkKTtcbiAgLy8gICB9IGVsc2Uge1xuICAvLyAgICAgYXBpLmRpc2xpa2VDYXJkKGNhcmQuY2FyZElkKTtcbiAgLy8gICB9XG4gIC8vIH0pO1xufVxuXG5mdW5jdGlvbiBkZWxldGVDYXJkKGNhcmQpIHtcbiAgcG9wdXBEZWxldGVQbGFjZS5vcGVuKCk7XG4gIHBvcHVwRGVsZXRlUGxhY2Uuc2V0Rm9ybUhhbmRsZXIoKCkgPT4ge1xuICAgIGFwaS5kZWxldGVDYXJkKGNhcmQuZ2V0Q2FyZElkKCkpLnRoZW4oKCkgPT4ge1xuICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XG4gICAgICBwb3B1cERlbGV0ZVBsYWNlLmNsb3NlKCk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh1c2VyRGF0YVNlbGVjdG9ycyk7XG5nZXRVc2VyRGF0YUZyb21TZXJ2ZXIoKTtcblxuY29uc3QgY2FyZHNQcm9taXNlID0gYXBpLmdldEluaXRpYWxDYXJkcygpO1xuXG5jb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY2FyZHNMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChpdGVtKSk7XG4gICAgfSxcbiAgfSxcbiAgY2FyZHNDb250YWluZXJTZWxlY3RvclxuKTtcblxuY2FyZHNQcm9taXNlXG4gIC50aGVuKChkYXRhKSA9PiB7XG4gICAgY2FyZHNMaXN0LnJlbmRlckl0ZW1zKGRhdGEpO1xuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycik7XG4gIH0pO1xuXG5mdW5jdGlvbiBnZXRVc2VyRGF0YUZyb21TZXJ2ZXIoKSB7XG4gIGNvbnN0IHByb2ZpbGVEYXRhUHJvbWlzZSA9IGFwaS5nZXRVc2VyRGF0YSgpO1xuICBwcm9maWxlRGF0YVByb21pc2VcbiAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICBteVVzZXJJZCA9IHJlc3VsdC5faWQ7XG4gICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xuICAgICAgICBuYW1lOiByZXN1bHQubmFtZSxcbiAgICAgICAgYWJvdXQ6IHJlc3VsdC5hYm91dCxcbiAgICAgICAgYXZhdGFyOiByZXN1bHQuYXZhdGFyLFxuICAgICAgICBpZDogcmVzdWx0Ll9pZCxcbiAgICAgIH0pO1xuICAgICAgLy8gZWRpdEluZm9Gb3JtVmFsaWRhdG9yLmhpZGVFcnJvcigpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG59XG5cbmNvbnN0IHBvcHVwRnVsbFBob3RvID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwRnVsbFBob3RvU2VsZWN0b3IpO1xucG9wdXBGdWxsUGhvdG8uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcG9wdXBFZGl0SW5mbyA9IG5ldyBQb3B1cFdpdGhGb3JtKGVkaXRJbmZvUG9wdXBTZWxlY3RvciwgKGlucHV0RGF0YSkgPT4ge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyhpbnB1dERhdGEpO1xuICBhcGkuc2F2ZVVzZXJEYXRhKGlucHV0RGF0YSk7XG4gIHBvcHVwRWRpdEluZm8uY2xvc2UoKTtcbn0pO1xuXG5wb3B1cEVkaXRJbmZvLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5lZGl0SW5mb0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgcG9wdXBFZGl0SW5mby5vcGVuKCk7XG4gIGNvbnN0IHByb2ZpbGVEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgbmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZURhdGEubmFtZTtcbiAgYmlvSW5wdXQudmFsdWUgPSBwcm9maWxlRGF0YS5iaW87XG4gIGVkaXRJbmZvRm9ybVZhbGlkYXRvci5oaWRlRXJyb3IoKTtcbn0pO1xuXG5jb25zdCBwb3B1cEFkZFBsYWNlID0gbmV3IFBvcHVwV2l0aEZvcm0oYWRkUGxhY2VQb3B1cFNlbGVjdG9yLCAoaW5wdXREYXRhKSA9PiB7XG4gIGlucHV0RGF0YS5saWtlcyA9IFtdO1xuICBpbnB1dERhdGEub3duZXIgPSB7IF9pZDogbXlVc2VySWQgfTtcbiAgYXBpXG4gICAgLmFkZE5ld0NhcmQoaW5wdXREYXRhKVxuICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgIGlucHV0RGF0YS5faWQgPSByZXN1bHQuX2lkO1xuICAgICAgY2FyZHNMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChpbnB1dERhdGEpLCBmYWxzZSk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbiAgcG9wdXBBZGRQbGFjZS5jbG9zZSgpO1xufSk7XG5cbnBvcHVwQWRkUGxhY2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmFkZFBsYWNlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBwb3B1cEFkZFBsYWNlLm9wZW4oKTtcbiAgYWRkUGxhY2VGb3JtRWxlbWVudC5yZXNldCgpO1xuICBhZGRQbGFjZUZvcm1WYWxpZGF0b3IuaGlkZUVycm9yKCk7XG59KTtcblxuY29uc3QgcG9wdXBVcGRhdGVBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgdXBkYXRlQXZhdGFyUG9wdXBTZWxlY3RvcixcbiAgKGlucHV0KSA9PiB7XG4gICAgY29uc29sZS5sb2coYXBpLnVwZGF0ZUF2YXRhcihpbnB1dCkpO1xuICAgIGFwaVxuICAgICAgLnVwZGF0ZUF2YXRhcihpbnB1dClcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzdWx0KTtcbiAgICAgICAgLy8gaW5wdXREYXRhLl9pZCA9IHJlc3VsdC5faWQ7XG4gICAgICAgIC8vIGNhcmRzTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoaW5wdXREYXRhKSwgZmFsc2UpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgICBwb3B1cFVwZGF0ZUF2YXRhci5jbG9zZSgpO1xuICB9XG4pO1xucG9wdXBVcGRhdGVBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxudXBkYXRlUHJvZmlsZUF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgcG9wdXBVcGRhdGVBdmF0YXIub3BlbigpO1xufSk7XG5cbmNvbnN0IHBvcHVwRGVsZXRlUGxhY2UgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFxuICBjb25maXJtRGVsZXRpb25Qb3B1cFNlbGVjdG9yXG4pO1xuXG5wb3B1cERlbGV0ZVBsYWNlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHVwZGF0ZUF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvbkNvbmZpZyxcbiAgdXBkYXRlQXZhdGFyRm9ybUVsZW1lbnRcbik7XG51cGRhdGVBdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgZWRpdEluZm9Gb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRpb25Db25maWcsXG4gIGVkaXRJbmZvRm9ybUVsZW1lbnRcbik7XG5lZGl0SW5mb0Zvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBhZGRQbGFjZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvbkNvbmZpZyxcbiAgYWRkUGxhY2VGb3JtRWxlbWVudFxuKTtcbmFkZFBsYWNlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbi8vIGNvbnNvbGUubG9nKG15VXNlcklkKTtcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInZhbGlkYXRpb25Db25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImVkaXRJbmZvQnV0dG9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWRpdEluZm9Gb3JtRWxlbWVudCIsIm5hbWVJbnB1dCIsImJpb0lucHV0IiwiYWRkUGxhY2VCdXR0b24iLCJhZGRQbGFjZUZvcm1FbGVtZW50IiwidXBkYXRlUHJvZmlsZUF2YXRhckJ1dHRvbiIsInVwZGF0ZUF2YXRhckZvcm1FbGVtZW50IiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInJlbW92ZSIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwic29tZSIsImV2dCIsInByZXZlbnREZWZhdWx0IiwidGhpcyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsInJlbmRlcmVkSXRlbXMiLCJpdGVtIiwiZWxlbWVudCIsIm9yZGVyIiwiYXBwZW5kIiwicHJlcGVuZCIsIkNhcmQiLCJkYXRhIiwidGVtcGxhdGVTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUNhcmREZWxldGUiLCJoYW5kbGVDYXJkTGlrZSIsIm5hbWUiLCJsaW5rIiwib3duZXIiLCJfaWQiLCJsaWtlcyIsImxlbmd0aCIsImNvbnNvbGUiLCJsb2ciLCJteVVzZXJJZCIsInNyYyIsImFsdCIsImlubmVyVGV4dCIsInNldExpa2UiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIlBvcHVwV2l0aEltYWdlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJyZXNldCIsImlucHV0IiwidmFsdWUiLCJVc2VySW5mbyIsInVzZXJEYXRhU2VsZWN0b3JzIiwicHJvZmlsZU5hbWVTZWxlY3RvciIsInByb2ZpbGVCaW9TZWxlY3RvciIsInByb2ZpbGVBdmF0YXJTZWxlY3RvciIsImJpbyIsImF2YXRhciIsIm5ld1VzZXJEYXRhIiwiYWJvdXQiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsIkFwaSIsIm9wdGlvbnMiLCJyZXNwb25zZSIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJiYXNlVXJsIiwiaGVhZGVycyIsImZldGNoIiwidGhlbiIsImlucHV0RGF0YSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2FyZERhdGEiLCJjYXJkSWQiLCJpbnB1dExpbmsiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJoYW5kbGVyIiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsImNyZWF0ZUNhcmQiLCJwb3B1cEZ1bGxQaG90byIsIm9wZW4iLCJjYXJkSW5zdGFuY2UiLCJjYXJkIiwicG9wdXBEZWxldGVQbGFjZSIsInNldEZvcm1IYW5kbGVyIiwiZGVsZXRlQ2FyZCIsImdldENhcmRJZCIsImlzTGlrZWQiLCJkaXNsaWtlQ2FyZCIsImxpa2VDYXJkIiwiY2F0Y2giLCJlcnIiLCJ1c2VySW5mbyIsImdldFVzZXJEYXRhIiwicmVzdWx0Iiwic2V0VXNlckluZm8iLCJjYXJkc1Byb21pc2UiLCJnZXRJbml0aWFsQ2FyZHMiLCJjYXJkc0xpc3QiLCJhZGRJdGVtIiwicmVuZGVySXRlbXMiLCJzZXRFdmVudExpc3RlbmVycyIsInBvcHVwRWRpdEluZm8iLCJzYXZlVXNlckRhdGEiLCJwcm9maWxlRGF0YSIsImdldFVzZXJJbmZvIiwiZWRpdEluZm9Gb3JtVmFsaWRhdG9yIiwiaGlkZUVycm9yIiwicG9wdXBBZGRQbGFjZSIsImFkZE5ld0NhcmQiLCJhZGRQbGFjZUZvcm1WYWxpZGF0b3IiLCJwb3B1cFVwZGF0ZUF2YXRhciIsInVwZGF0ZUF2YXRhciIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9