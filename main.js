!function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};e.d({},{Y:function(){return Wt}});var t={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},n=document.querySelector(".button_type_edit"),r=document.querySelector(".profile-edit__form"),o=r.querySelector("[name='name']"),i=r.querySelector("[name='bio']"),a=document.querySelector(".button_type_add"),l=document.querySelector(".place-add__form");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,f(e,t,"get"))}function s(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,f(e,t,"set"),n),n}function f(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}document.querySelector(".button_type_delete");var p=new WeakMap,v=new WeakMap,h=new WeakMap,d=new WeakMap,y=new WeakMap,w=new WeakMap,b=new WeakMap,m=new WeakMap,k=new WeakMap,g=new WeakMap,_=new WeakMap,S=new WeakMap,E=new WeakMap,W=new WeakMap,O=new WeakMap,M=function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p.set(this,{writable:!0,value:void 0}),v.set(this,{writable:!0,value:void 0}),h.set(this,{writable:!0,value:void 0}),d.set(this,{writable:!0,value:void 0}),y.set(this,{writable:!0,value:void 0}),w.set(this,{writable:!0,value:void 0}),b.set(this,{writable:!0,value:void 0}),m.set(this,{writable:!0,value:void 0}),k.set(this,{writable:!0,value:void 0}),g.set(this,{writable:!0,value:function(e){e.validity.valid?c(r,S).call(r,e):c(r,_).call(r,e,e.validationMessage)}}),_.set(this,{writable:!0,value:function(e,t){var n=c(r,b).querySelector(".".concat(e.id,"-error"));e.classList.add(c(r,y)),n.textContent=t,n.classList.add(c(r,w))}}),S.set(this,{writable:!0,value:function(e){var t=c(r,b).querySelector(".".concat(e.id,"-error"));e.classList.remove(c(r,y)),t.classList.remove(c(r,w)),t.textContent=""}}),u(this,"hideError",(function(){c(r,m).forEach((function(e){c(r,S).call(r,e),c(r,W).call(r)}))})),E.set(this,{writable:!0,value:function(){c(r,W).call(r),c(r,m).forEach((function(e){e.addEventListener("input",(function(){c(r,g).call(r,e),c(r,W).call(r)}))}))}}),W.set(this,{writable:!0,value:function(){c(r,O).call(r)?(c(r,k).classList.add(c(r,d)),c(r,k).setAttribute("disabled",!0)):(c(r,k).classList.remove(c(r,d)),c(r,k).removeAttribute("disabled"))}}),O.set(this,{writable:!0,value:function(){return c(r,m).some((function(e){return!e.validity.valid}))}}),u(this,"enableValidation",(function(){c(r,b).addEventListener("submit",(function(e){e.preventDefault(),c(r,W).call(r)})),c(r,E).call(r)})),s(this,p,t.formSelector),s(this,v,t.inputSelector),s(this,h,t.submitButtonSelector),s(this,d,t.inactiveButtonClass),s(this,y,t.inputErrorClass),s(this,w,t.errorClass),s(this,b,n),s(this,m,Array.from(c(this,b).querySelectorAll(c(this,v)))),s(this,k,c(this,b).querySelector(c(this,h)))};function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,P(e,t,"get"))}function T(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,P(e,t,"set"),n),n}function P(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var L=new WeakMap,q=new WeakMap,R=new WeakMap,x=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),L.set(this,{writable:!0,value:void 0}),q.set(this,{writable:!0,value:void 0}),R.set(this,{writable:!0,value:void 0}),T(this,q,r),T(this,R,document.querySelector(n))}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){j(t,q).call(t,e)}))}},{key:"addItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t?j(this,R).append(e):j(this,R).prepend(e)}}])&&C(t.prototype,n),e}();function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function B(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,A(e,t,"get"))}function U(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,A(e,t,"set"),n),n}function A(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var N=new WeakMap,V=new WeakMap,J=new WeakMap,z=new WeakMap,H=new WeakMap,Y=new WeakMap,F=new WeakMap,G=new WeakMap,K=new WeakMap,Q=new WeakMap,X=new WeakMap,Z=new WeakMap,$=new WeakSet,ee=new WeakSet,te=new WeakSet,ne=new WeakSet,re=function(){function e(t){var n=t.data,r=t.templateSelector,o=t.handleCardClick,i=t.handleCardDelete;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ne.add(this),te.add(this),ee.add(this),$.add(this),N.set(this,{writable:!0,value:void 0}),V.set(this,{writable:!0,value:void 0}),J.set(this,{writable:!0,value:void 0}),z.set(this,{writable:!0,value:void 0}),H.set(this,{writable:!0,value:void 0}),Y.set(this,{writable:!0,value:void 0}),F.set(this,{writable:!0,value:void 0}),G.set(this,{writable:!0,value:void 0}),K.set(this,{writable:!0,value:void 0}),Q.set(this,{writable:!0,value:void 0}),X.set(this,{writable:!0,value:void 0}),Z.set(this,{writable:!0,value:void 0}),U(this,N,n.name),U(this,V,n.link),U(this,Q,n.owner._id),U(this,Z,n._id),n.likes.length?U(this,K,n.likes.length):U(this,K,0),U(this,J,r),U(this,G,o),U(this,X,i)}var t,n;return t=e,(n=[{key:"getCardId",value:function(){return B(this,Z)}},{key:"createCard",value:function(){return U(this,z,D(this,$,oe).call(this)),U(this,F,B(this,z).querySelector(".place__photo")),B(this,F).src=B(this,V),B(this,F).alt=B(this,N),B(this,z).querySelector(".place__title").innerText=B(this,N),U(this,H,B(this,z).querySelector(".place__delete")),U(this,Y,B(this,z).querySelector(".place__like")),B(this,z).querySelector(".place__likes-count").textContent=B(this,K),B(this,Q)==Wt&&B(this,H).classList.remove("place__delete_active"),D(this,ee,ie).call(this),B(this,z)}}])&&I(t.prototype,n),e}();function oe(){return document.querySelector(B(this,J)).content.querySelector(".place").cloneNode(!0)}function ie(){var e=this;B(this,H).addEventListener("click",(function(){B(e,X).call(e,e)})),B(this,Y).addEventListener("click",(function(){D(e,ne,ae).call(e)})),B(this,F).addEventListener("click",(function(){B(e,G).call(e,B(e,N),B(e,V))}))}function ae(){B(this,Y).classList.toggle("place__like_active")}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ce(e,t,"get"))}function ce(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var se=new WeakMap,fe=new WeakMap,pe=function(){function e(t){var n,r,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),se.set(this,{writable:!0,value:void 0}),fe.set(this,{writable:!0,value:function(e){"Escape"===e.key&&i.close()}}),n=this,r=se,o=document.querySelector(t),function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(n,ce(n,r,"set"),o)}var t,n;return t=e,(n=[{key:"open",value:function(){ue(this,se).classList.add("popup_opened"),document.addEventListener("keydown",ue(this,fe))}},{key:"close",value:function(){ue(this,se).classList.remove("popup_opened"),document.removeEventListener("keydown",ue(this,fe))}},{key:"setEventListeners",value:function(){var e=this;ue(this,se).querySelector(".popup__close").addEventListener("click",(function(){e.close()})),ue(this,se).addEventListener("click",(function(t){t.target===t.currentTarget&&e.close()}))}}])&&le(t.prototype,n),e}();function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t,n){return(de="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=me(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function we(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?be(e):t}function be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,_e(e,t,"get"))}function ge(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,_e(e,t,"set"),n),n}function _e(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Se=new WeakMap,Ee=new WeakMap,We=new WeakMap,Oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=me(r);if(o){var n=me(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return we(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),Se.set(be(t),{writable:!0,value:void 0}),Ee.set(be(t),{writable:!0,value:void 0}),We.set(be(t),{writable:!0,value:void 0}),ge(be(t),Se,document.querySelector(e)),ge(be(t),Ee,ke(be(t),Se).querySelector(".place-full-photo__image")),ge(be(t),We,ke(be(t),Se).querySelector(".place-full-photo__caption")),t}return t=a,(n=[{key:"open",value:function(e,t){ke(this,Ee).src=t,ke(this,Ee).alt=e,ke(this,We).textContent=e,de(me(a.prototype),"open",this).call(this)}}])&&he(t.prototype,n),a}(pe);function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t,n){return(je="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e,t){return!t||"object"!==Me(t)&&"function"!=typeof t?Le(e):t}function Le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Re(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ie(e,t,"get"))}function xe(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ie(e,t,"set"),n),n}function Ie(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var De=new WeakMap,Be=new WeakMap,Ue=new WeakMap,Ae=new WeakMap,Ne=new WeakMap,Ve=new WeakSet,Je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=qe(r);if(o){var n=qe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Pe(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=i.call(this,e),Ve.add(Le(n)),De.set(Le(n),{writable:!0,value:void 0}),Be.set(Le(n),{writable:!0,value:void 0}),Ue.set(Le(n),{writable:!0,value:void 0}),Ae.set(Le(n),{writable:!0,value:void 0}),Ne.set(Le(n),{writable:!0,value:void 0}),xe(Le(n),Ae,document.querySelector(e)),xe(Le(n),De,t),xe(Le(n),Ne,Re(Le(n),Ae).querySelector(".form")),xe(Le(n),Ue,Re(Le(n),Ae).querySelectorAll(".form__input")),n}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;Re(this,Ne).addEventListener("submit",(function(t){t.preventDefault(),Re(e,De).call(e,function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(e,Ve,ze).call(e))})),je(qe(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){je(qe(a.prototype),"close",this).call(this),Re(this,Ne).reset()}}])&&Ce(t.prototype,n),a}(pe);function ze(){var e=this;return xe(this,Be,{}),Re(this,Ue).forEach((function(t){Re(e,Be)[t.name]=t.value})),Re(this,Be)}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ye(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ge(e,t,"get"))}function Fe(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ge(e,t,"set"),n),n}function Ge(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Ke=new WeakMap,Qe=new WeakMap,Xe=new WeakMap,Ze=new WeakMap,$e=new WeakMap,et=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ke.set(this,{writable:!0,value:void 0}),Qe.set(this,{writable:!0,value:void 0}),Xe.set(this,{writable:!0,value:void 0}),Ze.set(this,{writable:!0,value:void 0}),$e.set(this,{writable:!0,value:void 0}),Fe(this,Ke,document.querySelector(t.profileNameSelector)),Fe(this,Qe,document.querySelector(t.profileBioSelector)),Fe(this,Xe,document.querySelector(t.profileAvatarSelector))}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:Ye(this,Ke).textContent,bio:Ye(this,Qe).textContent,avatar:Ye(this,Ze),id:Ye(this,$e)}}},{key:"setUserInfo",value:function(e){Ye(this,Ke).textContent=e.name,Ye(this,Qe).textContent=e.bio}}])&&He(t.prototype,n),e}();function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ot(e,t,"get"))}function rt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ot(e,t,"set"),n),n}function ot(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var it=new WeakMap,at=new WeakMap,lt=new WeakMap,ut=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),it.set(this,{writable:!0,value:void 0}),at.set(this,{writable:!0,value:void 0}),lt.set(this,{writable:!0,value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}}),rt(this,it,t.baseUrl),rt(this,at,t.headers)}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return fetch(nt(this,it)+"/cards",{headers:nt(this,at)}).then(nt(this,lt))}},{key:"getUserData",value:function(){return fetch(nt(this,it)+"/users/me",{headers:nt(this,at)}).then(nt(this,lt))}},{key:"saveUserData",value:function(e){return fetch(nt(this,it)+"/users/me",{method:"PATCH",headers:nt(this,at),body:JSON.stringify({name:e.name,about:e.bio})}).then(nt(this,lt))}},{key:"addNewCard",value:function(e){return fetch(nt(this,it)+"/cards",{method:"POST",headers:nt(this,at),body:JSON.stringify({name:e.name,link:e.link})}).then(nt(this,lt))}},{key:"deleteCard",value:function(e){return fetch(nt(this,it)+"/cards/".concat(e),{method:"DELETE",headers:nt(this,at)}).then(nt(this,lt))}}])&&tt(t.prototype,n),e}();function ct(e){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ft(e,t,n){return(ft="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function pt(e,t){return(pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vt(e,t){return!t||"object"!==ct(t)&&"function"!=typeof t?ht(e):t}function ht(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dt(e){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,bt(e,t,"get"))}function wt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,bt(e,t,"set"),n),n}function bt(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var mt=new WeakMap,kt=new WeakMap,gt=new WeakMap,_t=new WeakMap,St=new WeakMap,Et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pt(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=dt(r);if(o){var n=dt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return vt(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=i.call(this,e),mt.set(ht(n),{writable:!0,value:void 0}),kt.set(ht(n),{writable:!0,value:void 0}),gt.set(ht(n),{writable:!0,value:void 0}),_t.set(ht(n),{writable:!0,value:void 0}),St.set(ht(n),{writable:!0,value:void 0}),wt(ht(n),_t,document.querySelector(e)),wt(ht(n),mt,t),wt(ht(n),St,yt(ht(n),_t).querySelector(".form")),n}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;yt(this,St).addEventListener("submit",(function(t){t.preventDefault(),yt(e,mt).call(e)})),ft(dt(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){ft(dt(a.prototype),"close",this).call(this)}}])&&st(t.prototype,n),a}(pe),Wt=null,Ot=null,Mt=new ut({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-27",headers:{authorization:"37580e29-ca43-4e60-bfc4-9731d6167691","Content-Type":"application/json"}});function Ct(e){return new re({data:e,templateSelector:".card-template",handleCardClick:function(e,t){Lt.open(e,t)},handleCardDelete:function(e){var t;t=e,xt.open(),Ot=t.getCardId(),console.log(Ot)}}).createCard()}var jt=new et({profileNameSelector:".profile__name",profileBioSelector:".profile__bio",profileAvatarSelector:".profile__avatar"});Mt.getUserData().then((function(e){Wt=e._id,jt.setUserInfo({name:e.name,bio:e.about,avatar:e.avatar,id:e._id})})).catch((function(e){console.log(e)}));var Tt=Mt.getInitialCards(),Pt=new x({renderer:function(e){Pt.addItem(Ct(e))}},".places");Tt.then((function(e){console.log(e),Pt.renderItems(e)})).catch((function(e){console.log(e)}));var Lt=new Oe(".place-full-photo");Lt.setEventListeners();var qt=new Je(".profile-edit",(function(e){jt.setUserInfo(e),Mt.saveUserData(e),qt.close()}));qt.setEventListeners(),n.addEventListener("click",(function(){qt.open();var e=jt.getUserInfo();o.value=e.name,i.value=e.bio,It.hideError()}));var Rt=new Je(".place-add",(function(e){e.likes=[],e.owner={_id:jt.getUserInfo().id},console.log(e.owner),Pt.addItem(Ct(e),!1),Mt.addNewCard(e),Rt.close()}));Rt.setEventListeners(),a.addEventListener("click",(function(){Rt.open(),l.reset(),Dt.hideError()}));var xt=new Et(".card-delete-confirmation",(function(){Mt.deleteCard(Ot),xt.close()}));xt.setEventListeners();var It=new M(t,r);It.enableValidation();var Dt=new M(t,l);Dt.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QXNCQyxlQVF4QixJQUFNQyxHQUFnQixJQUFJL0QsR1ZySFcsY1VxSDBCLFNBQUN5QixHQUM5REEsRUFBVXpDLE1BQVEsR0FHbEJ5QyxFQUFVM0MsTUFBUSxDQUFFQyxJQUFLOEQsR0FBU2UsY0FBYzlHLElBQ2hENkYsUUFBUUMsSUFBSW5CLEVBQVUzQyxPQUV0QnVFLEdBQVVDLFFBQVFsQixHQUFXWCxJQUFZLEdBQ3pDUyxHQUFJOEIsV0FBV3ZDLEdBQ2ZzQyxHQUFjcEUsV0FHaEJvRSxHQUFjUCxvQkFDZHJILEVBQWVpQixpQkFBaUIsU0FBUyxXQUN2QzJHLEdBQWN6QixPQUNkbEcsRUFBb0I4RCxRQUNwQitELEdBQXNCSCxlQUd4QixJQUFNckIsR0FBbUIsSUFBSVIsR1Z0SWUsNkJVd0kxQyxXQUNFQyxHQUFJZ0MsV0FBV2xDLElBRWZTLEdBQWlCOUMsV0FHckI4QyxHQUFpQmUsb0JBc0JqQixJQUFNSyxHQUF3QixJQUFJeEgsRUFDaENmLEVBQ0FVLEdBRUY2SCxHQUFzQk0sbUJBRXRCLElBQU1GLEdBQXdCLElBQUk1SCxFQUNoQ2YsRUFDQWMsR0FFRjZILEdBQXNCRSxtQiIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL21lc3RvL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9tZXN0by93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIGRlZmluaXRpb24pIHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiAn0JDRgNGF0YvQtycsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9hcmtoeXouanBnJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQp9C10LvRj9Cx0LjQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGcnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ9CY0LLQsNC90L7QstC+JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2l2YW5vdm8uanBnJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQmtCw0LzRh9Cw0YLQutCwJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2thbWNoYXRrYS5qcGcnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ9Cl0L7Qu9C80L7Qs9C+0YDRgdC60LjQuSDRgNCw0LnQvtC9JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGcnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ9CR0LDQudC60LDQuycsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9iYWlrYWwuanBnJyxcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6ICcuZm9ybScsXG4gIGlucHV0U2VsZWN0b3I6ICcuZm9ybV9faW5wdXQnLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5mb3JtX19zdWJtaXQnLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAnYnV0dG9uX2Rpc2FibGVkJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAnZm9ybV9faW5wdXRfdHlwZV9lcnJvcicsXG4gIGVycm9yQ2xhc3M6ICdmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmUnLFxufTtcblxuZXhwb3J0IGNvbnN0IGVkaXRJbmZvQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbl90eXBlX2VkaXQnKTtcbmV4cG9ydCBjb25zdCBlZGl0SW5mb0Zvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgJy5wcm9maWxlLWVkaXRfX2Zvcm0nXG4pO1xuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGVkaXRJbmZvRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIltuYW1lPSduYW1lJ11cIik7XG5leHBvcnQgY29uc3QgYmlvSW5wdXQgPSBlZGl0SW5mb0Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0nYmlvJ11cIik7XG5leHBvcnQgY29uc3QgYWRkUGxhY2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX3R5cGVfYWRkJyk7XG5leHBvcnQgY29uc3QgYWRkUGxhY2VGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZS1hZGRfX2Zvcm0nKTtcbmV4cG9ydCBjb25zdCBhZGRQbGFjZVBvcHVwU2VsZWN0b3IgPSAnLnBsYWNlLWFkZCc7XG5leHBvcnQgY29uc3QgZWRpdEluZm9Qb3B1cFNlbGVjdG9yID0gJy5wcm9maWxlLWVkaXQnO1xuZXhwb3J0IGNvbnN0IGNvbmZpcm1EZWxldGlvblBvcHVwU2VsZWN0b3IgPSAnLmNhcmQtZGVsZXRlLWNvbmZpcm1hdGlvbic7XG5leHBvcnQgY29uc3QgcG9wdXBGdWxsUGhvdG9TZWxlY3RvciA9ICcucGxhY2UtZnVsbC1waG90byc7XG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlU2VsZWN0b3IgPSAnLmNhcmQtdGVtcGxhdGUnO1xuZXhwb3J0IGNvbnN0IGNhcmRzQ29udGFpbmVyU2VsZWN0b3IgPSAnLnBsYWNlcyc7XG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWVTZWxlY3RvciA9ICcucHJvZmlsZV9fbmFtZSc7XG5leHBvcnQgY29uc3QgcHJvZmlsZUJpb1NlbGVjdG9yID0gJy5wcm9maWxlX19iaW8nO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXJTZWxlY3RvciA9ICcucHJvZmlsZV9fYXZhdGFyJztcbmV4cG9ydCBjb25zdCB1c2VyRGF0YVNlbGVjdG9ycyA9IHtcbiAgcHJvZmlsZU5hbWVTZWxlY3RvcixcbiAgcHJvZmlsZUJpb1NlbGVjdG9yLFxuICBwcm9maWxlQXZhdGFyU2VsZWN0b3IsXG59O1xuZXhwb3J0IGNvbnN0IGRlbGV0ZVBsYWNlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbl90eXBlX2RlbGV0ZScpO1xuZXhwb3J0IGNvbnN0IGRlbGV0ZVBsYWNlUG9wdXBTZWxlY3RvciA9ICcucGxhY2VfX2RlbGV0ZSc7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgI2Zvcm1TZWxlY3RvcjtcbiAgI2lucHV0U2VsZWN0b3I7XG4gICNzdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgI2luYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICNpbnB1dEVycm9yQ2xhc3M7XG4gICNlcnJvckNsYXNzO1xuICAjZm9ybUVsZW1lbnQ7XG4gICNpbnB1dExpc3Q7XG4gICNidXR0b247XG5cbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuI2Zvcm1TZWxlY3RvciA9IGNvbmZpZy5mb3JtU2VsZWN0b3I7XG4gICAgdGhpcy4jaW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuI3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuI2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLiNpbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuI2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcbiAgICB0aGlzLiNmb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuI2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLiNmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuI2lucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLiNidXR0b24gPSB0aGlzLiNmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuI3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gICNjaGVja0lucHV0VmFsaWRpdHkgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuI3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4jaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH07XG5cbiAgI3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSA9PiB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy4jZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy4jaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy4jZXJyb3JDbGFzcyk7XG4gIH07XG5cbiAgI2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuI2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuI2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy4jZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gIH07XG5cbiAgaGlkZUVycm9yID0gKCkgPT4ge1xuICAgIHRoaXMuI2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuI2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgICB0aGlzLiN0b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIH0pO1xuICB9O1xuXG4gICNzZXRGb3JtRXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgLy8gY29uc29sZS5sb2coJzEnKTtcbiAgICB0aGlzLiN0b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuI2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy4jY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuI3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICAjdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuI2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLiNidXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLiNpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuI2J1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuI2J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuI2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy4jYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICB9XG4gIH07XG5cbiAgI2hhc0ludmFsaWRJbnB1dCA9ICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy4jaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH07XG5cbiAgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcbiAgICB0aGlzLiNmb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuI3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgfSk7XG4gICAgdGhpcy4jc2V0Rm9ybUV2ZW50TGlzdGVuZXJzKCk7XG4gIH07XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgI3JlbmRlcmVkSXRlbXM7XG4gICNyZW5kZXJlcjtcbiAgI2NvbnRhaW5lcjtcblxuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgLy8gdGhpcy4jcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuI3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy4jY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcyhyZW5kZXJlZEl0ZW1zKSB7XG4gICAgcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLiNyZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCwgb3JkZXIgPSB0cnVlKSB7XG4gICAgaWYgKG9yZGVyKSB7XG4gICAgICB0aGlzLiNjb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiNjb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IG15VXNlcklkIH0gZnJvbSAnLi4vcGFnZXMvaW5kZXguanMnO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gICNuYW1lO1xuICAjbGluaztcbiAgI3RlbXBsYXRlU2VsZWN0b3I7XG4gICNjYXJkO1xuICAjZGVsZXRlQnV0dG9uO1xuICAjbGlrZUJ1dHRvbjtcbiAgI3BsYWNlUGhvdG87XG4gICNoYW5kbGVDYXJkQ2xpY2s7XG4gICNsaWtlc0NvdW50O1xuICAjb3duZXI7XG4gICNoYW5kbGVDYXJkRGVsZXRlO1xuICAjY2FyZElkO1xuXG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgdGVtcGxhdGVTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVDYXJkRGVsZXRlIH0pIHtcbiAgICB0aGlzLiNuYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuI2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy4jb3duZXIgPSBkYXRhLm93bmVyLl9pZDtcbiAgICB0aGlzLiNjYXJkSWQgPSBkYXRhLl9pZDtcbiAgICBpZiAoZGF0YS5saWtlcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuI2xpa2VzQ291bnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4jbGlrZXNDb3VudCA9IDA7XG4gICAgfVxuICAgIHRoaXMuI3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xuICAgIHRoaXMuI2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLiNoYW5kbGVDYXJkRGVsZXRlID0gaGFuZGxlQ2FyZERlbGV0ZTtcbiAgfVxuXG4gIGdldENhcmRJZCgpIHtcbiAgICByZXR1cm4gdGhpcy4jY2FyZElkO1xuICB9XG5cbiAgI2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuI3RlbXBsYXRlU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKCcucGxhY2UnKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBjcmVhdGVDYXJkKCkge1xuICAgIHRoaXMuI2NhcmQgPSB0aGlzLiNnZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuI3BsYWNlUGhvdG8gPSB0aGlzLiNjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZV9fcGhvdG8nKTtcbiAgICB0aGlzLiNwbGFjZVBob3RvLnNyYyA9IHRoaXMuI2xpbms7XG4gICAgdGhpcy4jcGxhY2VQaG90by5hbHQgPSB0aGlzLiNuYW1lO1xuICAgIHRoaXMuI2NhcmQucXVlcnlTZWxlY3RvcignLnBsYWNlX190aXRsZScpLmlubmVyVGV4dCA9IHRoaXMuI25hbWU7XG4gICAgdGhpcy4jZGVsZXRlQnV0dG9uID0gdGhpcy4jY2FyZC5xdWVyeVNlbGVjdG9yKCcucGxhY2VfX2RlbGV0ZScpO1xuICAgIHRoaXMuI2xpa2VCdXR0b24gPSB0aGlzLiNjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZV9fbGlrZScpO1xuICAgIHRoaXMuI2NhcmQucXVlcnlTZWxlY3RvcignLnBsYWNlX19saWtlcy1jb3VudCcpLnRleHRDb250ZW50ID1cbiAgICAgIHRoaXMuI2xpa2VzQ291bnQ7XG4gICAgLy8gY29uc29sZS5sb2codGhpcy4jY2FyZCk7XG4gICAgLy8gY29uc29sZS5sb2codGhpcy4jb3duZXIpO1xuICAgIGlmICh0aGlzLiNvd25lciA9PSBteVVzZXJJZCkge1xuICAgICAgdGhpcy4jZGVsZXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3BsYWNlX19kZWxldGVfYWN0aXZlJyk7XG4gICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLiNkZWxldGVCdXR0b24pO1xuICAgICAgLy8gY29uc29sZS5sb2coJzEnKTtcbiAgICB9XG4gICAgdGhpcy4jc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcy4jY2FyZDtcbiAgfVxuXG4gICNzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLiNkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLiNjYXJkSWQpO1xuICAgICAgdGhpcy4jaGFuZGxlQ2FyZERlbGV0ZSh0aGlzKTtcbiAgICAgIC8vIHRoaXMuI2RlbGV0ZUNhcmQoKTtcbiAgICB9KTtcbiAgICB0aGlzLiNsaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy4jbGlrZUNhcmQoKTtcbiAgICB9KTtcbiAgICB0aGlzLiNwbGFjZVBob3RvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy4jaGFuZGxlQ2FyZENsaWNrKHRoaXMuI25hbWUsIHRoaXMuI2xpbmspO1xuICAgIH0pO1xuICB9XG5cbiAgI2RlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy4jY2FyZC5yZW1vdmUoKTtcbiAgfVxuXG4gICNsaWtlQ2FyZCgpIHtcbiAgICB0aGlzLiNsaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ3BsYWNlX19saWtlX2FjdGl2ZScpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gICNwb3B1cDtcblxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy4jcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLiNwb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy4jaGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy4jcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuI2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gICNoYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy4jcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy4jcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgI3BvcHVwO1xuICAjZnVsbFBob3RvSW1hZ2U7XG4gICNmdWxsUGhvdG9DYXB0aW9uO1xuXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLiNwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy4jZnVsbFBob3RvSW1hZ2UgPSB0aGlzLiNwb3B1cC5xdWVyeVNlbGVjdG9yKFxuICAgICAgJy5wbGFjZS1mdWxsLXBob3RvX19pbWFnZSdcbiAgICApO1xuICAgIHRoaXMuI2Z1bGxQaG90b0NhcHRpb24gPSB0aGlzLiNwb3B1cC5xdWVyeVNlbGVjdG9yKFxuICAgICAgJy5wbGFjZS1mdWxsLXBob3RvX19jYXB0aW9uJ1xuICAgICk7XG4gIH1cblxuICBvcGVuKG5hbWUsIGxpbmspIHtcbiAgICB0aGlzLiNmdWxsUGhvdG9JbWFnZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuI2Z1bGxQaG90b0ltYWdlLmFsdCA9IG5hbWU7XG4gICAgdGhpcy4jZnVsbFBob3RvQ2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgI2hhbmRsZUZvcm1TdWJtaXQ7XG4gICNmb3JtVmFsdWVzO1xuICAjaW5wdXRMaXN0O1xuICAjcG9wdXA7XG4gICNmb3JtO1xuXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLiNwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy4jaGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy4jZm9ybSA9IHRoaXMuI3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcbiAgICB0aGlzLiNpbnB1dExpc3QgPSB0aGlzLiNwb3B1cC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpO1xuICB9XG5cbiAgI2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuI2Zvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLiNpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHRoaXMuI2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy4jZm9ybVZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuI2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuI2hhbmRsZUZvcm1TdWJtaXQodGhpcy4jZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy4jZm9ybS5yZXNldCgpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gICNwcm9maWxlTmFtZTtcbiAgI3Byb2ZpbGVCaW87XG4gICNwcm9maWxlQXZhdGFyO1xuICAjYXZhdGFyO1xuICAjaWQ7XG5cbiAgY29uc3RydWN0b3IodXNlckRhdGFTZWxlY3RvcnMpIHtcbiAgICB0aGlzLiNwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB1c2VyRGF0YVNlbGVjdG9ycy5wcm9maWxlTmFtZVNlbGVjdG9yXG4gICAgKTtcbiAgICB0aGlzLiNwcm9maWxlQmlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHVzZXJEYXRhU2VsZWN0b3JzLnByb2ZpbGVCaW9TZWxlY3RvclxuICAgICk7XG4gICAgdGhpcy4jcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB1c2VyRGF0YVNlbGVjdG9ycy5wcm9maWxlQXZhdGFyU2VsZWN0b3JcbiAgICApO1xuICAgIC8vIHRoaXMuI2F2YXRhciA9XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy4jcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXG4gICAgICBiaW86IHRoaXMuI3Byb2ZpbGVCaW8udGV4dENvbnRlbnQsXG4gICAgICBhdmF0YXI6IHRoaXMuI2F2YXRhcixcbiAgICAgIGlkOiB0aGlzLiNpZCxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8obmV3VXNlckRhdGEpIHtcbiAgICB0aGlzLiNwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5ld1VzZXJEYXRhLm5hbWU7XG4gICAgdGhpcy4jcHJvZmlsZUJpby50ZXh0Q29udGVudCA9IG5ld1VzZXJEYXRhLmJpbztcbiAgICAvLyB0aGlzLiNwcm9maWxlQXZhdGFyLnNyYyA9IG5ld1VzZXJEYXRhLmF2YXRhcjtcbiAgICAvLyB0aGlzLiNpZCA9IG5ld1VzZXJEYXRhLmlkO1xuICAgIC8vIGNvbnNvbGUubG9nKG5ld1VzZXJEYXRhLmlkKTtcbiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLiNpZCk7XG4gIH1cbn1cbiIsIi8vIGltcG9ydCB7IG5hbWVJbnB1dCwgYmlvSW5wdXQgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICAjYmFzZVVybDtcbiAgI2hlYWRlcnM7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuI2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XG4gICAgdGhpcy4jaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcbiAgfVxuXG4gICNoYW5kbGVSZXNwb25zZSA9IChyZXNwb25zZSkgPT4ge1xuICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgIH1cbiAgfTtcblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuI2Jhc2VVcmwgKyAnL2NhcmRzJywge1xuICAgICAgaGVhZGVyczogdGhpcy4jaGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuI2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIGdldFVzZXJEYXRhKCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLiNiYXNlVXJsICsgJy91c2Vycy9tZScsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuI2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLiNoYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICBzYXZlVXNlckRhdGEoaW5wdXREYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuI2Jhc2VVcmwgKyAnL3VzZXJzL21lJywge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy4jaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogaW5wdXREYXRhLm5hbWUsXG4gICAgICAgIGFib3V0OiBpbnB1dERhdGEuYmlvLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLiNoYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICBhZGROZXdDYXJkKGNhcmREYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuI2Jhc2VVcmwgKyAnL2NhcmRzJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLiNoZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBjYXJkRGF0YS5uYW1lLFxuICAgICAgICBsaW5rOiBjYXJkRGF0YS5saW5rLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLiNoYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLiNiYXNlVXJsICsgYC9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy4jaGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuI2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIC8vINC00YDRg9Cz0LjQtSDQvNC10YLQvtC00Ysg0YDQsNCx0L7RgtGLINGBIEFQSVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gICNoYW5kbGVGb3JtU3VibWl0O1xuICAjZm9ybVZhbHVlcztcbiAgI2lucHV0TGlzdDtcbiAgI3BvcHVwO1xuICAjZm9ybTtcblxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy4jcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuI2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuI2Zvcm0gPSB0aGlzLiNwb3B1cC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xuICB9XG5cbiAgLy8gI2dldElucHV0VmFsdWVzKCkge1xuICAvLyAgIHRoaXMuI2Zvcm1WYWx1ZXMgPSB7fTtcbiAgLy8gICB0aGlzLiNpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgLy8gICAgIHRoaXMuI2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgLy8gICB9KTtcbiAgLy8gICByZXR1cm4gdGhpcy4jZm9ybVZhbHVlcztcbiAgLy8gfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuI2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLiNoYW5kbGVGb3JtU3VibWl0KCk7XG4gICAgfSk7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgLy8gdGhpcy4jZm9ybS5yZXNldCgpO1xuICB9XG59XG4iLCJpbXBvcnQgJy4vaW5kZXguY3NzJztcblxuaW1wb3J0IHtcbiAgdmFsaWRhdGlvbkNvbmZpZyxcbiAgZWRpdEluZm9CdXR0b24sXG4gIGFkZFBsYWNlQnV0dG9uLFxuICBhZGRQbGFjZUZvcm1FbGVtZW50LFxuICBhZGRQbGFjZVBvcHVwU2VsZWN0b3IsXG4gIGNhcmRUZW1wbGF0ZVNlbGVjdG9yLFxuICBjYXJkc0NvbnRhaW5lclNlbGVjdG9yLFxuICBlZGl0SW5mb0Zvcm1FbGVtZW50LFxuICBlZGl0SW5mb1BvcHVwU2VsZWN0b3IsXG4gIHBvcHVwRnVsbFBob3RvU2VsZWN0b3IsXG4gIGJpb0lucHV0LFxuICBuYW1lSW5wdXQsXG4gIHVzZXJEYXRhU2VsZWN0b3JzLFxuICBwcm9maWxlQXZhdGFyU2VsZWN0b3IsXG4gIGNvbmZpcm1EZWxldGlvblBvcHVwU2VsZWN0b3IsXG4gIGRlbGV0ZVBsYWNlQnV0dG9uLFxuICBkZWxldGVQbGFjZVBvcHVwU2VsZWN0b3IsXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5cbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMnO1xuXG5leHBvcnQgbGV0IG15VXNlcklkID0gbnVsbDtcbmxldCBjYXJkSWQgPSBudWxsO1xuLy8gbGV0IGNhcmRJZCA9IG51bGw7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0yNycsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiAnMzc1ODBlMjktY2E0My00ZTYwLWJmYzQtOTczMWQ2MTY3NjkxJyxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICB9LFxufSk7XG5cbi8vIFByb21pc2UuYWxsO1xuZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XG4gICAgZGF0YTogaXRlbSxcbiAgICB0ZW1wbGF0ZVNlbGVjdG9yOiBjYXJkVGVtcGxhdGVTZWxlY3RvcixcbiAgICBoYW5kbGVDYXJkQ2xpY2s6IChuYW1lLCBsaW5rKSA9PiB7XG4gICAgICBwb3B1cEZ1bGxQaG90by5vcGVuKG5hbWUsIGxpbmspO1xuICAgIH0sXG4gICAgaGFuZGxlQ2FyZERlbGV0ZTogKGNhcmRJbnN0YW5jZSkgPT4ge1xuICAgICAgZGVsZXRlQ2FyZChjYXJkSW5zdGFuY2UpO1xuICAgICAgLy8gY29uc29sZS5sb2coJ29wZW5lZCcpO1xuICAgICAgLy8gcG9wdXBEZWxldGVQbGFjZS5vcGVuKCk7XG4gICAgICAvLyBjYXJkSWQgPSBjYXJkSW5zdGFuY2UuZ2V0Q2FyZElkKCk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhjYXJkSWQpO1xuICAgIH0sXG4gIH0pO1xuICByZXR1cm4gY2FyZC5jcmVhdGVDYXJkKCk7XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZUNhcmQoY2FyZCkge1xuICBwb3B1cERlbGV0ZVBsYWNlLm9wZW4oKTtcbiAgLy8gY29uc29sZS5sb2coY2FyZC5faWQpO1xuICBjYXJkSWQgPSBjYXJkLmdldENhcmRJZCgpO1xuICBjb25zb2xlLmxvZyhjYXJkSWQpO1xufVxuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh1c2VyRGF0YVNlbGVjdG9ycyk7XG5nZXRVc2VyRGF0YUZyb21TZXJ2ZXIoKTtcblxuY29uc3QgY2FyZHNQcm9taXNlID0gYXBpLmdldEluaXRpYWxDYXJkcygpO1xuXG5jb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY2FyZHNMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChpdGVtKSk7XG4gICAgfSxcbiAgfSxcbiAgY2FyZHNDb250YWluZXJTZWxlY3RvclxuKTtcblxuY2FyZHNQcm9taXNlXG4gIC50aGVuKChkYXRhKSA9PiB7XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgY2FyZHNMaXN0LnJlbmRlckl0ZW1zKGRhdGEpO1xuICAgIC8vIHJldHVybiBkYXRhO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycik7XG4gIH0pO1xuLy8gY2FyZHNMaXN0LnJlbmRlckl0ZW1zKGNhcmRzUHJvbWlzZSk7XG5cbi8vIGNvbnNvbGUubG9nKGRhdGEpO1xuLy8gICAgICAgcmV0dXJuIGRhdGE7XG4vLyAgICAgfSlcbi8vICAgICAuY2F0Y2goKGVycikgPT4ge1xuLy8gICAgICAgY29uc29sZS5sb2coZXJyKTtcbi8vICAgICB9KTt9LFxuLy8gdXNlckluZm8uc2V0VXNlckluZm8oZ2V0VXNlckRhdGFGcm9tU2VydmVyKCkpO1xuXG4vLyByZXR1cm4gcmVzdWx0O1xuXG4vLyBjb25zdCBjYXJkc1Byb21pc2UgPSBhcGkuZ2V0SW5pdGlhbENhcmRzKCk7XG4vLyBjYXJkc1Byb21pc2Vcbi8vICAgLnRoZW4oKHJlcykgPT4ge1xuLy8gICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7XG5cbi8vICAgLmNhdGNoKChlcnIpID0+IHtcbi8vICAgICBjb25zb2xlLmxvZyhlcnIpO1xuLy8gICB9KTtcblxuZnVuY3Rpb24gZ2V0VXNlckRhdGFGcm9tU2VydmVyKCkge1xuICBjb25zdCBwcm9maWxlRGF0YVByb21pc2UgPSBhcGkuZ2V0VXNlckRhdGEoKTtcbiAgcHJvZmlsZURhdGFQcm9taXNlXG4gICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgLy8gY29uc3Qgc2VydmVyVXNlckRhdGEgPSB7fTtcbiAgICAgIC8vIHNlcnZlclVzZXJEYXRhLm5hbWUgPSByZXN1bHQubmFtZTtcbiAgICAgIC8vIHNlcnZlclVzZXJEYXRhLmJpbyA9IHJlc3VsdC5hYm91dDtcbiAgICAgIC8vIHNlcnZlclVzZXJEYXRhLmF2YXRhciA9IHJlc3VsdC5hdmF0YXI7XG4gICAgICAvLyBzZXJ2ZXJVc2VyRGF0YS5pZCA9IHJlc3VsdC5faWQ7XG4gICAgICBteVVzZXJJZCA9IHJlc3VsdC5faWQ7XG4gICAgICAvLyBjb25zb2xlLmxvZyhzZXJ2ZXJVc2VyRGF0YSk7XG4gICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVBdmF0YXJTZWxlY3Rvcikuc3JjID0gcmVzdWx0LmF2YXRhcjtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICAgICAgbmFtZTogcmVzdWx0Lm5hbWUsXG4gICAgICAgIGJpbzogcmVzdWx0LmFib3V0LFxuICAgICAgICBhdmF0YXI6IHJlc3VsdC5hdmF0YXIsXG4gICAgICAgIGlkOiByZXN1bHQuX2lkLFxuICAgICAgfSk7XG4gICAgICAvLyBlZGl0SW5mb0Zvcm1WYWxpZGF0b3IuaGlkZUVycm9yKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbn1cblxuY29uc3QgcG9wdXBGdWxsUGhvdG8gPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBGdWxsUGhvdG9TZWxlY3Rvcik7XG5wb3B1cEZ1bGxQaG90by5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwb3B1cEVkaXRJbmZvID0gbmV3IFBvcHVwV2l0aEZvcm0oZWRpdEluZm9Qb3B1cFNlbGVjdG9yLCAoaW5wdXREYXRhKSA9PiB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGlucHV0RGF0YSk7XG4gIGFwaS5zYXZlVXNlckRhdGEoaW5wdXREYXRhKTtcbiAgcG9wdXBFZGl0SW5mby5jbG9zZSgpO1xufSk7XG5cbnBvcHVwRWRpdEluZm8uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmVkaXRJbmZvQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBwb3B1cEVkaXRJbmZvLm9wZW4oKTtcbiAgY29uc3QgcHJvZmlsZURhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBuYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlRGF0YS5uYW1lO1xuICBiaW9JbnB1dC52YWx1ZSA9IHByb2ZpbGVEYXRhLmJpbztcbiAgZWRpdEluZm9Gb3JtVmFsaWRhdG9yLmhpZGVFcnJvcigpO1xuICAvLyBnZXRVc2VyRGF0YUZyb21TZXJ2ZXIoKTtcbn0pO1xuXG4vLyBmdW5jdGlvbiBnZXRDYXJkSWQoY2FyZCkge1xuLy8gICByZXR1cm4gY2FyZC5nZXRDYXJkSWQoKTtcbi8vIH1cblxuY29uc3QgcG9wdXBBZGRQbGFjZSA9IG5ldyBQb3B1cFdpdGhGb3JtKGFkZFBsYWNlUG9wdXBTZWxlY3RvciwgKGlucHV0RGF0YSkgPT4ge1xuICBpbnB1dERhdGEubGlrZXMgPSBbXTtcbiAgLy8gaW5wdXREYXRhLm93bmVyLl9pZCA9ICcnO1xuXG4gIGlucHV0RGF0YS5vd25lciA9IHsgX2lkOiB1c2VySW5mby5nZXRVc2VySW5mbygpLmlkIH07XG4gIGNvbnNvbGUubG9nKGlucHV0RGF0YS5vd25lcik7XG5cbiAgY2FyZHNMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChpbnB1dERhdGEpLCBmYWxzZSk7XG4gIGFwaS5hZGROZXdDYXJkKGlucHV0RGF0YSk7XG4gIHBvcHVwQWRkUGxhY2UuY2xvc2UoKTtcbn0pO1xuXG5wb3B1cEFkZFBsYWNlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5hZGRQbGFjZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgcG9wdXBBZGRQbGFjZS5vcGVuKCk7XG4gIGFkZFBsYWNlRm9ybUVsZW1lbnQucmVzZXQoKTtcbiAgYWRkUGxhY2VGb3JtVmFsaWRhdG9yLmhpZGVFcnJvcigpO1xufSk7XG5cbmNvbnN0IHBvcHVwRGVsZXRlUGxhY2UgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFxuICBjb25maXJtRGVsZXRpb25Qb3B1cFNlbGVjdG9yLFxuICAoKSA9PiB7XG4gICAgYXBpLmRlbGV0ZUNhcmQoY2FyZElkKTtcblxuICAgIHBvcHVwRGVsZXRlUGxhY2UuY2xvc2UoKTtcbiAgfVxuKTtcbnBvcHVwRGVsZXRlUGxhY2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbi8vIGRlbGV0ZVBsYWNlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuLy8gICBwb3B1cERlbGV0ZVBsYWNlLm9wZW4oKTtcbi8vIH0pO1xuLy8gY29uc3QgcG9wdXBEZWxldGVDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oY29uZmlybURlbGV0aW9uUG9wdXBTZWxlY3RvciwgKCkgPT4ge1xuLy8gICBwb3B1cERlbGV0ZUNhcmQuY2xvc2UoKTtcbi8vIH0pO1xuLy8gcG9wdXBEZWxldGVDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4vLyBmdW5jdGlvbiBnZXRJbml0aWFsQ2FyZHNGcm9tU2VydmVyKCkge1xuXG4vLyB9XG5cbi8vIGNvbnN0IGNhcmRzTGlzdCA9IG5ldyBTZWN0aW9uKFxuLy8gICB7XG4vLyAgICAgaXRlbXM6IGdldEluaXRpYWxDYXJkc0Zyb21TZXJ2ZXIoKSxcbi8vICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbi8vICAgICAgIGNhcmRzTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSkpO1xuLy8gICAgIH0sXG4vLyAgIH0sXG4vLyAgIGNhcmRzQ29udGFpbmVyU2VsZWN0b3Jcbi8vICk7XG5cbmNvbnN0IGVkaXRJbmZvRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB2YWxpZGF0aW9uQ29uZmlnLFxuICBlZGl0SW5mb0Zvcm1FbGVtZW50XG4pO1xuZWRpdEluZm9Gb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgYWRkUGxhY2VGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRpb25Db25maWcsXG4gIGFkZFBsYWNlRm9ybUVsZW1lbnRcbik7XG5hZGRQbGFjZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiZWRpdEluZm9CdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJlZGl0SW5mb0Zvcm1FbGVtZW50IiwibmFtZUlucHV0IiwiYmlvSW5wdXQiLCJhZGRQbGFjZUJ1dHRvbiIsImFkZFBsYWNlRm9ybUVsZW1lbnQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwicmVtb3ZlIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzb21lIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJ0aGlzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwicmVuZGVyZWRJdGVtcyIsIml0ZW0iLCJlbGVtZW50Iiwib3JkZXIiLCJhcHBlbmQiLCJwcmVwZW5kIiwiQ2FyZCIsImRhdGEiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlQ2FyZERlbGV0ZSIsIm5hbWUiLCJsaW5rIiwib3duZXIiLCJfaWQiLCJsaWtlcyIsImxlbmd0aCIsInNyYyIsImFsdCIsImlubmVyVGV4dCIsIm15VXNlcklkIiwiY29udGVudCIsImNsb25lTm9kZSIsInRvZ2dsZSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJQb3B1cFdpdGhJbWFnZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwicmVzZXQiLCJpbnB1dCIsInZhbHVlIiwiVXNlckluZm8iLCJ1c2VyRGF0YVNlbGVjdG9ycyIsInByb2ZpbGVOYW1lU2VsZWN0b3IiLCJwcm9maWxlQmlvU2VsZWN0b3IiLCJwcm9maWxlQXZhdGFyU2VsZWN0b3IiLCJiaW8iLCJhdmF0YXIiLCJuZXdVc2VyRGF0YSIsIkFwaSIsIm9wdGlvbnMiLCJyZXNwb25zZSIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJiYXNlVXJsIiwiaGVhZGVycyIsImZldGNoIiwidGhlbiIsImlucHV0RGF0YSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJjYXJkRGF0YSIsImNhcmRJZCIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsImFwaSIsImF1dGhvcml6YXRpb24iLCJjcmVhdGVDYXJkIiwicG9wdXBGdWxsUGhvdG8iLCJvcGVuIiwiY2FyZEluc3RhbmNlIiwiY2FyZCIsInBvcHVwRGVsZXRlUGxhY2UiLCJnZXRDYXJkSWQiLCJjb25zb2xlIiwibG9nIiwidXNlckluZm8iLCJnZXRVc2VyRGF0YSIsInJlc3VsdCIsInNldFVzZXJJbmZvIiwiY2F0Y2giLCJlcnIiLCJjYXJkc1Byb21pc2UiLCJnZXRJbml0aWFsQ2FyZHMiLCJjYXJkc0xpc3QiLCJhZGRJdGVtIiwicmVuZGVySXRlbXMiLCJzZXRFdmVudExpc3RlbmVycyIsInBvcHVwRWRpdEluZm8iLCJzYXZlVXNlckRhdGEiLCJwcm9maWxlRGF0YSIsImdldFVzZXJJbmZvIiwiZWRpdEluZm9Gb3JtVmFsaWRhdG9yIiwiaGlkZUVycm9yIiwicG9wdXBBZGRQbGFjZSIsImFkZE5ld0NhcmQiLCJhZGRQbGFjZUZvcm1WYWxpZGF0b3IiLCJkZWxldGVDYXJkIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=